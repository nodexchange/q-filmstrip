/*!
 * ADTECH Rich Media JS Library 2_67_0 Copyright 2010 AOL Platforms.
 */
var com=com||{};if(com.adtech=com.adtech||{},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===Infinity&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;d<f;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;g<d;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),function(a){"use strict";function b(a){switch(typeof a){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===a?"null":"object"}}function c(a){return Object.prototype.toString.call(a).replace(/^\[object *|\]$/g,"")}function d(a){return"function"==typeof a}function e(a){if(null===a||a===D)throw TypeError();return Object(a)}function f(a){return a>>0}function g(a){return a>>>0}function h(a){if(a.length>E)throw RangeError("Array too large for polyfill");var b;for(b=0;b<a.length;b+=1)!function(b){Object.defineProperty(a,b,{get:function(){return a._getter(b)},set:function(c){a._setter(b,c)},enumerable:!0,configurable:!1})}(b)}function i(a,b){var c=32-b;return a<<c>>c}function j(a,b){var c=32-b;return a<<c>>>c}function k(a){return[255&a]}function l(a){return i(a[0],8)}function m(a){return[255&a]}function n(a){return j(a[0],8)}function o(a){return a=M(Number(a)),[a<0?0:a>255?255:255&a]}function p(a){return[a>>8&255,255&a]}function q(a){return i(a[0]<<8|a[1],16)}function r(a){return[a>>8&255,255&a]}function s(a){return j(a[0]<<8|a[1],16)}function t(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function u(a){return i(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function v(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function w(a){return j(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function x(a,b,c){function d(a){var b=H(a),c=a-b;return c<.5?b:c>.5?b+1:b%2?b+1:b}var e,f,g,h,i,j,k,l=(1<<b-1)-1;for(a!==a?(f=(1<<b)-1,g=L(2,c-1),e=0):a===Infinity||a===-Infinity?(f=(1<<b)-1,g=0,e=a<0?1:0):0===a?(f=0,g=0,e=1/a==-Infinity?1:0):(e=a<0,a=G(a),a>=L(2,1-l)?(f=K(H(I(a)/F),1023),g=d(a/L(2,f)*L(2,c)),g/L(2,c)>=2&&(f+=1,g=1),f>l?(f=(1<<b)-1,g=0):(f+=l,g-=L(2,c))):(f=0,g=d(a/L(2,1-l-c)))),i=[],h=c;h;h-=1)i.push(g%2?1:0),g=H(g/2);for(h=b;h;h-=1)i.push(f%2?1:0),f=H(f/2);for(i.push(e?1:0),i.reverse(),j=i.join(""),k=[];j.length;)k.push(parseInt(j.substring(0,8),2)),j=j.substring(8);return k}function y(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(d=a.length;d;d-=1)for(f=a[d-1],e=8;e;e-=1)l.push(f%2?1:0),f>>=1;return l.reverse(),g=l.join(""),h=(1<<b-1)-1,i=parseInt(g.substring(0,1),2)?-1:1,j=parseInt(g.substring(1,1+b),2),k=parseInt(g.substring(1+b),2),j===(1<<b)-1?0!==k?NaN:i*Infinity:j>0?i*L(2,j-h)*(1+k/L(2,c)):0!==k?i*L(2,-(h-1))*(k/L(2,c)):i<0?-0:0}function z(a){return y(a,11,52)}function A(a){return x(a,11,52)}function B(a){return y(a,8,23)}function C(a){return x(a,8,23)}var D=void 0,E=1e5,F=Math.LN2,G=Math.abs,H=Math.floor,I=Math.log,J=Math.max,K=Math.min,L=Math.pow,M=Math.round;!function(){var a=Object.defineProperty,b=!function(){try{return Object.defineProperty({},"x",{})}catch(a){return!1}}();a&&!b||(Object.defineProperty=function(b,c,d){if(a)try{return a(b,c,d)}catch(e){}if(b!==Object(b))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in d&&Object.prototype.__defineGetter__.call(b,c,d.get),Object.prototype.__defineSetter__&&"set"in d&&Object.prototype.__defineSetter__.call(b,c,d.set),"value"in d&&(b[c]=d.value),b})}(),function(){function i(a){if((a=f(a))<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:a}),Object.defineProperty(this,"_bytes",{value:Array(a)});for(var b=0;b<a;b+=1)this._bytes[b]=0}function j(){if(!arguments.length||"object"!=typeof arguments[0])return function(a){if((a=f(a))<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:a}),Object.defineProperty(this,"byteLength",{value:a*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new i(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&arguments[0]instanceof j)return function(a){if(this.constructor!==a.constructor)throw TypeError();var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new i(b)}),Object.defineProperty(this,"byteLength",{value:b}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:a.length});for(var c=0;c<this.length;c+=1)this._setter(c,a._getter(c))}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&!(arguments[0]instanceof j)&&!(arguments[0]instanceof i||"ArrayBuffer"===c(arguments[0])))return function(a){var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new i(b)}),Object.defineProperty(this,"byteLength",{value:b}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:a.length});for(var c=0;c<this.length;c+=1){var d=a[c];this._setter(c,Number(d))}}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&(arguments[0]instanceof i||"ArrayBuffer"===c(arguments[0])))return function(a,b,c){if((b=g(b))>a.byteLength)throw RangeError("byteOffset out of range");if(b%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(c===D){var d=a.byteLength-b;if(d%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");c=d/this.BYTES_PER_ELEMENT}else c=g(c),d=c*this.BYTES_PER_ELEMENT;if(b+d>a.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:a}),Object.defineProperty(this,"byteLength",{value:d}),Object.defineProperty(this,"byteOffset",{value:b}),Object.defineProperty(this,"length",{value:c})}.apply(this,arguments);throw TypeError()}function x(a,b,c){var d=function(){Object.defineProperty(this,"constructor",{value:d}),j.apply(this,arguments),h(this)};"__proto__"in d?d.__proto__=j:(d.from=j.from,d.of=j.of),d.BYTES_PER_ELEMENT=a;var e=function(){};return e.prototype=y,d.prototype=new e,Object.defineProperty(d.prototype,"BYTES_PER_ELEMENT",{value:a}),Object.defineProperty(d.prototype,"_pack",{value:b}),Object.defineProperty(d.prototype,"_unpack",{value:c}),d}a.ArrayBuffer=a.ArrayBuffer||i,Object.defineProperty(j,"from",{value:function(a){return new this(a)}}),Object.defineProperty(j,"of",{value:function(){return new this(arguments)}});var y={};j.prototype=y,Object.defineProperty(j.prototype,"_getter",{value:function(a){if(arguments.length<1)throw SyntaxError("Not enough arguments");if((a=g(a))>=this.length)return D;var b,c,d=[];for(b=0,c=this.byteOffset+a*this.BYTES_PER_ELEMENT;b<this.BYTES_PER_ELEMENT;b+=1,c+=1)d.push(this.buffer._bytes[c]);return this._unpack(d)}}),Object.defineProperty(j.prototype,"get",{value:j.prototype._getter}),Object.defineProperty(j.prototype,"_setter",{value:function(a,b){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(!((a=g(a))>=this.length)){var c,d,e=this._pack(b);for(c=0,d=this.byteOffset+a*this.BYTES_PER_ELEMENT;c<this.BYTES_PER_ELEMENT;c+=1,d+=1)this.buffer._bytes[d]=e[c]}}}),Object.defineProperty(j.prototype,"constructor",{value:j}),Object.defineProperty(j.prototype,"copyWithin",{value:function(a,b){var c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(a);j=k<0?J(i+k,0):K(k,i);var l,m=f(b);l=m<0?J(i+m,0):K(m,i);var n;n=c===D?i:f(c);var o;o=n<0?J(i+n,0):K(n,i);var p,q=K(o-l,i-j);for(l<j&&j<l+q?(p=-1,l=l+q-1,j=j+q-1):p=1;q>0;)d._setter(j,d._getter(l)),l+=p,j+=p,q-=1;return d}}),Object.defineProperty(j.prototype,"every",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;f<c;f++)if(!a.call(e,b._getter(f),f,b))return!1;return!0}}),Object.defineProperty(j.prototype,"fill",{value:function(a){var b=arguments[1],c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(b);j=k<0?J(i+k,0):K(k,i);var l;l=c===D?i:f(c);var m;for(m=l<0?J(i+l,0):K(l,i);j<m;)d._setter(j,a),j+=1;return d}}),Object.defineProperty(j.prototype,"filter",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=[],f=arguments[1],h=0;h<c;h++){var i=b._getter(h);a.call(f,i,h,b)&&e.push(i)}return new this.constructor(e)}}),Object.defineProperty(j.prototype,"find",{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=arguments.length>1?arguments[1]:D,i=0;i<f;){var j=b._getter(i),k=a.call(h,j,i,b);if(Boolean(k))return j;++i}return D}}),Object.defineProperty(j.prototype,"findIndex",{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=arguments.length>1?arguments[1]:D,i=0;i<f;){var j=b._getter(i),k=a.call(h,j,i,b);if(Boolean(k))return i;++i}return-1}}),Object.defineProperty(j.prototype,"forEach",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;f<c;f++)a.call(e,b._getter(f),f,b)}}),Object.defineProperty(j.prototype,"indexOf",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-1/0&&(d=(d>0||-1)*H(G(d)))),d>=c)return-1;for(var e=d>=0?d:J(c-G(d),0);e<c;e++)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(j.prototype,"join",{value:function(a){if(this===D||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;e<c;++e)d[e]=b._getter(e);return d.join(a===D?",":a)}}),Object.defineProperty(j.prototype,"lastIndexOf",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-1/0&&(d=(d>0||-1)*H(G(d))));for(var e=d>=0?K(d,c-1):c-G(d);e>=0;e--)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(j.prototype,"map",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();var e=[];e.length=c;for(var f=arguments[1],h=0;h<c;h++)e[h]=a.call(f,b._getter(h),h,b);return new this.constructor(e)}}),Object.defineProperty(j.prototype,"reduce",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,f=0;for(e=arguments.length>=2?arguments[1]:b._getter(f++);f<c;)e=a.call(D,e,b._getter(f),f,b),f++;return e}}),Object.defineProperty(j.prototype,"reduceRight",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,f=c-1;for(e=arguments.length>=2?arguments[1]:b._getter(f--);f>=0;)e=a.call(D,e,b._getter(f),f,b),f--;return e}}),Object.defineProperty(j.prototype,"reverse",{value:function(){if(this===D||null===this)throw TypeError();for(var a=Object(this),b=g(a.length),c=H(b/2),d=0,e=b-1;d<c;++d,--e){var f=a._getter(d);a._setter(d,a._getter(e)),a._setter(e,f)}return a}}),Object.defineProperty(j.prototype,"set",{value:function(a,b){if(arguments.length<1)throw SyntaxError("Not enough arguments");var c,d,e,f,h,i,j,k,l,m;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(c=arguments[0],(e=g(arguments[1]))+c.length>this.length)throw RangeError("Offset plus length of array is out of range");if(k=this.byteOffset+e*this.BYTES_PER_ELEMENT,l=c.length*this.BYTES_PER_ELEMENT,c.buffer===this.buffer){for(m=[],h=0,i=c.byteOffset;h<l;h+=1,i+=1)m[h]=c.buffer._bytes[i];for(h=0,j=k;h<l;h+=1,j+=1)this.buffer._bytes[j]=m[h]}else for(h=0,i=c.byteOffset,j=k;h<l;h+=1,i+=1,j+=1)this.buffer._bytes[j]=c.buffer._bytes[i]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw TypeError("Unexpected argument type(s)");if(d=arguments[0],f=g(d.length),(e=g(arguments[1]))+f>this.length)throw RangeError("Offset plus length of array is out of range");for(h=0;h<f;h+=1)i=d[h],this._setter(e+h,Number(i))}}}),Object.defineProperty(j.prototype,"slice",{value:function(a,b){for(var c=e(this),d=c.length,h=g(d),i=f(a),j=i<0?J(h+i,0):K(i,h),k=b===D?h:f(b),l=k<0?J(h+k,0):K(k,h),m=l-j,n=c.constructor,o=new n(m),p=0;j<l;){var q=c._getter(j);o._setter(p,q),++j,++p}return o}}),Object.defineProperty(j.prototype,"some",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;f<c;f++)if(a.call(e,b._getter(f),f,b))return!0;return!1}}),Object.defineProperty(j.prototype,"sort",{value:function(a){if(this===D||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;e<c;++e)d[e]=b._getter(e);for(a?d.sort(a):d.sort(),e=0;e<c;++e)b._setter(e,d[e]);return b}}),Object.defineProperty(j.prototype,"subarray",{value:function(a,b){function c(a,b,c){return a<b?b:a>c?c:a}a=f(a),b=f(b),arguments.length<1&&(a=0),arguments.length<2&&(b=this.length),a<0&&(a=this.length+a),b<0&&(b=this.length+b),a=c(a,0,this.length),b=c(b,0,this.length);var d=b-a;return d<0&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)}});var E=x(1,k,l),F=x(1,m,n),I=x(1,o,n),L=x(2,p,q),M=x(2,r,s),N=x(4,t,u),O=x(4,v,w),P=x(4,C,B),Q=x(8,A,z);a.Int8Array=a.Int8Array||E,a.Uint8Array=a.Uint8Array||F,a.Uint8ClampedArray=a.Uint8ClampedArray||I,a.Int16Array=a.Int16Array||L,a.Uint16Array=a.Uint16Array||M,a.Int32Array=a.Int32Array||N,a.Uint32Array=a.Uint32Array||O,a.Float32Array=a.Float32Array||P,a.Float64Array=a.Float64Array||Q}(),function(){function b(a,b){return d(a.get)?a.get(b):a[b]}function e(a,b,d){if(!(a instanceof ArrayBuffer||"ArrayBuffer"===c(a)))throw TypeError();if((b=g(b))>a.byteLength)throw RangeError("byteOffset out of range");if(d=d===D?a.byteLength-b:g(d),b+d>a.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:a}),Object.defineProperty(this,"byteLength",{value:d}),Object.defineProperty(this,"byteOffset",{value:b})}function f(a){return function(c,d){if((c=g(c))+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");c+=this.byteOffset;for(var e=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),f=[],h=0;h<a.BYTES_PER_ELEMENT;h+=1)f.push(b(e,h));return Boolean(d)===Boolean(i)&&f.reverse(),b(new a(new Uint8Array(f).buffer),0)}}function h(a){return function(c,d,e){if((c=g(c))+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var f,h,j=new a([d]),k=new Uint8Array(j.buffer),l=[];for(f=0;f<a.BYTES_PER_ELEMENT;f+=1)l.push(b(k,f));Boolean(e)===Boolean(i)&&l.reverse(),h=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),h.set(l)}}var i=function(){var a=new Uint16Array([4660]);return 18===b(new Uint8Array(a.buffer),0)}();Object.defineProperty(e.prototype,"getUint8",{value:f(Uint8Array)}),Object.defineProperty(e.prototype,"getInt8",{value:f(Int8Array)}),Object.defineProperty(e.prototype,"getUint16",{value:f(Uint16Array)}),Object.defineProperty(e.prototype,"getInt16",{value:f(Int16Array)}),Object.defineProperty(e.prototype,"getUint32",{value:f(Uint32Array)}),Object.defineProperty(e.prototype,"getInt32",{value:f(Int32Array)}),Object.defineProperty(e.prototype,"getFloat32",{value:f(Float32Array)}),Object.defineProperty(e.prototype,"getFloat64",{value:f(Float64Array)}),Object.defineProperty(e.prototype,"setUint8",{value:h(Uint8Array)}),Object.defineProperty(e.prototype,"setInt8",{value:h(Int8Array)}),Object.defineProperty(e.prototype,"setUint16",{value:h(Uint16Array)}),Object.defineProperty(e.prototype,"setInt16",{value:h(Int16Array)}),Object.defineProperty(e.prototype,"setUint32",{value:h(Uint32Array)}),Object.defineProperty(e.prototype,"setInt32",{value:h(Int32Array)}),Object.defineProperty(e.prototype,"setFloat32",{value:h(Float32Array)}),Object.defineProperty(e.prototype,"setFloat64",{value:h(Float64Array)}),a.DataView=a.DataView||e}()}(this),/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer (AB) as its backing buffer and is compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */
function(a){"use strict";(a.com.adtech.dcodeIO=a.com.adtech.dcodeIO||{}).ByteBuffer=function(a){function b(a){var b=0;return function(){return b<a.length?a.charCodeAt(b++):null}}function c(){var a=[],b=[];return function(){if(0===arguments.length)return b.join("")+g.apply(String,a);a.length+arguments.length>1024&&(b.push(g.apply(String,a)),a.length=0),Array.prototype.push.apply(a,arguments)}}var d=function(a,b,c){if(void 0===a&&(a=d.DEFAULT_CAPACITY),void 0===b&&(b=d.DEFAULT_ENDIAN),void 0===c&&(c=d.DEFAULT_NOASSERT),!c){if((a|=0)<0)throw RangeError("Illegal capacity");b=!!b,c=!!c}this.buffer=0===a?f:new ArrayBuffer(a),this.view=0===a?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=a,this.littleEndian=void 0!==b&&!!b,this.noAssert=!!c};d.VERSION="3.5.4",d.LITTLE_ENDIAN=!0,d.BIG_ENDIAN=!1,d.DEFAULT_CAPACITY=16,d.DEFAULT_ENDIAN=d.BIG_ENDIAN,d.DEFAULT_NOASSERT=!1,d.Long=a||null;var e=d.prototype,f=new ArrayBuffer(0),g=String.fromCharCode;d.allocate=function(a,b,c){return new d(a,b,c)},d.isByteBuffer=function(a){return!0===(a&&a instanceof d)},d.type=function(){return ArrayBuffer},e.writeInt8=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view.setInt8(b,a),c&&(this.offset+=1),this},e.writeByte=e.writeInt8,e.writeUint8=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=1,this.view.setUint8(b,a),c&&(this.offset+=1),this},e.readUint8=function(a){var b=void 0===a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal offset: "+a+" (not an integer)");if((a>>>=0)<0||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.view.getUint8(a);return b&&(this.offset+=1),c},e.writeInt16=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.view.setInt16(b,a,this.littleEndian),c&&(this.offset+=2),this},e.writeShort=e.writeInt16,e.writeUint16=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=2,this.view.setUint16(b,a,this.littleEndian),c&&(this.offset+=2),this},e.writeInt32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.view.setInt32(b,a,this.littleEndian),c&&(this.offset+=4),this},e.writeInt=e.writeInt32,e.writeUint32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.view.setUint32(b,a,this.littleEndian),c&&(this.offset+=4),this},e.writeFloat32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=4,this.view.setFloat32(b,a,this.littleEndian),c&&(this.offset+=4),this},e.writeFloat=e.writeFloat32,e.writeFloat64=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=8;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),b-=8,this.view.setFloat64(b,a,this.littleEndian),c&&(this.offset+=8),this},e.writeDouble=e.writeFloat64,d.MAX_VARINT32_BYTES=5,d.calculateVarint32=function(a){return a>>>=0,a<128?1:a<16384?2:a<1<<21?3:a<1<<28?4:5},d.zigZagEncode32=function(a){return((a|=0)<<1^a>>31)>>>0},e.writeVarint32=function(a,b){var c=void 0===b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal offset: "+b+" (not an integer)");if((b>>>=0)<0||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var e,f=d.calculateVarint32(a);b+=f;var g=this.buffer.byteLength;return b>g&&this.resize((g*=2)>b?g:b),b-=f,this.view.setUint8(b,e=128|a),a>>>=0,a>=128?(e=a>>7|128,this.view.setUint8(b+1,e),a>=16384?(e=a>>14|128,this.view.setUint8(b+2,e),a>=1<<21?(e=a>>21|128,this.view.setUint8(b+3,e),a>=1<<28?(this.view.setUint8(b+4,a>>28&15),f=5):(this.view.setUint8(b+3,127&e),f=4)):(this.view.setUint8(b+2,127&e),f=3)):(this.view.setUint8(b+1,127&e),f=2)):(this.view.setUint8(b,127&e),f=1),c?(this.offset+=f,this):f},e.writeVarint32ZigZag=function(a,b){return this.writeVarint32(d.zigZagEncode32(a),b)},e.writeCString=function(a,c){var d=void 0===c;d&&(c=this.offset);var e,f=a.length;if(!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");for(e=0;e<f;++e)if(0===a.charCodeAt(e))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var g=c;f=i.calculateUTF16asUTF8(b(a))[1],c+=f+1;var h=this.buffer.byteLength;return c>h&&this.resize((h*=2)>c?h:c),c-=f+1,i.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),this.view.setUint8(c++,0),d?(this.offset=c-g,this):f},e.writeIString=function(a,c){var d=void 0===c;if(d&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=i.calculateUTF16asUTF8(b(a),this.noAssert)[1],c+=4+e;var g=this.buffer.byteLength;if(c>g&&this.resize((g*=2)>c?g:c),c-=4+e,this.view.setUint32(c,e,this.littleEndian),c+=4,i.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),c!==f+4+e)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+4+e));return d?(this.offset=c,this):c-f},d.METRICS_CHARS="c",d.METRICS_BYTES="b",e.writeUTF8String=function(a,c){var d=void 0===c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e,f=c;e=i.calculateUTF16asUTF8(b(a))[1],c+=e;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=e,i.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),d?(this.offset=c,this):c-f},e.writeString=e.writeUTF8String,d.calculateUTF8Chars=function(a){return i.calculateUTF16asUTF8(b(a))[0]},d.calculateUTF8Bytes=function(a){return i.calculateUTF16asUTF8(b(a))[1]},e.writeVString=function(a,c){var e=void 0===c;if(e&&(c=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var f,g,h=c;f=i.calculateUTF16asUTF8(b(a),this.noAssert)[1],g=d.calculateVarint32(f),c+=g+f;var j=this.buffer.byteLength;if(c>j&&this.resize((j*=2)>c?j:c),c-=g+f,c+=this.writeVarint32(f,c),i.encodeUTF16toUTF8(b(a),function(a){this.view.setUint8(c++,a)}.bind(this)),c!==h+f+g)throw RangeError("Illegal range: Truncated data, "+c+" == "+(c+f+g));return e?(this.offset=c,this):c-h},e.append=function(a,b,c){"number"!=typeof b&&"string"==typeof b||(c=b,b=undefined);var e=void 0===c;if(e&&(c=this.offset),!this.noAssert){if("number"!=typeof c||c%1!=0)throw TypeError("Illegal offset: "+c+" (not an integer)");if((c>>>=0)<0||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}a instanceof d||(a=d.wrap(a,b));var f=a.limit-a.offset;if(f<=0)return this;c+=f;var g=this.buffer.byteLength;return c>g&&this.resize((g*=2)>c?g:c),c-=f,new Uint8Array(this.buffer,c).set(new Uint8Array(a.buffer).subarray(a.offset,a.limit)),a.offset+=f,e&&(this.offset+=f),this},e.assert=function(a){return this.noAssert=!a,this},e.capacity=function(){return this.buffer.byteLength},e.flip=function(){return this.limit=this.offset,this.offset=0,this},e.order=function(a){if(!this.noAssert&&"boolean"!=typeof a)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!a,this},e.LE=function(a){return this.littleEndian=void 0===a||!!a,this},e.resize=function(a){if(!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal capacity: "+a+" (not an integer)");if((a|=0)<0)throw RangeError("Illegal capacity: 0 <= "+a)}if(this.buffer.byteLength<a){var b=new ArrayBuffer(a);new Uint8Array(b).set(new Uint8Array(this.buffer)),this.buffer=b,this.view=new DataView(b)}return this};var h=function(){for(var a={},b=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],c=[],d=0,e=b.length;d<e;++d)c[b[d]]=d;return a.encode=function(a,c){for(var d,e;null!==(d=a());)c(b[d>>2&63]),e=(3&d)<<4,null!==(d=a())?(e|=d>>4&15,c(b[63&(e|d>>4&15)]),e=(15&d)<<2,null!==(d=a())?(c(b[63&(e|d>>6&3)]),c(b[63&d])):(c(b[63&e]),c(61))):(c(b[63&e]),c(61),c(61))},a}();e.toBase64=function(a,b){if(void 0===a&&(a=this.offset),void 0===b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||a%1!=0)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||b%1!=0)throw TypeError("Illegal end: Not an integer");if(b>>>=0,a<0||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var d;return h.encode(function(){return a<b?this.view.getUint8(a++):null}.bind(this),d=c()),d()};var i=function(){var a={};return a.MAX_CODEPOINT=1114111,a.encodeUTF8=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)c<128?b(127&c):c<2048?(b(c>>6&31|192),b(63&c|128)):c<65536?(b(c>>12&15|224),b(c>>6&63|128),b(63&c|128)):(b(c>>18&7|240),b(c>>12&63|128),b(c>>6&63|128),b(63&c|128)),c=null},a.UTF16toUTF8=function(a,b){for(var c,d=null;;){if(null===(c=null!==d?d:a()))break;c>=55296&&c<=57343&&null!==(d=a())&&d>=56320&&d<=57343?(b(1024*(c-55296)+d-56320+65536),d=null):b(c)}null!==d&&b(d)},a.encodeUTF16toUTF8=function(b,c){a.UTF16toUTF8(b,function(b){a.encodeUTF8(b,c)})},a.decodeUTF8toUTF16=function(b,c){a.decodeUTF8(b,function(b){a.UTF8toUTF16(b,c)})},a.calculateCodePoint=function(a){return a<128?1:a<2048?2:a<65536?3:4},a.calculateUTF8=function(b){for(var c,d=0;null!==(c=b());)d+=a.calculateCodePoint(c);return d},a.calculateUTF16asUTF8=function(b){var c=0,d=0;return a.UTF16toUTF8(b,function(b){++c,d+=a.calculateCodePoint(b)}),[c,d]},a}();return d}(a.com.adtech.dcodeIO.Long)}(this),/**
 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ProtoBuf.js for details
 */
function(a){"use strict";(a.com.adtech.dcodeIO=a.com.adtech.dcodeIO||{}).ProtoBuf=function(a){var b={};return b.VERSION="4.0.0-pre",b.WIRE_TYPES={},b.WIRE_TYPES.VARINT=0,b.WIRE_TYPES.BITS64=1,b.WIRE_TYPES.LDELIM=2,b.WIRE_TYPES.STARTGROUP=3,b.WIRE_TYPES.ENDGROUP=4,b.WIRE_TYPES.BITS32=5,b.PACKABLE_WIRE_TYPES=[b.WIRE_TYPES.VARINT,b.WIRE_TYPES.BITS64,b.WIRE_TYPES.BITS32],b.TYPES={int32:{name:"int32",wireType:b.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:b.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:b.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:b.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:b.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:b.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:b.WIRE_TYPES.VARINT},"double":{name:"double",wireType:b.WIRE_TYPES.BITS64},string:{name:"string",wireType:b.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:b.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:b.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:b.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:b.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:b.WIRE_TYPES.BITS64},"float":{name:"float",wireType:b.WIRE_TYPES.BITS32},"enum":{name:"enum",wireType:b.WIRE_TYPES.VARINT},message:{name:"message",wireType:b.WIRE_TYPES.LDELIM},group:{name:"group",wireType:b.WIRE_TYPES.STARTGROUP}},b.ID_MIN=1,b.ID_MAX=536870911,b.ByteBuffer=a,b.Long=a.Long||null,b.populateAccessors=!0,b.Util=function(){Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");return b.prototype=a,new b});var a={};return a.IS_NODE=!1,a.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},a}(),b.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',STRINGOPEN_SQ:"'",STRINGCLOSE_SQ:"'",COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],'"\(\)]/g,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},b.Reflect=function(b){function c(a,c){if(a&&"number"==typeof a.low&&"number"==typeof a.high&&"boolean"==typeof a.unsigned&&a.low===a.low&&a.high===a.high)return new b.Long(a.low,a.high,void 0===c?a.unsigned:c);if("string"==typeof a)return b.Long.fromString(a,c||!1,10);if("number"==typeof a)return b.Long.fromNumber(a,c||!1);throw Error("not convertible to Long")}var d={},e=function(a,b,c){this.builder=a,this.parent=b,this.name=c,this.className},f=e.prototype;f.fqn=function(){for(var a=this.name,b=this;;){if(null==(b=b.parent))break;a=b.name+"."+a}return a},f.toString=function(a){return(a?this.className+" ":"")+this.fqn()},f.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},d.T=e;var g=function(a,b,c,d){e.call(this,a,b,c),this.className="Namespace",this.children=[],this.options=d||{}},h=g.prototype=Object.create(e.prototype);h.getChildren=function(a){if(null==(a=a||null))return this.children.slice();for(var b=[],c=0,d=this.children.length;c<d;++c)this.children[c]instanceof a&&b.push(this.children[c]);return b},h.addChild=function(a){var b;if(b=this.getChild(a.name))if(b instanceof i.Field&&b.name!==b.originalName&&null===this.getChild(b.originalName))b.name=b.originalName;else{if(!(a instanceof i.Field&&a.name!==a.originalName&&null===this.getChild(a.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+a.name);a.name=a.originalName}this.children.push(a)},h.getChild=function(a){for(var b="number"==typeof a?"id":"name",c=0,d=this.children.length;c<d;++c)if(this.children[c][b]===a)return this.children[c];return null},h.resolve=function(a,b){var c="string"==typeof a?a.split("."):a,e=this,f=0;if(""===c[f]){for(;null!==e.parent;)e=e.parent;f++}var g;do{do{if(!(g=e.getChild(c[f]))||!(g instanceof d.T)||b&&g instanceof d.Message.Field){e=null;break}e=g,f++}while(f<c.length);if(null!=e)break;if(null!==this.parent)return this.parent.resolve(a,b)}while(null!=e);return e},h.qn=function(a){var b=[],c=a;do{b.unshift(c.name),c=c.parent}while(null!==c);for(var d=1;d<=b.length;d++){var e=b.slice(b.length-d);if(a===this.resolve(e))return e.join(".")}return a.fqn()},h.build=function(){for(var a,b={},c=this.children,d=0,e=c.length;d<e;++d)(a=c[d])instanceof g&&(b[a.name]=a.build());return Object.defineProperty&&Object.defineProperty(b,"$options",{value:this.buildOpt()}),b},h.buildOpt=function(){for(var a={},b=Object.keys(this.options),c=0,d=b.length;c<d;++c){var e=b[c],f=this.options[b[c]];a[e]=f}return a},h.getOption=function(a){return void 0===a?this.options:"undefined"!=typeof this.options[a]?this.options[a]:null},d.Namespace=g;var i=function(a,c,d,e,f){g.call(this,a,c,d,e),this.className="Message",this.extensions=[b.ID_MIN,b.ID_MAX],this.clazz=null,this.isGroup=!!f,this._fields=null,this._fieldsById=null,this._fieldsByName=null},j=i.prototype=Object.create(g.prototype);j.build=function(c){if(this.clazz&&!c)return this.clazz;var d=function(b,c){var d=c.getChildren(b.Reflect.Message.Field),e=c.getChildren(b.Reflect.Message.OneOf),f=function(c,f){b.Builder.Message.call(this);for(var g=0,h=e.length;g<h;++g)this[e[g].name]=null;for(g=0,h=d.length;g<h;++g){var i=d[g];this[i.name]=i.repeated?[]:null,i.required&&null!==i.defaultValue&&(this[i.name]=i.defaultValue)}if(arguments.length>0){var j;if(1!==arguments.length||"object"!=typeof c||"function"==typeof c.encode||b.Util.isArray(c)||c instanceof a||c instanceof ArrayBuffer||b.Long&&c instanceof b.Long)for(g=0,h=arguments.length;g<h;++g)void 0!==(j=arguments[g])&&this.$set(d[g].name,j);else this.$set(c)}},g=f.prototype=Object.create(b.Builder.Message.prototype);g.add=function(a,d,e){var f=c._fieldsByName[a];if(!e){if(!f)throw Error(this+"#"+a+" is undefined");if(!(f instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+f.toString(!0));if(!f.repeated)throw Error(this+"#"+a+" is not a repeated field")}null===this[f.name]&&(this[f.name]=[]),this[f.name].push(e?d:f.verifyValue(d,!0))},g.$add=g.add,g.set=function(a,d,e){if(a&&"object"==typeof a){e=d;for(var f in a)a.hasOwnProperty(f)&&void 0!==(d=a[f])&&this.$set(f,d,e);return this}var g=c._fieldsByName[a];if(e)this[g.name]=d;else{if(!g)throw Error(this+"#"+a+" is not a field: undefined");if(!(g instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+g.toString(!0));this[g.name]=d=g.verifyValue(d)}return g.oneof&&(null!==d?(null!==this[g.oneof.name]&&(this[this[g.oneof.name]]=null),this[g.oneof.name]=g.name):g.oneof.name===a&&(this[g.oneof.name]=null)),this},g.$set=g.set;for(var h=0;h<d.length;h++){var i=d[h];i instanceof b.Reflect.Message.ExtensionField||c.builder.options.populateAccessors&&function(a){var b=a.originalName.replace(/(_[a-zA-Z])/g,function(a){return a.toUpperCase().replace("_","")});b=b.substring(0,1).toUpperCase()+b.substring(1);var d=a.originalName.replace(/([A-Z])/g,function(a){return"_"+a}),e=function(b,c){return this[a.name]=c?b:a.verifyValue(b),this},f=function(){return this[a.name]};null===c.getChild("set"+b)&&(g["set"+b]=e),null===c.getChild("set_"+d)&&(g["set_"+d]=e),null===c.getChild("get"+b)&&(g["get"+b]=f),null===c.getChild("get_"+d)&&(g["get_"+d]=f)}(i)}g.encode=function(b,d){"boolean"==typeof b&&(d=b,b=undefined);var e=!1;b||(b=new a,e=!0);var f=b.littleEndian;try{return c.encode(this,b.LE(),d),(e?b.flip():b).LE(f)}catch(g){throw b.LE(f),g}},g.toArrayBuffer=g.encodeAB,g.encode64=function(){try{return this.encode().toBase64()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBase64()),a}},g.toBase64=g.encode64,g.toString=function(){return c.toString()};return Object.defineProperty&&(Object.defineProperty(f,"$options",{value:c.buildOpt()}),Object.defineProperty(g,"$options",{value:f.$options}),Object.defineProperty(f,"$type",{value:c}),Object.defineProperty(g,"$type",{value:c})),f}(b,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var e,f=0,g=this.children.length;f<g;f++)if((e=this.children[f])instanceof o)d[e.name]=e.build();else if(e instanceof i)d[e.name]=e.build();else if(e instanceof i.Field)e.build(),this._fields.push(e),this._fieldsById[e.id]=e,this._fieldsByName[e.name]=e;else if(!(e instanceof i.OneOf||e instanceof q))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[f].toString(!0));return this.clazz=d},j.encode=function(a,b,c){for(var d,e,f=null,g=0,h=this._fields.length;g<h;++g)d=this._fields[g],e=a[d.name],d.required&&null===e?null===f&&(f=d):d.encode(c?e:d.verifyValue(e),b);if(null!==f){var i=Error("Missing at least one required field for "+this.toString(!0)+": "+f);throw i.encoded=b,i}return b},d.Message=i;var k=function(a,b,c,d,f,g,h,i){e.call(this,a,b,f),this.className="Message.Field",this.required="required"===c,this.repeated="repeated"===c,this.type=d,this.resolvedType=null,this.id=g,this.options=h||{},this.defaultValue=null,this.oneof=i||null,this.originalName=this.name},l=k.prototype=Object.create(e.prototype);l.build=function(){this.defaultValue="undefined"!=typeof this.options["default"]?this.verifyValue(this.options["default"]):null},l.verifyValue=function(d,e){e=e||!1;var f=function(a,b){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+a+" ("+b+")")}.bind(this);if(null===d)return this.required&&f(typeof d,"required"),null;var g;if(this.repeated&&!e){b.Util.isArray(d)||(d=[d]);var h=[];for(g=0;g<d.length;g++)h.push(this.verifyValue(d[g],!0));return h}switch(!this.repeated&&b.Util.isArray(d)&&f(typeof d,"no array expected"),this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:return("number"!=typeof d||d===d&&d%1!=0)&&f(typeof d,"not an integer"),d>4294967295?0|d:d;case b.TYPES.uint32:case b.TYPES.fixed32:return("number"!=typeof d||d===d&&d%1!=0)&&f(typeof d,"not an integer"),d<0?d>>>0:d;case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:if(b.Long)try{return c(d,!1)}catch(k){f(typeof d,k.message)}else f(typeof d,"requires Long.js");case b.TYPES.uint64:case b.TYPES.fixed64:if(b.Long)try{return c(d,!0)}catch(k){f(typeof d,k.message)}else f(typeof d,"requires Long.js");case b.TYPES.bool:return"boolean"!=typeof d&&f(typeof d,"not a boolean"),d;case b.TYPES["float"]:case b.TYPES["double"]:return"number"!=typeof d&&f(typeof d,"not a number"),d;case b.TYPES.string:return"string"==typeof d||d&&d instanceof String||f(typeof d,"not a string"),""+d;case b.TYPES.bytes:return a.isByteBuffer(d)?d:a.wrap(d,"base64");case b.TYPES["enum"]:var i=this.resolvedType.getChildren(o.Value);for(g=0;g<i.length;g++){if(i[g].name==d)return i[g].id;if(i[g].id==d)return i[g].id}f(d,"not a valid enum value");case b.TYPES.group:case b.TYPES.message:if(d&&"object"==typeof d||f(typeof d,"object expected"),d instanceof this.resolvedType.clazz)return d;if(d instanceof b.Builder.Message){var j={};for(var g in d)d.hasOwnProperty(g)&&(j[g]=d[g]);d=j}return new this.resolvedType.clazz(d)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+d+" (undefined type "+this.type+")")},l.encode=function(c,d){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return d;try{if(this.repeated){var e;if(this.options.packed&&b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){d.writeVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),d.ensureCapacity(d.offset+=1);var f=d.offset;for(e=0;e<c.length;e++)this.encodeValue(c[e],d);var g=d.offset-f,h=a.calculateVarint32(g);if(h>1){var i=d.slice(f,d.offset);f+=h-1,d.offset=f,d.append(i)}d.writeVarint32(g,f-h)}else for(e=0;e<c.length;e++)d.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(c[e],d)}else d.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(c,d)}catch(j){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+j+")")}return d},l.encodeValue=function(c,d){if(null===c)return d;switch(this.type){case b.TYPES.int32:c<0?d.writeVarint64(c):d.writeVarint32(c);break;case b.TYPES.uint32:d.writeVarint32(c);break;case b.TYPES.sint32:d.writeVarint32ZigZag(c);break;case b.TYPES.fixed32:d.writeUint32(c);break;case b.TYPES.sfixed32:d.writeInt32(c);break;case b.TYPES.int64:case b.TYPES.uint64:d.writeVarint64(c);break;case b.TYPES.sint64:d.writeVarint64ZigZag(c);break;case b.TYPES.fixed64:d.writeUint64(c);break;case b.TYPES.sfixed64:d.writeInt64(c);break;case b.TYPES.bool:"string"==typeof c?d.writeVarint32("false"===c.toLowerCase()?0:!!c):d.writeVarint32(c?1:0);break;case b.TYPES["enum"]:d.writeVarint32(c);break;case b.TYPES["float"]:d.writeFloat32(c);break;case b.TYPES["double"]:d.writeFloat64(c);break;case b.TYPES.string:d.writeVString(c);break;case b.TYPES.bytes:if(c.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+c.remaining()+" bytes remaining");var e=c.offset;d.writeVarint32(c.remaining()),d.append(c),c.offset=e;break;case b.TYPES.message:var f=(new a).LE();this.resolvedType.encode(c,f),d.writeVarint32(f.offset),d.append(f.flip());break;case b.TYPES.group:this.resolvedType.encode(c,d),d.writeVarint32(this.id<<3|b.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+c+" (unknown type)")}return d},l.calculateValue=function(c){if(null===c)return 0;var d;switch(this.type){case b.TYPES.int32:return c<0?a.calculateVarint64(c):a.calculateVarint32(c);case b.TYPES.uint32:return a.calculateVarint32(c);case b.TYPES.sint32:return a.calculateVarint32(a.zigZagEncode32(c));case b.TYPES.fixed32:case b.TYPES.sfixed32:case b.TYPES["float"]:return 4;case b.TYPES.int64:case b.TYPES.uint64:return a.calculateVarint64(c);case b.TYPES.sint64:return a.calculateVarint64(a.zigZagEncode64(c));case b.TYPES.fixed64:case b.TYPES.sfixed64:return 8;case b.TYPES.bool:return 1;case b.TYPES["enum"]:return a.calculateVarint32(c);case b.TYPES["double"]:return 8;case b.TYPES.string:return d=a.calculateUTF8Bytes(c),a.calculateVarint32(d)+d;case b.TYPES.bytes:if(c.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+c.remaining()+" bytes remaining");return a.calculateVarint32(c.remaining())+c.remaining();case b.TYPES.message:return d=this.resolvedType.calculate(c),a.calculateVarint32(d)+d;case b.TYPES.group:return(d=this.resolvedType.calculate(c))+a.calculateVarint32(this.id<<3|b.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+c+" (unknown type)")},d.Message.Field=k;var m=function(a,b,c,d,e,f,g){k.call(this,a,b,c,d,e,f,g),this.extension};m.prototype=Object.create(k.prototype),d.Message.ExtensionField=m;var n=function(a,b,c){e.call(this,a,b,c),this.fields=[]};d.Message.OneOf=n;var o=function(a,b,c,d){g.call(this,a,b,c,d),this.className="Enum",this.object=null};(o.prototype=Object.create(g.prototype)).build=function(){for(var a={},b=this.getChildren(o.Value),c=0,d=b.length;c<d;++c)a[b[c].name]=b[c].id;return Object.defineProperty&&Object.defineProperty(a,"$options",{value:this.buildOpt()}),this.object=a},d.Enum=o;var p=function(a,b,c,d){e.call(this,a,b,c),this.className="Enum.Value",this.id=d};p.prototype=Object.create(e.prototype),d.Enum.Value=p;var q=function(a,b,c,d){e.call(this,a,b,c),this.field=d};q.prototype=Object.create(e.prototype),d.Extension=q;var r=function(a,b,c,d){g.call(this,a,b,c,d),this.className="Service",this.clazz=null},s=r.prototype=Object.create(g.prototype);s.buildx=function(a){return this.clazz&&!a?this.clazz:this.clazz=function(a,b){return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:b.buildOpt()}),Object.defineProperty(s,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:b}),Object.defineProperty(s,"$type",{value:b})),r}(0,this)},d.Service=r;var t=function(a,b,c,d){e.call(this,a,b,c),this.className="Service.Method",this.options=d||{}};(t.prototype=Object.create(e.prototype)).buildOpt=h.buildOpt,d.Service.Method=t;var u=function(a,b,c,d,e,f){t.call(this,a,b,c,f),this.className="Service.RPCMethod",this.requestName=d,this.responseName=e,this.resolvedRequestType=null,this.resolvedResponseType=null};return u.prototype=Object.create(t.prototype),d.Service.RPCMethod=u,d}(b),b.Builder=function(a,b,c){var d=function(a){this.ns=new c.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=a||{}},e=d.prototype;return e.reset=function(){this.ptr=this.ns},e.define=function(a){if("string"!=typeof a||!b.TYPEREF.test(a))throw Error("Illegal package: "+a);var d,e,f=a.split(".");for(d=0;d<f.length;d++)if(!b.NAME.test(f[d]))throw Error("Illegal package: "+f[d]);for(d=0;d<f.length;d++)e=this.ptr.getChild(f[d]),null===e&&this.ptr.addChild(e=new c.Namespace(this,this.ptr,f[d])),this.ptr=e;return this},d.isValidMessage=function(c){if("string"!=typeof c.name||!b.NAME.test(c.name))return!1;if("undefined"!=typeof c.values||"undefined"!=typeof c.rpc)return!1;var e;if("undefined"!=typeof c.fields){if(!a.Util.isArray(c.fields))return!1;var f,g=[];for(e=0;e<c.fields.length;e++){if(!d.isValidMessageField(c.fields[e]))return!1;if(f=parseInt(c.fields[e].id,10),g.indexOf(f)>=0)return!1;g.push(f)}g=null}if("undefined"!=typeof c.enums){if(!a.Util.isArray(c.enums))return!1;for(e=0;e<c.enums.length;e++)if(!d.isValidEnum(c.enums[e]))return!1}if("undefined"!=typeof c.messages){if(!a.Util.isArray(c.messages))return!1;for(e=0;e<c.messages.length;e++)if(!d.isValidMessage(c.messages[e])&&!d.isValidExtend(c.messages[e]))return!1}return!!("undefined"==typeof c.extensions||a.Util.isArray(c.extensions)&&2===c.extensions.length&&"number"==typeof c.extensions[0]&&"number"==typeof c.extensions[1])},d.isValidMessageField=function(a){if("string"!=typeof a.rule||"string"!=typeof a.name||"string"!=typeof a.type||"undefined"==typeof a.id)return!1;if(!(b.RULE.test(a.rule)&&b.NAME.test(a.name)&&b.TYPEREF.test(a.type)&&b.ID.test(""+a.id)))return!1;if("undefined"!=typeof a.options){if("object"!=typeof a.options)return!1;for(var c,d=Object.keys(a.options),e=0;e<d.length;e++)if("string"!=typeof(c=d[e])||"string"!=typeof a.options[c]&&"number"!=typeof a.options[c]&&"boolean"!=typeof a.options[c])return!1}return!0},d.isValidEnum=function(c){if("string"!=typeof c.name||!b.NAME.test(c.name))return!1;if("undefined"==typeof c.values||!a.Util.isArray(c.values)||0==c.values.length)return!1;for(var d=0;d<c.values.length;d++){if("object"!=typeof c.values[d])return!1;if("string"!=typeof c.values[d].name||"undefined"==typeof c.values[d].id)return!1;if(!b.NAME.test(c.values[d].name)||!b.NEGID.test(""+c.values[d].id))return!1}return!0},e.create=function(b){if(!b)return this;if(a.Util.isArray(b)||(b=[b]),0===b.length)return this;var e=[];for(e.push(b);e.length>0;){if(b=e.pop(),!a.Util.isArray(b))throw Error("Not a valid namespace: "+JSON.stringify(b));for(;b.length>0;){var f=b.shift();if(d.isValidMessage(f)){var g=new c.Message(this,this.ptr,f.name,f.options,f.isGroup),h={};if(f.oneofs)for(var i=Object.keys(f.oneofs),j=0,k=i.length;j<k;++j)g.addChild(h[i[j]]=new c.Message.OneOf(this,g,i[j]));if(f.fields&&f.fields.length>0)for(j=0,k=f.fields.length;j<k;++j){var l=f.fields[j];if(null!==g.getChild(l.id))throw Error("Duplicate field id in message "+g.name+": "+l.id);if(l.options)for(var m=Object.keys(l.options),n=0,o=m.length;n<o;++n){if("string"!=typeof m[n])throw Error("Illegal field option name in message "+g.name+"#"+l.name+": "+m[n]);if("string"!=typeof l.options[m[n]]&&"number"!=typeof l.options[m[n]]&&"boolean"!=typeof l.options[m[n]])throw Error("Illegal field option value in message "+g.name+"#"+l.name+"#"+m[n]+": "+l.options[m[n]])}var p=null;if("string"==typeof l.oneof&&void 0===(p=h[l.oneof]))throw Error("Illegal oneof in message "+g.name+"#"+l.name+": "+l.oneof);l=new c.Message.Field(this,g,l.rule,l.type,l.name,l.id,l.options,p),p&&p.fields.push(l),g.addChild(l)}var q=[];if("undefined"!=typeof f.enums&&f.enums.length>0)for(j=0;j<f.enums.length;j++)q.push(f.enums[j]);if(f.messages&&f.messages.length>0)for(j=0;j<f.messages.length;j++)q.push(f.messages[j]);if(f.extensions&&(g.extensions=f.extensions,g.extensions[0]<a.ID_MIN&&(g.extensions[0]=a.ID_MIN),g.extensions[1]>a.ID_MAX&&(g.extensions[1]=a.ID_MAX)),this.ptr.addChild(g),q.length>0){e.push(b),b=q,q=null,this.ptr=g,g=null;continue}q=null,g=null}else if(d.isValidEnum(f)){for(g=new c.Enum(this,this.ptr,f.name,f.options),j=0;j<f.values.length;j++)g.addChild(new c.Enum.Value(this,g,f.values[j].name,f.values[j].id));this.ptr.addChild(g),g=null}else if(d.isValidService(f)){g=new c.Service(this,this.ptr,f.name,f.options);for(j in f.rpc)f.rpc.hasOwnProperty(j)&&g.addChild(new c.Service.RPCMethod(this,g,j,f.rpc[j].request,f.rpc[j].response,f.rpc[j].options));this.ptr.addChild(g),g=null}else{if(!d.isValidExtend(f))throw Error("Not a valid definition: "+JSON.stringify(f));if(g=this.ptr.resolve(f.ref))for(j=0;j<f.fields.length;j++){if(null!==g.getChild(f.fields[j].id))throw Error("Duplicate extended field id in message "+g.name+": "+f.fields[j].id);if(f.fields[j].id<g.extensions[0]||f.fields[j].id>g.extensions[1])throw Error("Illegal extended field id in message "+g.name+": "+f.fields[j].id+" ("+g.extensions.join(" to ")+" expected)");var r=f.fields[j].name;l=new c.Message.ExtensionField(this,g,f.fields[j].rule,f.fields[j].type,this.ptr.fqn()+"."+r,f.fields[j].id,f.fields[j].options);var s=new c.Extension(this,this.ptr,f.fields[j].name,l);l.extension=s,this.ptr.addChild(s),g.addChild(l)}else if(!/\.?google\.protobuf\./.test(f.ref))throw Error("Extended message "+f.ref+" is not defined")}f=null}b=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},e["import"]=function(b,c){if("string"==typeof c){if(a.Util.IS_NODE&&(c=require("path").resolve(c)),!0===this.files[c])return this.reset(),this;this.files[c]=!0}if(b.imports&&b.imports.length>0){var d,e="/",f=!1;"object"==typeof c?(this.importRoot=c.root,f=!0,d=this.importRoot,c=c.file,(d.indexOf("\\")>=0||c.indexOf("\\")>=0)&&(e="\\")):"string"==typeof c?this.importRoot?d=this.importRoot:c.indexOf("/")>=0?""===(d=c.replace(/\/[^\/]*$/,""))&&(d="/"):c.indexOf("\\")>=0?(d=c.replace(/\\[^\\]*$/,""),e="\\"):d=".":d=null;for(var g=0;g<b.imports.length;g++)if("string"==typeof b.imports[g]){if(!d)throw Error("Cannot determine import root: File name is unknown");var h=b.imports[g];if(/^google\/protobuf\//.test(h))continue;if(h=d+e+h,!0===this.files[h])continue;/\.proto$/i.test(h)&&!a.DotProto&&(h=h.replace(/\.proto$/,".json"));var i=a.Util.fetch(h);if(null===i)throw Error("Failed to import '"+h+"' in '"+c+"': File not found");/\.json$/i.test(h)?this["import"](JSON.parse(i+""),h):this["import"](new a.DotProto.Parser(i+"").parse(),h)}else c?/\.(\w+)$/.test(c)?this["import"](b.imports[g],c.replace(/^(.+)\.(\w+)$/,function(a,b,c){return b+"_import"+g+"."+c})):this["import"](b.imports[g],c+"_import"+g):this["import"](b.imports[g]);f&&(this.importRoot=null)}b["package"]&&this.define(b["package"]);var j=this.ptr;return b.options&&Object.keys(b.options).forEach(function(a){j.options[a]=b.options[a]}),b.messages&&(this.create(b.messages),this.ptr=j),b.enums&&(this.create(b.enums),this.ptr=j),b.services&&(this.create(b.services),this.ptr=j),b["extends"]&&this.create(b["extends"]),this.reset(),this},d.isValidService=function(a){return!("string"!=typeof a.name||!b.NAME.test(a.name)||"object"!=typeof a.rpc)},d.isValidExtend=function(c){if("string"!=typeof c.ref||!b.TYPEREF.test(c.ref))return!1;var e;if("undefined"!=typeof c.fields){if(!a.Util.isArray(c.fields))return!1;var f,g=[];for(e=0;e<c.fields.length;e++){if(!d.isValidMessageField(c.fields[e]))return!1;if(f=parseInt(c.id,10),g.indexOf(f)>=0)return!1;g.push(f)}g=null}return!0},e.resolveAll=function(){var d;if(null!=this.ptr&&"object"!=typeof this.ptr.type){if(this.ptr instanceof c.Namespace)for(var e=this.ptr.children,f=0,g=e.length;f<g;++f)this.ptr=e[f],this.resolveAll();else if(this.ptr instanceof c.Message.Field)if(b.TYPE.test(this.ptr.type))this.ptr.type=a.TYPES[this.ptr.type];else{if(!b.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(d=(this.ptr instanceof c.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=d,d instanceof c.Enum)this.ptr.type=a.TYPES["enum"];else{if(!(d instanceof c.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=d.isGroup?a.TYPES.group:a.TYPES.message}}else if(this.ptr instanceof a.Reflect.Enum.Value);else if(this.ptr instanceof a.Reflect.Service.Method){if(!(this.ptr instanceof a.Reflect.Service.RPCMethod))throw Error("Illegal service type in "+this.ptr.toString(!0));if(!((d=this.ptr.parent.resolve(this.ptr.requestName))&&d instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=d,!((d=this.ptr.parent.resolve(this.ptr.responseName))&&d instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=d}else if(!(this.ptr instanceof a.Reflect.Message.OneOf||this.ptr instanceof a.Reflect.Extension))throw Error("Illegal object in namespace: "+typeof this.ptr+":"+this.ptr);this.reset()}},e.build=function(a){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),a){for(var b="string"==typeof a?a.split("."):a,c=this.result,d=0;d<b.length;d++){if(!c[b[d]]){c=null;break}c=c[b[d]]}return c}return this.result},e.lookup=function(a){return a?this.ns.resolve(a):this.ns},e.toString=function(){return"Builder"},d.Message=function(){},d.Service=function(){},d}(b,b.Lang,b.Reflect),b.newBuilder=function(a){return a=a||{},"undefined"==typeof a.populateAccessors&&(a.populateAccessors=b.populateAccessors),new b.Builder(a)},b.loadJson=function(a,c,d){return("string"==typeof c||c&&"string"==typeof c.file&&"string"==typeof c.root)&&(d=c,c=null),c&&"object"==typeof c||(c=b.newBuilder()),"string"==typeof a?a=JSON.parse(a):a||(a={}),c["import"](a,d),c.resolveAll(),c},b}(a.com.adtech.dcodeIO.ByteBuffer)}(this),com.adtech.IframeUtils_2_67_0=function(){},com.adtech.IframeUtils_2_67_0.IFRAME_AD_CONFIG_FILE="iframeadconfig.js",com.adtech.IframeUtils_2_67_0.DELIM="|ifv|",com.adtech.IframeUtils_2_67_0.ARRAY_DELIM="|ae|",com.adtech.IframeUtils_2_67_0.ADTIME_MACRO="_ADTIME_",com.adtech.IframeUtils_2_67_0.adServerVars={},com.adtech.IframeUtils_2_67_0.pubVars={},com.adtech.IframeUtils_2_67_0.geoData={},com.adtech.IframeUtils_2_67_0.tagVars={},com.adtech.IframeUtils_2_67_0.gdpr={},com.adtech.IframeUtils_2_67_0.rmLibUrl="",com.adtech.IframeUtils_2_67_0.clickRedirect="",com.adtech.IframeUtils_2_67_0.displayWindowTarget=null,com.adtech.IframeUtils_2_67_0.postAdConfigProcessedCallback=null,com.adtech.IframeUtils_2_67_0.isInIframe=function(){return("undefined"==typeof adtechCanvasAdPreview||!adtechCanvasAdPreview)&&window!=top},com.adtech.IframeUtils_2_67_0.isInFriendlyIframe=function(a){var b=!1;try{this.determineDisplayWindowTarget(a).document&&(b=!0)}catch(c){}return b},com.adtech.IframeUtils_2_67_0.isBreakoutAdType=function(a){for(var b in a.assetContainers)if(a.assetContainers.hasOwnProperty(b)){var c=a.assetContainers[b];switch(c.type){case com.adtech.AssetContainerFactory_2_67_0.NO_CONTENT:case com.adtech.AssetContainerFactory_2_67_0.FLOATING_DIV:return!0;case com.adtech.AssetContainerFactory_2_67_0.INLINE_DIV:if(c.isExpandable)return!0}}return!1},com.adtech.IframeUtils_2_67_0.getTargetParentIframeEle=function(a){var b=a.document.getElementsByTagName("iframe");for(i=0;i<b.length;i++){var c=b[i];if(a==parent&&c.contentWindow==window||a==parent.parent&&c.contentWindow==window.parent||a==parent.parent.parent&&c.contentWindow==window.parent.parent)return c}},com.adtech.IframeUtils_2_67_0.registerAdOnTargetParent=function(a,b){this.displayWindowTarget=a;var c=this.getTargetParentIframeEle(a);if("undefined"!=typeof a.adtechAdCallbacks&&a.adtechAdCallbacks[this.ADTIME_MACRO]&&com.adtech.Utils_2_67_0.isArray(a.adtechAdCallbacks[this.ADTIME_MACRO])&&(a.adtechAdCallbacks[b.adServerVars.uid]=a.adtechAdCallbacks[this.ADTIME_MACRO].slice(),delete a.adtechAdCallbacks[this.ADTIME_MACRO]),a.adtechAdCallback&&a.adtechAdCallback[this.ADTIME_MACRO]&&(a.adtechAdCallback[b.adServerVars.uid]=a.adtechAdCallback[this.ADTIME_MACRO],delete a.adtechAdCallback[this.ADTIME_MACRO]),"undefined"==typeof a.adtechAdManager_2_67_0){if(a.adtechAdQueue=a.adtechAdQueue||[],a.adtechAdTargetIframeQueue=a.adtechAdTargetIframeQueue||{},a.adtechAdQueue.push(b),a.adtechAdTargetIframeQueue[b.adServerVars.uid]=c,"undefined"==typeof a.adtechAdManagerReqs||!a.adtechAdManagerReqs["2_67_0"]){a.adtechAdManagerReqs=a.adtechAdManagerReqs||{},a.adtechAdManagerReqs["2_67_0"]=!0;var d=a.document.createElement("script");d.src=b.rmLibUrl,c.parentNode.insertBefore(d,c)}}else a.adtechAdManager_2_67_0.registerAd(b,c,!1)},com.adtech.IframeUtils_2_67_0.determineDisplayWindowTarget=function(a){var b=com.adtech.Utils_2_67_0.getConfigOverride(a,"displayWindowTarget");if(null!=b)return"undefined"!=typeof adtechIframeHashArray&&window!=top&&(b=b==top?top:b.parent),b;for(var c=top,d=null,e=parent,f=0;null!=e&&f<6;){try{e.document&&(d=e)}catch(g){}e=e==top?null:e.parent,f++}return d||c},com.adtech.IframeUtils_2_67_0.topOrSelf=function(){var a=!1;try{top.document&&(a=!0)}catch(b){}return a?top:window},com.adtech.IframeUtils_2_67_0.getDisplayWindowTarget=function(){return this.displayWindowTarget?this.displayWindowTarget:this.topOrSelf()},com.adtech.IframeUtils_2_67_0.registerCallback=function(a){this.postAdConfigProcessedCallback=a},com.adtech.IframeUtils_2_67_0.processAdConfig=function(a){a.adServerVars=this.adServerVars,a.pubVars=this.pubVars,a.geoData=this.geoData,a.tagVars=this.tagVars,a.regs.gdpr=this.gdpr,a.clickRedirect=this.clickRedirect,a.rmlibUrl=this.rmLibUrl,"function"==typeof adtechConfigureAdFLP?adtechConfigureAdFLP():this.postAdConfigProcessedCallback&&this.postAdConfigProcessedCallback(a.adServerVars.id),this.registerAdOnTargetParent(this.determineDisplayWindowTarget(a),a)},com.adtech.IframeUtils_2_67_0.loadAdJsFile=function(){document.write('<script src="'+this.adServerVars.configBaseURL+this.IFRAME_AD_CONFIG_FILE+'" type="text/javascript"><\/script>')},com.adtech.IframeUtils_2_67_0.setPropertiesOnObject=function(a,b){for(var c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");a[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}},com.adtech.IframeUtils_2_67_0.setIframeObjectsFromHashArray=function(){this.rmLibUrl=adtechIframeHashArray[0],this.setPropertiesOnObject(this.adServerVars,adtechIframeHashArray[1]),this.setPropertiesOnObject(this.pubVars,adtechIframeHashArray[2]),this.setPropertiesOnObject(this.geoData,adtechIframeHashArray[3]),this.clickRedirect=adtechIframeHashArray[4],this.setPropertiesOnObject(this.tagVars,adtechIframeHashArray[5]),this.setPropertiesOnObject(this.gdpr,adtechIframeHashArray[6])},com.adtech.IframeUtils_2_67_0.getStringFromSimpleJsonObject=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=this.applyHashEncoding(c)+"="+this.applyHashEncoding(a[c])+"&");return b.substring(0,b.length-1)},com.adtech.IframeUtils_2_67_0.applyHashEncoding=function(a){
for(var b=com.adtech.Utils_2_67_0.isFirefox()?2:1;b;)a=encodeURIComponent(a),b--;return a},com.adtech.IframeUtils_2_67_0.getTopReferrer=function(){if(window===top)return document.location.href;if("undefined"!=typeof window.location.ancestorOrigins)return window.location.ancestorOrigins[window.location.ancestorOrigins.length-1];var a=document.referrer;if(!a)try{a=parent.location.href}catch(c){}try{var b=parent.document.referrer;b&&(a=b)}catch(c){}return a},com.adtech.IframeUtils_2_67_0.getTopHostname=function(){return this.getTopReferrer().match(/https?:\/\/[^:\/]*/i)},com.adtech.IframeUtils_2_67_0.loadIframeBuster=function(a,b){var c=this.getTopHostname();0!=a.indexOf("/")&&(a="/"+a),a+="#"+b.rmLibUrl+this.DELIM+this.getStringFromSimpleJsonObject(b.adServerVars)+this.DELIM+this.getStringFromSimpleJsonObject(b.pubVars)+this.DELIM+this.getStringFromSimpleJsonObject(b.geoData)+this.DELIM+b.clickRedirect+this.DELIM+this.getStringFromSimpleJsonObject(b.tagVars)+this.DELIM+this.getStringFromSimpleJsonObject(b.regs.gdpr);var d=document.createElement("iframe");d.style.width=d.style.height=0,d.frameborder="0",d.scrolling="no",document.body.insertBefore(d,document.body.firstChild),d.src=c+a},com.adtech.IframeUtils_2_67_0.applyAllowFullScreenAttribute=function(a){a.setAttribute("allowfullscreen","true"),a.setAttribute("allowFullScreen","true"),a.setAttribute("mozallowFullScreen","true"),a.setAttribute("webkitAllowFullScreen","true")},com.adtech.Utils_2_67_0=function(){},com.adtech.Utils_2_67_0.IE_10_TRIDENT_VERSION=6,com.adtech.Utils_2_67_0.JSON_CD_POST_REQUEST_FIELD="event",com.adtech.Utils_2_67_0.isBrowserW3CCompliant=function(){var a=document;return"undefined"!=typeof a.getElementById&&"undefined"!=typeof a.getElementsByTagName&&"undefined"!=typeof a.createElement},com.adtech.Utils_2_67_0.getUserAgent=function(){return navigator.userAgent.toLowerCase()},com.adtech.Utils_2_67_0.getAppVersion=function(){return navigator.appVersion.toLowerCase()},com.adtech.Utils_2_67_0.getAppName=function(){return navigator.appName.toLowerCase()},com.adtech.Utils_2_67_0.isLinux=function(){return this.getAppVersion().indexOf("linux")>-1},com.adtech.Utils_2_67_0.isWin=function(){return this.getAppVersion().indexOf("windows")>-1},com.adtech.Utils_2_67_0.isMac=function(){return this.getAppVersion().indexOf("mac")>-1},com.adtech.Utils_2_67_0.isiOS=function(){return!!this.getUserAgent().match(/(ipad|iphone|ipod)/i)},com.adtech.Utils_2_67_0.getiOSVersion=function(){if(!this.isiOS())return null;var a=navigator.appVersion.match(/os (\d+)_(\d+)_?(\d+)?/i);return a?{major:parseInt(a[1],10),minor:parseInt(a[2],10)}:null},com.adtech.Utils_2_67_0.fileIsImage=function(a){var b=["gif","jpeg","jpg","png"];try{var c=a.split(".")}catch(f){return!1}if(c.length>1)for(var d=c[c.length-1].toLowerCase(),e=0;e<b.length;e++)if(d==b[e])return!0;return!1},com.adtech.Utils_2_67_0.isIE=function(){var a=this.getUserAgent();if("netscape"==this.getAppName()){if(null!=new RegExp("trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(a))return 1}return a.indexOf("msie")>-1},com.adtech.Utils_2_67_0.isFirefox=function(){return this.getUserAgent().indexOf("firefox")>-1},com.adtech.Utils_2_67_0.isWebkit=function(){return this.getUserAgent().indexOf("applewebkit")>-1},com.adtech.Utils_2_67_0.isSafari=function(){return this.getUserAgent().indexOf("safari")>-1&&!this.isChrome()},com.adtech.Utils_2_67_0.isChrome=function(){return"object"==typeof window.chrome},com.adtech.Utils_2_67_0.getIEVersion=function(){if(!this.isIE())return null;var a=this.getUserAgent();if("netscape"==this.getAppName()){if(null!=new RegExp("trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(a))return{major:parseInt(RegExp.$1,10),minor:parseInt(RegExp.$1,10)}}var b=a.match(/msie\s+(\d*\.?\d+)/i);return b?{major:parseInt(b[1],10),minor:parseInt(b[2],10)}:null},com.adtech.Utils_2_67_0.isIEQuirksMode=function(){return this.isIE()&&document.compatMode&&"BackCompat"==document.compatMode},com.adtech.Utils_2_67_0.isPluginEnabled=function(a,b,c){var d=this.getUserAgent();if(/msie\s[^\s]*\smac/.test(d))return!1;var e=this.getIEVersion(),f=e?e.major:0,g=/trident\/(\d*\.?\d+)/.exec(d),h=null!==g&&f>=10?parseInt(g[1]):0;switch(a){case com.adtech.ContentFactory_2_67_0.FLASH:try{return com.adtech.swfobject_2_67_0.hasFlashPlayerVersion(b)}catch(i){return!1}case com.adtech.ContentFactory_2_67_0.HTML:return(!this.isIE()||f&&h>=c)&&"undefined"!=typeof window.postMessage&&this.userAgentSupportsJSON();default:return!0}},com.adtech.Utils_2_67_0.userAgentSupportsJSON=function(){return window.JSON&&JSON.parse&&JSON.stringify},com.adtech.Utils_2_67_0.extend=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.supa=b.prototype,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)},com.adtech.Utils_2_67_0.isArray=function(a){return"array"==Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},com.adtech.Utils_2_67_0.inArray=function(a,b){if(this.isArray(b)){for(var c=0;c<b.length;c++)if(b[c]==a)return!0}else for(var d in b)if(b.hasOwnProperty(d)&&b[d]==a)return!0;return!1},com.adtech.Utils_2_67_0.getMatchingObjectFromArray=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if("undefined"!=typeof e[b]&&e[b]===c)return e}return null},com.adtech.Utils_2_67_0.recursiveSubtitute=function(a,b){for(var c in a)if(a.hasOwnProperty(c))if("object"!=typeof a[c]||com.adtech.Utils_2_67_0.isArray(a[c])){if("string"==typeof a[c])for(var d in b)if(b.hasOwnProperty(d)){var e=new RegExp(d,"g");a[c]=a[c].replace(e,b[d])}}else this.recursiveSubtitute(a[c],b)},com.adtech.Utils_2_67_0.dispatchElementFocusEvent=function(a,b){b&&!a.windowInFocus?(a.windowInFocus=!0,a.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.FOCUS)):!b&&a.windowInFocus&&(a.windowInFocus=!1,a.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.BLUR))},com.adtech.Utils_2_67_0.addCustomEventHandler=function(a,b,c){if(a instanceof com.adtech.EventDispatcher_2_67_0)for(var d=0;d<c.length;d++){var e=c[d];e.custom&&a.addEventListener(e.name,b.customEventHandler,b)}},com.adtech.Utils_2_67_0.createClosure=function(a,b){var c=[].slice.call(arguments,2),d=function(){var a=arguments.callee,b=[].slice.call(arguments),c=a.extraArgs.concat(b,[a]);return a.handler.apply(a.target,c)};return d.extraArgs=c,d.target=a,d.handler=b,d},com.adtech.Utils_2_67_0.registerNativeEventHandler=function(a,b,c){"function"==typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},com.adtech.Utils_2_67_0.deregisterNativeEventHandler=function(a,b,c){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},com.adtech.Utils_2_67_0.getPageOffsets=function(a){var b=a?com.adtech.IframeUtils_2_67_0.topOrSelf().document:document;return{x:b.pageXOffset||b.documentElement.scrollLeft||b.body.scrollLeft,y:b.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop}},com.adtech.Utils_2_67_0.getViewportDims=function(a){var b=a?com.adtech.IframeUtils_2_67_0.topOrSelf().document:document,c=b.documentElement.clientWidth,d="CSS1Compat"===b.compatMode&&c||b.body.clientWidth||c,e=b.documentElement.clientHeight,f="CSS1Compat"===b.compatMode&&e||b.body.clientHeight||e;return this.isiOS()&&f<window.innerHeight&&(f=window.innerHeight),{w:d,h:f}},com.adtech.Utils_2_67_0.calculateAbsolutePosition=function(a){for(var b=0,c=0;a;)b+=a.offsetTop,c+=a.offsetLeft,a=a.offsetParent;return{x:c,y:b}},com.adtech.Utils_2_67_0.getDocumentHeight=function(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))},com.adtech.Utils_2_67_0.getDocumentWidth=function(){var a=document;return Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))},com.adtech.Utils_2_67_0.getComputedStyle=function(a,b){try{return"undefined"!=typeof a.currentStyle?a.currentStyle[b]:window.getComputedStyle(a,null)[b]}catch(c){return null}},com.adtech.Utils_2_67_0.canUseFixedPositioning=function(){return!(this.isiOS()&&this.getiOSVersion().major<5||this.getUserAgent().indexOf("opera mini")>-1||this.isIE()&&this.getIEVersion().major<8)},com.adtech.Utils_2_67_0.requestJs=function(a){try{var b=document.createElement("script");b.src=a,b.charset="utf-8",document.body.appendChild(b)}catch(c){document.write('<script type="text/javascript" charset="utf-8" src="'+a+'"><\/script>')}},com.adtech.Utils_2_67_0.canRenderRich=function(a){var b=a.assetContainers,c=!0,d=this.IE_10_TRIDENT_VERSION;for(var e in b)if(b.hasOwnProperty(e)){var f=b[e].type==com.adtech.AssetContainerFactory_2_67_0.NO_CONTENT?"":b[e].contentType;if(!this.isPluginEnabled(f,b[e].pluginVersion,d)){c=!1;break}}return this.passesRenderRichExclusions(a)&&this.isBrowserW3CCompliant()&&c},com.adtech.Utils_2_67_0.passesRenderRichExclusions=function(a){var b=!1;for(var c in a.assetContainers)if(a.assetContainers.hasOwnProperty(c)){var d=a.assetContainers[c];if(d.contentType==com.adtech.ContentFactory_2_67_0.FLASH&&"window"==d.wmode){b=!0;break}}return!(b&&this.isLinux()&&!this.isWebkit())},com.adtech.Utils_2_67_0.calculatePercentValue=function(a,b){return Math.round(a/100*b)},com.adtech.Utils_2_67_0.getVideoReportingIdFromEventName=function(a){return a.indexOf("Video ")==a.lastIndexOf("Video ")&&0==a.indexOf("Video ")?"":a.substring(0,a.lastIndexOf(" Video "))+" "},com.adtech.Utils_2_67_0.getConfigOverride=function(a,b){return"object"==typeof a&&"object"==typeof a.overrides&&a.overrides[b]!==undefined?a.overrides[b]:null},com.adtech.Utils_2_67_0.getQueryStringValue=function(a){if(!this.queryStringMap){this.queryStringMap={};var b=window.location.search.substr(1).split("&");if(window!=top)try{b=b.concat(top.location.search.substr(1).split("&"))}catch(f){}for(var c=0;c<b.length;++c){var d=b[c].split("=");if(2===d.length){var e=d[1];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(g){}this.queryStringMap[d[0]]=e}}}return this.queryStringMap[a]||null},com.adtech.Utils_2_67_0.mergeObjects=function(a,b,c){c=!!c;for(var d in b)b.hasOwnProperty(d)&&(!c||c&&""!==b[d])&&(a[d]=b[d])},com.adtech.Utils_2_67_0.isEmptyObj=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},com.adtech.Utils_2_67_0.clone=function(a){if(null==a||"object"!=typeof a)return a;var b;if(this.isArray(a)){b=[];for(var c=0;c<a.length;c++)b[c]=com.adtech.Utils_2_67_0.clone(a[c])}else{b={};for(var d in a)a.hasOwnProperty(d)&&(b[d]=com.adtech.Utils_2_67_0.clone(a[d]))}return b},com.adtech.Utils_2_67_0.displayError=function(a){"undefined"!=typeof console&&console.warn("[PTLA]",a)},com.adtech.Utils_2_67_0.removeChildSafe=function(a){for(;a.childNodes.length>0;)com.adtech.Utils_2_67_0.removeChildSafe(a.childNodes[a.childNodes.length-1]);a.parentNode.removeChild(a)},com.adtech.Utils_2_67_0.createCORSRequest=function(a,b){var c=new XMLHttpRequest;return"withCredentials"in c?(c.open(a,b,!0),c.setRequestHeader("Content-Type","text/plain")):c=null,c},com.adtech.Utils_2_67_0.createIframeFormPostRequest=function(a,b){var c=document.createElement("iframe"),d=document.createElement("form"),e=document.createElement("div"),f=document.createElement("input");e.style.setAttribute?e.style.setAttribute("cssText","display:none;"):e.setAttribute("style","display:none;"),d.setAttribute("action",a),d.setAttribute("method","POST"),d.setAttribute("enctype","text/plain"),d.setAttribute("encoding","text/plain"),f.setAttribute("type","hidden"),f.setAttribute("name",com.adtech.Utils_2_67_0.JSON_CD_POST_REQUEST_FIELD),f.setAttribute("value",JSON.stringify(b)),d.appendChild(f),e.appendChild(c),document.body.insertBefore(e,document.body.firstChild);var g=c.contentDocument||c.contentWindow.document;g.open(),g.write("<!DOCTYPE html><html><body></body></html>"),g.close(),com.adtech.Utils_2_67_0.registerNativeEventHandler(c,"load",function(){com.adtech.Utils_2_67_0.removeChildSafe(e)}),g.body.appendChild(d),g.getElementsByTagName("form")[0].submit()},com.adtech.Utils_2_67_0.makeJsonPostCdRequest=function(a,b){var c=com.adtech.Utils_2_67_0.createCORSRequest("POST",a),d=com.adtech.Utils_2_67_0.JSON_CD_POST_REQUEST_FIELD+"=";if(!c)return void com.adtech.Utils_2_67_0.createIframeFormPostRequest(a,b);c.onerror=function(){com.adtech.Utils_2_67_0.createIframeFormPostRequest(a,b)},d+=JSON.stringify(b),c.send(d)},com.adtech.Utils_2_67_0.replaceTokens=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=new RegExp(c.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g");a=a.replace(d,b[c])}return a},com.adtech.Utils_2_67_0.replaceCharAt=function(a,b,c){return a.substr(0,b)+c+a.substr(b+1,a.length)},com.adtech.Utils_2_67_0.forEach=function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d])},com.adtech.Utils_2_67_0.getPageVisibilityAPI=function(){var a=null,b=null,c=!0;return"undefined"!=typeof document.hidden?(a="hidden",b="visibilitychange"):"undefined"!=typeof document.mozHidden?(a="mozHidden",b="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(a="msHidden",b="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(a="webkitHidden",b="webkitvisibilitychange"):c=!1,{HIDDEN:a,VISIBILITY_CHANGE:b,canMeasureVisibility:c}},com.adtech.Utils_2_67_0.generateGDPRQueryParams=function(a){var b="",c="";if(a&&a.gdpr){var d=a.gdpr;b=d.applies,c=d.consent}return"gdpr="+b+"&euconsent="+c},com.adtech.SafeframeUtils_2_67_0=function(){},com.adtech.SafeframeUtils_2_67_0.isInSafeframe=function(){try{if(window.sfAPI||$sf.ext)return!0}catch(a){}return!1},com.adtech.SafeframeUtils_2_67_0.isInSafeframeSandbox=function(){return!!this.getSafeframeSandbox()},com.adtech.SafeframeUtils_2_67_0.getSafeframeSandbox=function(){return window.adtechSafeframeSandbox},com.adtech.SafeframeUtils_2_67_0.register=function(a,b,c){try{this.sfAPI=parent.sfAPI||parent.$sf.ext,this.sfAPI&&this.sfAPI.register(a,b,c)}catch(d){}},com.adtech.SafeframeUtils_2_67_0.getInViewPercentage=function(){try{if(this.sfAPI){return 100*this.sfAPI.geom().self.iv}}catch(a){}},com.adtech.SafeframeUtils_2_67_0.getMaximumAdArea=function(){try{if(this.sfAPI){var a=this.sfAPI.geom();return(a.self.b-a.self.t)*(a.self.r-a.self.l)}}catch(b){}},com.adtech.SafeframeUtils_2_67_0.expand=function(a,b){this.adjustSafeframeContainer(a,b),a.contractedX&&a.contractedX!=a.contentWidth-a.contractedWidth&&(b.r=0),a.contractedY&&a.contractedY!=a.contentHeight-a.contractedHeight&&(b.b=0);try{this.sfAPI&&this.sfAPI.expand(b)}catch(c){}},com.adtech.SafeframeUtils_2_67_0.prototype.safeframeObjFromClips=function(a,b,c){var d=/rect\s*\(\s*(\w+)px\s*,\s*(\w+)px\s*,\s*(\w+)px\s*,\s*(\w+)px\s*\)/i,e=d.exec(a),f=d.exec(b),g=new Object;try{g=new parent.Object}catch(h){}return g.push=c,g.t=Math.abs(parseInt(f[1])-parseInt(e[1])),g.r=Math.abs(parseInt(f[2])-parseInt(e[2])),g.b=Math.abs(parseInt(f[3])-parseInt(e[3])),g.l=Math.abs(parseInt(f[4])-parseInt(e[4])),g},com.adtech.SafeframeUtils_2_67_0.collapse=function(a){this.adjustSafeframeContainer(a);try{this.sfAPI&&this.sfAPI.collapse()}catch(b){}},com.adtech.SafeframeUtils_2_67_0.adjustSafeframeContainer=function(a,b){var c=this.getSafeframeSandbox();if(!b)return c.style.position="static",c.style.left="auto",c.style.top="auto",a.anchorDiv.style.left="auto",void(a.anchorDiv.style.top="auto");c.style.position="relative",b.l&&(c.style.left=-b.l+(a.contentWidth-this.sfAPI.geom().self.w)+"px",a.anchorDiv.style.left=a.contractedX+"px"),b.t&&(c.style.top=-b.t+(a.contentHeight-this.sfAPI.geom().self.h)+"px",a.anchorDiv.style.top=a.contractedY+"px")},com.adtech.SafeframeUtils_2_67_0.createSafeframeSandbox=function(a){var b="adtechSafeFrameSandbox_"+a.adServerVars.uid,c=a.assetContainers.main.contentWidth,d=a.assetContainers.main.contentHeight,e="width:"+c+"px;height:"+d+"px;border:0px;";document.write('<iframe id="'+b+'" style="'+e+'" seamless="seamless" scrolling="no" frameborder="0" allowtransparency="true" allowFullScreen="true" mozallowFullScreen="true" webkitAllowFullScreen="true"></iframe>');var f=document.getElementById(b),g=f.contentWindow,h=g.document;h.open(),g.adtechSafeframeSandbox=f,a.overrides=a.overrides||{},a.overrides.displayWindowTarget=g,g.adtechAdQueue=[a],g.adtechAdManagerReqs={"2_67_0":!0},window.adtechAdCallbacks&&(g.adtechAdCallbacks=window.adtechAdCallbacks),h.write('<html><head></head><body style="padding:0px;margin:0px;"><script type="text/javascript" src="'+a.rmLibUrl+'"><\/script></body><html>'),h.close()},/*!  SWFObject v2.2 <http://code.google.com/p/swfobject/>
  is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
com.adtech.swfobject_2_67_0=function(){function a(){if(!D){try{var a=v.getElementsByTagName("body")[0].appendChild(k("span"));a.parentNode.removeChild(a)}catch(e){return}D=!0,b();for(var c=y.length,d=0;d<c;d++)y[d]()}}function b(){if(!A){A=!0;for(var a=z.length,b=0;b<a;b++)z[b]()}}function c(a){D?a():y[y.length]=a}function d(a){A||D?a():z[z.length]=a}function e(a){var b=com.adtech.IframeUtils_2_67_0,c=b&&b.isInIframe()&&b.isInFriendlyIframe()?b.topOrSelf():u;if(typeof u.addEventListener!=r)c.addEventListener("load",a,!1);else if(typeof v.addEventListener!=r)c.document.addEventListener("load",a,!1);else if(typeof u.attachEvent!=r)l(c,"onload",a);else if("function"==typeof c.onload){var d=c.onload;c.onload=function(){d(),a()}}else c.onload=a}function f(a,b,c){var d,e=j(c);if(!e){var h=arguments.length>3?arguments[3]+1:0,i=this,l=function(){f.apply(i,[a,b,c,h])};3==arguments.length?setTimeout(l,10):h<5&&setTimeout(l,50)}if(F.wk&&F.wk<312)return d;if(e)if(typeof a.id==r&&(a.id=c),F.ie&&F.win){var m="";for(var n in a)a[n]!=Object.prototype[n]&&("data"==n.toLowerCase()?b.movie=a[n]:"styleclass"==n.toLowerCase()?m+=' class="'+a[n]+'"':"classid"!=n.toLowerCase()&&(m+=" "+n+'="'+a[n]+'"'));var o="";for(var p in b)b[p]!=Object.prototype[p]&&(o+='<param name="'+p+'" value="'+b[p]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+m+">"+o+"</object>",B[B.length]=a.id,d=j(a.id)}else{var q=k(s);q.setAttribute("type",t);for(var u in a)a[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?q.setAttribute("class",a[u]):"classid"!=u.toLowerCase()&&q.setAttribute(u,a[u]));for(var v in b)b[v]!=Object.prototype[v]&&"movie"!=v.toLowerCase()&&g(q,v,b[v]);e.parentNode.replaceChild(q,e),d=q}return d}function g(a,b,c){var d=k("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function h(a){var b=j(a);b&&"OBJECT"==b.nodeName&&(F.ie&&F.win?(b.style.display="none",function(){4==b.readyState?i(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function i(a){var b=j(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function j(a){var b=null;try{b=v.getElementById(a)}catch(c){}return b}function k(a){return v.createElement(a)}function l(a,b,c){a.attachEvent(b,c),C[C.length]=[a,b,c]}function m(a){a+="";var b=F.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]}function n(a,b,c,d){if(!F.ie||!F.mac){var e=v.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(p=null,q=null),!p||q!=f){var g=k("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),p=e.appendChild(g),F.ie&&F.win&&typeof v.styleSheets!=r&&v.styleSheets.length>0&&(p=v.styleSheets[v.styleSheets.length-1]),q=f}F.ie&&F.win?p&&typeof p.addRule==s&&p.addRule(a,b):p&&typeof v.createTextNode!=r&&p.appendChild(v.createTextNode(a+" {"+b+"}"))}}}function o(a,b){if(E){var c=b?"inherit":"hidden";D&&j(a)?j(a).style.visibility=c:n("#"+a,"visibility:"+c)}}var p,q,r="undefined",s="object",t="application/x-shockwave-flash",u=window,v=document,w=navigator,x=!1,y=[],z=[],A=!1,B=[],C=[],D=!1,E=!0,F=function(){var a=typeof v.getElementById!=r&&typeof v.getElementsByTagName!=r&&typeof v.createElement!=r,b=w.userAgent.toLowerCase(),c=w.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=!!/webkit/.test(b)&&parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),g=!1,h=[0,0,0],i=null;if(typeof w.plugins!=r&&typeof w.plugins["Shockwave Flash"]==s)!(i=w.plugins["Shockwave Flash"].description)||typeof w.mimeTypes!=r&&w.mimeTypes[t]&&!w.mimeTypes[t].enabledPlugin||(x=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=r)try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");j&&(i=j.GetVariable("$version"))&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e,string:b}}();(function(){F.w3&&((typeof v.readyState!=r&&"complete"==v.readyState||typeof v.readyState==r&&(v.getElementsByTagName("body")[0]||v.body))&&a(),D||(typeof v.addEventListener!=r&&v.addEventListener("DOMContentLoaded",a,!1),F.ie&&F.win&&(v.attachEvent("onreadystatechange",function(){"complete"==v.readyState&&(v.detachEvent("onreadystatechange",arguments.callee),a())}),u==top&&function(){if(!D){try{v.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),F.wk&&function(){if(!D)/loaded|complete/.test(v.readyState)?a():setTimeout(arguments.callee,0)}(),e(a)))})(),function(){F.ie&&F.win&&window.attachEvent("onunload",function(){for(var a=C.length,b=0;b<a;b++)C[b][0].detachEvent(C[b][1],C[b][2]);for(var c=B.length,d=0;d<c;d++)h(B[d]);for(var e in F)F[e]=null;F=null;for(var f in com.adtech.swfobject)com.adtech.swfobject[f]=null;com.adtech.swfobject=null})}();return{embedSWF:function(a,b,c,e,g,h,i,j,k){var l={success:!1,id:b};F.w3&&!(F.wk&&F.wk<312)&&a&&b&&c&&e&&g?(o(b,!1),d(function(){c+="",e+="";var d={};if(j&&typeof j===s)for(var n in j)d[n]=j[n];d.data=a,d.width=c,d.height=e;var p={};if(i&&typeof i===s)for(var q in i)p[q]=i[q];if(h&&typeof h===s)for(var t in h)typeof p.flashvars!=r?p.flashvars+="&"+t+"="+h[t]:p.flashvars=t+"="+h[t];if(m(g)){var u=f(d,p,b);d.id==b&&o(b,!0),l.success=!0,l.ref=u}else o(b,!0);k&&k(l)})):k&&k(l)},switchOffAutoHideShow:function(){E=!1},ua:F,getFlashPlayerVersion:function(){return{major:F.pv[0],minor:F.pv[1],release:F.pv[2]}},hasFlashPlayerVersion:m,createSWF:function(a,b,c){return F.w3?f(a,b,c):undefined},removeSWF:function(a){F.w3&&h(a)},createCSS:function(a,b,c,d){F.w3&&n(a,b,c,d)},setDOMContext:function(a){v=a},forceSWFRender:function(){b()},addDomLoadEvent:c,addLoadEvent:e}}(),com.adtech.DCOUtils_2_67_0=function(){},com.adtech.DCOUtils_2_67_0.TIMER_STR="Timer",com.adtech.DCOUtils_2_67_0.eventNameToObject=function(a){var b={section:null,component:null,content:null,detail:null,action:null};try{var c=a.split(": ")}catch(e){return b}var d=c[0].split(" - ");switch(2==d.length&&(b.section=d[0],b.component=d[1],c.shift()),c.length){case 1:b.action=c[0];break;case 2:b.content=c[0],b.action=c[1];break;case 3:b.content=c[0],b.detail=c[1],b.action=c[2]}return b},com.adtech.DCOUtils_2_67_0.sanitiseEventName=function(a){if(a.contentTypeId==com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_VIDEO&&-1==a.name.indexOf(com.adtech.Advert_2_67_0.CONTENT_SEPARATOR)){var b=com.adtech.Utils_2_67_0.getVideoReportingIdFromEventName(a.name);a.name=b.slice(0,-1)+com.adtech.Advert_2_67_0.CONTENT_SEPARATOR+a.name.replace(b,"")}a.sanitisedName=com.adtech.DCOUtils_2_67_0.eventNameToObject(a.name).action},com.adtech.DCOUtils_2_67_0.convertTimerName=function(a){return a.match(/[^\s]Timer$/)?(a=a.replace(com.adtech.DCOUtils_2_67_0.TIMER_STR,""),com.adtech.Utils_2_67_0.replaceCharAt(a,0,a.charAt(0).toUpperCase())):a.match(/Video View$/)?a.replace(/\sView$/,""):a},com.adtech.DCOUtils_2_67_0.processDCOAdServerId=function(a){if(com.adtech.Utils_2_67_0.isArray(a)){for(var b=[],c=a.length,d=0;d<c;d++)b[d]=com.adtech.DCOUtils_2_67_0.processDCOAdServerId(a[d]);return b}return isNaN(a)?0:a},com.adtech.DCOUtils_2_67_0.processDCOValue=function(a){for(key in a)a.hasOwnProperty(key)&&(a[key]&&a[key].constructor=={}.constructor?a[key]=com.adtech.DCOUtils_2_67_0.processDCOValue(a[key]):(a[key]="undefined"!=typeof a[key]&&null!==a[key]?a[key]:"",a[key]=com.adtech.Utils_2_67_0.isArray(a[key])?a[key]:a[key]+""));return a},com.adtech.DCOUtils_2_67_0.getDCOMapContent=function(a,b,c){for(var d in a){var e=com.adtech.DCODataLoader_2_67_0.BASE_PROPERTIES,f=d==b||!c&&d==e;if(a.hasOwnProperty(d)&&f)for(var g=a[d],h=0,i=g.length;h<i;h++){var j=g[h],k=d==e?b:c;if(j.mapping&&j.mapping[k])return j}}return null},com.adtech.EventDispatcher_2_67_0=function(){this.eventTypes={}},com.adtech.EventDispatcher_2_67_0.prototype.addEventListener=function(a,b,c){"undefined"==typeof this.eventTypes[a]&&(this.eventTypes[a]=[]),com.adtech.Utils_2_67_0.inArray(b,this.eventTypes[a])||(void 0===c?this.eventTypes[a].push(b):this.eventTypes[a].push({ref:c,handler:b}))},com.adtech.EventDispatcher_2_67_0.prototype.removeEventListener=function(a,b,c){if("undefined"!=typeof this.eventTypes[a])for(var d=this.eventTypes[a].length,e=0;e<d;e++){var f=this.eventTypes[a][e],g=void 0===c?"function":"object";if(g==typeof f)switch(g){case"function":f==b&&this.eventTypes[a].splice(e,1);break;case"object":f.handler==b&&f.ref==c&&this.eventTypes[a].splice(e,1)}}},com.adtech.EventDispatcher_2_67_0.prototype.hasEventListener=function(a,b,c){if("undefined"==typeof this.eventTypes[a]||0==this.eventTypes[a].length)return!1;for(var d=this.eventTypes[a].length,e=0;e<d;e++){var f=this.eventTypes[a][e],g=void 0===c?"function":"object";if(g==typeof f)switch(g){case"function":if(f===b)return!0;break;case"object":if(f.handler===b&&f.ref===c)return!0}}return!1},com.adtech.EventDispatcher_2_67_0.prototype.dispatchEvent=function(a){if("string"==typeof a&&(a=new com.adtech.RichMediaEvent_2_67_0(a)),"string"==typeof a.type&&"undefined"!=typeof this.eventTypes[a.type]){"undefined"!=typeof a.target&&null!==a.target||(a.target=this),a.currentTarget=this;for(var b=this.eventTypes[a.type].slice(0),c=0;c<b.length;c++){var d=b[c];"object"==typeof d?d.handler.call(d.ref,a):d(a)}}},com.adtech.RichMediaEvent_2_67_0=function(a){this.type=a,this.target=null,this.currentTarget=null},com.adtech.RichMediaEvent_2_67_0.DOM_LOAD="DOMLoad",com.adtech.RichMediaEvent_2_67_0.ENGAGEMENT="engagement",com.adtech.RichMediaEvent_2_67_0.VIEWABLE_IMPRESSION="viewableImpression",com.adtech.RichMediaEvent_2_67_0.INTERACTIVE_IMPRESSION="interactiveImpression",com.adtech.RichMediaEvent_2_67_0.VIDEO_IMPRESSION="videoImpression",com.adtech.RichMediaEvent_2_67_0.QUALIFIED_ROLLOVER="qualifiedRollover",com.adtech.RichMediaEvent_2_67_0.BACKUP_VIEW="backupView",com.adtech.RichMediaEvent_2_67_0.UNSUPPORTED_CLIENT="unsupportedClient",com.adtech.RichMediaEvent_2_67_0.BACKUP_VIEWABLE_IMPRESSION="backupViewableImpression",com.adtech.RichMediaEvent_2_67_0.INDETERMINABLE_VIEWABILITY="indeterminableViewability",com.adtech.RichMediaEvent_2_67_0.MOUSE_MOVE="mouseMove",com.adtech.RichMediaEvent_2_67_0.VIEWABLE_CHANGE="viewableChange",com.adtech.RichMediaEvent_2_67_0.CONTAINER_RESIZE="resize",com.adtech.RichMediaEvent_2_67_0.MOUSE_OUT="mouseOut",com.adtech.RichMediaEvent_2_67_0.MOUSE_OVER="mouseOver",com.adtech.RichMediaEvent_2_67_0.PAGE_LOAD="pageLoad",com.adtech.RichMediaEvent_2_67_0.PAGE_SCROLL="pageScroll",com.adtech.RichMediaEvent_2_67_0.BLUR="blur",com.adtech.RichMediaEvent_2_67_0.ORIENTATION_CHANGE="orientationChange",com.adtech.RichMediaEvent_2_67_0.TOUCH_START="touchStart",com.adtech.RichMediaEvent_2_67_0.FOCUS="focus",com.adtech.RichMediaEvent_2_67_0.RENDER="render",com.adtech.RichMediaEvent_2_67_0.REPORT="reporting",com.adtech.RichMediaEvent_2_67_0.ADVERT_ADDED="advertAdded",com.adtech.RichMediaEvent_2_67_0.PAGE_RESIZE="pageResize",com.adtech.RichMediaEvent_2_67_0.SERVE="serve",com.adtech.RichMediaEvent_2_67_0.IN_VIEWPORT="inViewport",com.adtech.RichMediaEvent_2_67_0.OUT_VIEWPORT="outViewport",com.adtech.RichMediaEvent_2_67_0.EXPAND="expand",com.adtech.RichMediaEvent_2_67_0.EXPANDED="ADTECH.expanded",com.adtech.RichMediaEvent_2_67_0.CONTRACTED="ADTECH.contracted",com.adtech.RichMediaEvent_2_67_0.LOADED="ADTECH.loaded",com.adtech.RichMediaEvent_2_67_0.CLICK="click",com.adtech.RichMediaEvent_2_67_0.CLOSE="close",com.adtech.RichMediaEvent_2_67_0.HIDE="hide",com.adtech.RichMediaEvent_2_67_0.SHOW="show",com.adtech.RichMediaEvent_2_67_0.READY="ready",com.adtech.RichMediaEvent_2_67_0.ERROR="error",com.adtech.RichMediaEvent_2_67_0.MRAID_READY="MRAIDReady",com.adtech.RichMediaEvent_2_67_0.MRAID_ERROR="MRAIDError",com.adtech.RichMediaEvent_2_67_0.MRAID_VIEWABLE_CHANGE="viewableChange",com.adtech.RichMediaEvent_2_67_0.MRAID_STATE_CHANGE="stateChange",com.adtech.RichMediaEvent_2_67_0.MRAID_KEYBOARD_CHANGE="keyboardChange",com.adtech.RichMediaEvent_2_67_0.MRAID_LOCATION_CHANGE="locationChange",com.adtech.RichMediaEvent_2_67_0.MRAID_HEADING_CHANGE="headingChange",com.adtech.RichMediaEvent_2_67_0.MRAID_NETWORK_CHANGE="networkChange",com.adtech.RichMediaEvent_2_67_0.MRAID_ORIENTATION_CHANGE="orientationChange",com.adtech.RichMediaEvent_2_67_0.MRAID_SCREEN_CHANGE="screenChange",com.adtech.RichMediaEvent_2_67_0.MRAID_SIZE_CHANGE="sizeChange",com.adtech.RichMediaEvent_2_67_0.MRAID_TILT_CHANGE="tiltChange",com.adtech.RichMediaEvent_2_67_0.MRAID_SHAKE="shake",com.adtech.RichMediaEvent_2_67_0.MRAID_RESPONSE="response",com.adtech.RichMediaEvent_2_67_0.CONFIG_CHANGE="ADTECH.configChange",com.adtech.RichMediaEvent_2_67_0.DYNAMIC="PICTELA.dynamic",com.adtech.RichMediaEvent_2_67_0.DCO_DATA_ERROR="dcoDataError",com.adtech.RichMediaEvent_2_67_0.DURATION_START="durationStart",com.adtech.RichMediaEvent_2_67_0.DURATION_END="durationEnd",com.adtech.RichMediaEvent_2_67_0.VIDEO="video",com.adtech.RichMediaEvent_2_67_0.VIDEO_INTERACTION="videoInteraction",com.adtech.RichMediaEvent_2_67_0.THIRD_PARTY="thirdParty",com.adtech.RichMediaEvent_2_67_0.prototype.property=function(a,b){return"type"!=a&&"target"!=a&&(this[a]=b),this},com.adtech.MRAIDPlacementType_2_67_0={INLINE:"inline",INTERSTITIAL:"interstitial"},com.adtech.MRAIDState_2_67_0={},com.adtech.MRAIDState_2_67_0.DEFAULT="default",com.adtech.MRAIDState_2_67_0.EXPANDED="expanded",com.adtech.MRAIDState_2_67_0.HIDDEN="hidden",com.adtech.MRAIDState_2_67_0.LOADING="loading",com.adtech.MRAIDState_2_67_0.RESIZED="resized",com.adtech.Logger_2_67_0=function(a){this.adManager=a,this.eventBin={},this.pixelRequests=[]},com.adtech.Logger_2_67_0.HELIOS_TRACKING_VERSION="3.0",com.adtech.Logger_2_67_0.prototype.log=function(a){if(this.eventBin[a.adId]||(this.eventBin[a.adId]=[]),this.eventBin[a.adId].push(a),"undefined"==typeof a.clickName){if("undefined"!=typeof a.thirdPartyUrl)return void this.performRequest(a.thirdPartyUrl);if(a.networkId&&!(a.networkId.indexOf("_")>-1)){if(a.category)switch(a.category){case com.adtech.RichMediaEvent_2_67_0.DURATION_START:return}var b="undefined"!=typeof a.eventValues?";EventVals="+a.eventValues.join(","):"",c="undefined"!=typeof a.eventIds?a.eventIds.join(","):a.eventId,d="";"undefined"!=typeof a.thirdPartyPlacementId&&(d+=";kvu.3rd-plc="+a.thirdPartyPlacementId),"undefined"!=typeof a.thirdPartyCreativeId&&(d+=";kvu.3rd-creative="+a.thirdPartyCreativeId);var e="";a.regs&&a.regs.gdpr&&(""!==a.regs.gdpr.applies&&(e+=";gdpr="+a.regs.gdpr.applies),e+=";euconsent="+a.regs.gdpr.consent);var f=a.proto+"://"+a.host+"/custrmevent/"+com.adtech.Logger_2_67_0.HELIOS_TRACKING_VERSION+"/"+a.networkId+"."+a.subNetworkId+"/"+a.placementId+"/"+a.pageId+"/"+a.size+"/AdId="+a.adId+";CreativeId="+a.creativeId+";BnId="+a.bannerId+";misc="+ +new Date+";refsequenceid="+a.sequenceId32+";refseqid2="+a.sequenceId64+";BnNum="+a.bannerUid+";EventIds="+c+b+d+e;this.performRequest(f)}}},com.adtech.Logger_2_67_0.prototype.performRequest=function(a){var b=this.pixelRequests.length;this.pixelRequests[b]=new Image,this.pixelRequests[b].src=a},com.adtech.DCOLogger_2_67_0=function(a){this.dcoRequests=[],com.adtech.DCOLogger_2_67_0.supa.constructor.call(this,a)},com.adtech.Utils_2_67_0.extend(com.adtech.DCOLogger_2_67_0,com.adtech.Logger_2_67_0),com.adtech.DCOLogger_2_67_0.DCO_DATA_FIELD="dcoData",com.adtech.DCOLogger_2_67_0.DCO_EVENT_KEY="event",com.adtech.DCOLogger_2_67_0.DCO_EVENT_MESSAGE="eventMessage",com.adtech.DCOLogger_2_67_0.GET_REQUEST_MAX_LENGTH=2083,com.adtech.DCOLogger_2_67_0.prototype.log=function(a){if("object"==typeof a[com.adtech.DCOLogger_2_67_0.DCO_DATA_FIELD]){var b=com.adtech.Utils_2_67_0.generateGDPRQueryParams(a.regs);this.dcoRequests[this.dcoRequests.length]=a[com.adtech.DCOLogger_2_67_0.DCO_DATA_FIELD];try{var c=a[com.adtech.DCOLogger_2_67_0.DCO_EVENT_MESSAGE],d=new c(a[com.adtech.DCOLogger_2_67_0.DCO_DATA_FIELD]).encode(),e=a.eventEndpoint+"?blen="+d.buffer.byteLength+"&"+com.adtech.DCOLogger_2_67_0.DCO_EVENT_KEY+"64="+encodeURIComponent(d.toBase64())+"&"+b;if(this.performRequest(e),e.length>com.adtech.DCOLogger_2_67_0.GET_REQUEST_MAX_LENGTH&&com.adtech.Utils_2_67_0.isIE())throw new Error("Max length exceeded.")}catch(f){com.adtech.Utils_2_67_0.makeJsonPostCdRequest(a.eventEndpoint+"?"+b,a[com.adtech.DCOLogger_2_67_0.DCO_DATA_FIELD])}}else com.adtech.DCOLogger_2_67_0.supa.log.call(this,a)},com.adtech.DCODataLoader_2_67_0=function(a,b){this.config=a.adrConfig||a.dcoConfig,this.servingProto=a.adServerVars.servingProto,this.mainContainer=a.assetContainers.main,this.view=a.preview?com.adtech.DCODataLoader_2_67_0.VIEW_PREVIEW:com.adtech.DCODataLoader_2_67_0.VIEW_CONTENT,this.conditionalMap={},this.arbitaryConditionalMap=a.tagVars[com.adtech.DCODataLoader_2_67_0.ARBITRARY_PAIRS_KEY]||null,this.dataLoadTimeout=null,this.timeoutErrorState=!1,this.data=null,this.impression=b,this.buildConditionalParamsMap(a),com.adtech.DCODataLoader_2_67_0.supa.constructor.call(this)},com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES={PACKAGE:"package",PRODUCTS:"products",PROMOS:"promotions",OBJ_GRPS:"objectgroups",USER_DATA:"advuserdata"},com.adtech.DCODataLoader_2_67_0.ARBITRARY_PAIRS_KEY="dcoKvs",com.adtech.DCODataLoader_2_67_0.BASE_PROPERTIES="baseProperties",com.adtech.DCODataLoader_2_67_0.CONTENT_INDEX_KEY="__idx",com.adtech.DCODataLoader_2_67_0.CONTENT_MAP="CM",com.adtech.DCODataLoader_2_67_0.CONTENT_META_KEY="__meta",com.adtech.DCODataLoader_2_67_0.CONTENT_PROPERTIES="CP",com.adtech.DCODataLoader_2_67_0.DATA_LOAD_TIMEOUT=5e3,com.adtech.DCODataLoader_2_67_0.DEFAULT_PRODUCT_COUNT=5,com.adtech.DCODataLoader_2_67_0.DEFAULT_TRACKING_ID_PREFIX="Item",com.adtech.DCODataLoader_2_67_0.PRODUCT_ITEM_CLICK_URLS_KEY="ctUrls",com.adtech.DCODataLoader_2_67_0.PRODUCT_ITEM_IMP_URLS_KEY="itUrls",com.adtech.DCODataLoader_2_67_0.TAGVAR_CLICK_TRACKER="ct",com.adtech.DCODataLoader_2_67_0.TAGVAR_REDIRECT="clk",com.adtech.DCODataLoader_2_67_0.TAGVAR_PRODUCT_CATEGORY="cat",com.adtech.DCODataLoader_2_67_0.TAGVAR_PRODUCT_ID_LIST="plist",com.adtech.DCODataLoader_2_67_0.TAGVAR_MACRO_PRODUCT_ID="[DCO_PID]",com.adtech.DCODataLoader_2_67_0.TAGVAR_MACRO_PRODUCT_CATEGORY="[DCO_CID]",com.adtech.DCODataLoader_2_67_0.TAGVAR_IMPRESSION_ID="IMPTID",com.adtech.DCODataLoader_2_67_0.TAGVAR_DEVICE_ID="deviceId",com.adtech.DCODataLoader_2_67_0.VIEW_PREVIEW="preview",com.adtech.DCODataLoader_2_67_0.VIEW_CONTENT="content",com.adtech.DCODataLoader_2_67_0.ADR_PRODUCT_MACRO_PATTERN=/\[DCO_C|PID\]/gi,com.adtech.Utils_2_67_0.extend(com.adtech.DCODataLoader_2_67_0,com.adtech.EventDispatcher_2_67_0),com.adtech.DCODataLoader_2_67_0.prototype.getConfig=function(){return this.config},com.adtech.DCODataLoader_2_67_0.prototype.load=function(){if(!this.config||!this.config.map)return this.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.ERROR),void com.adtech.Utils_2_67_0.displayError("Missing data map from the advert configuration.");var a=this.config.contentAPIBaseUrl.replace(/^https?/i,this.servingProto);a=a.concat(a.includes("?")?"":"?");var b="DCODataLoadedHandler_"+ +new Date,c=com.adtech.Utils_2_67_0.generateGDPRQueryParams(this.impression.regs);window[b]=com.adtech.Utils_2_67_0.createClosure(this,this.dataLoadedHandler);var d=this.impression[com.adtech.DCOLogger_2_67_0.DCO_EVENT_MESSAGE],e=new d(this.impression[com.adtech.DCOLogger_2_67_0.DCO_DATA_FIELD]).encode();this.view==com.adtech.DCODataLoader_2_67_0.VIEW_CONTENT&&(a+="&event64="+encodeURIComponent(e.toBase64())),a+="&format=jsonp&callback="+b+"&"+c,com.adtech.Utils_2_67_0.requestJs(this.addConditionalParams(a));var f=this;this.dataLoadTimeout=setTimeout(function(){f.dataLoadFailHandler()},com.adtech.DCODataLoader_2_67_0.DATA_LOAD_TIMEOUT)},com.adtech.DCODataLoader_2_67_0.prototype.buildConditionalParamsMap=function(a){var b=com.adtech.DCODataLoader_2_67_0.ADR_PRODUCT_MACRO_PATTERN,c=com.adtech.DCODataLoader_2_67_0.TAGVAR_DEVICE_ID;null!==a.pubVars.clickPixel.match(b)&&(this.conditionalMap.ct=a.pubVars.clickPixel),null!==a.pubVars.clickRedirect.match(b)&&(this.conditionalMap.clk=a.pubVars.clickRedirect),a.tagVars&&"string"==typeof a.tagVars[c]&&(this.conditionalMap[c]=a.tagVars[c])},com.adtech.DCODataLoader_2_67_0.prototype.addConditionalParams=function(a){for(var b in this.conditionalMap)this.conditionalMap.hasOwnProperty(b)&&this.conditionalMap[b]&&(a+="&"+b+"="+encodeURIComponent(this.conditionalMap[b]));if(this.arbitaryConditionalMap)for(var b in this.arbitaryConditionalMap)this.arbitaryConditionalMap.hasOwnProperty(b)&&this.arbitaryConditionalMap[b]&&(a+="&"+b+"="+encodeURIComponent(this.arbitaryConditionalMap[b]));return a},com.adtech.DCODataLoader_2_67_0.prototype.getGroupProperties=function(a){for(var b,c,d,e=[],f=0;f<a.length;f++){var g=a[f],h=g.adrType||g.dcoType,i=h==com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.PACKAGE?com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.OBJ_GRPS:h,j=this.data[i];switch(h){case com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.PACKAGE:var k=com.adtech.Utils_2_67_0.getMatchingObjectFromArray(j,"id",g.id);null!=k&&(b=this.getPackageItems(k.objects,g.mapping),d=this.extractContentMeta(k.objects));break;case com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.PRODUCTS:b=this.getProductFeedItems(j,g.mapping);break;case com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.PROMOS:b=this.getPromotionItem(j,g.mapping);break;case com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.OBJ_GRPS:var k=com.adtech.Utils_2_67_0.getMatchingObjectFromArray(j,"id",g.id);null!=k&&(c=this.getPackageItems(k.objects,g.mapping)),e.push(g)}}if(com.adtech.Utils_2_67_0.isArray(b))for(var l=0;l<b.length;l++)com.adtech.Utils_2_67_0.mergeObjects(b[l],this.getBaseProperties(e).baseProperties);else void 0===b?(b=c,com.adtech.Utils_2_67_0.isEmptyObj(b[0])?b=null:com.adtech.Utils_2_67_0.mergeObjects(b[0],this.getBaseProperties(e).baseProperties)):com.adtech.Utils_2_67_0.mergeObjects(b,this.getBaseProperties(e).baseProperties);return{groupObject:b,contentMap:d}},com.adtech.DCODataLoader_2_67_0.prototype.getBaseProperties=function(a){for(var b={},c={},d=0;d<a.length;d++){var e=a[d],f=e.adrType||e.dcoType,g=f==com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.PACKAGE?com.adtech.DCODataLoader_2_67_0.DCO_DATA_TYPES.OBJ_GRPS:f,h=this.data[g];if(void 0!==h){var i=com.adtech.Utils_2_67_0.getMatchingObjectFromArray(h,"id",e.id);if(null!=i){for(var j in e.mapping)if(e.mapping.hasOwnProperty(j)){b[j]=i.objects[0][e.mapping[j]];var k=this.extractContentMeta(i.objects);k.length>0&&(c[j]=k[0])}}else if(com.adtech.Utils_2_67_0.isArray(h))for(var j in e.mapping)e.mapping.hasOwnProperty(j)&&(b[j]=h[0][e.mapping[j]]);else for(var j in e.mapping)e.mapping.hasOwnProperty(j)&&(b[j]=h[e.mapping[j]])}}return{baseProperties:b,contentMap:c}},com.adtech.DCODataLoader_2_67_0.prototype.getContentPropertyValues=function(){var a={},b={};for(var c in this.config.map)if(this.config.map.hasOwnProperty(c)){var d=this.config.map[c];if(c!=com.adtech.DCODataLoader_2_67_0.BASE_PROPERTIES){var e=this.getGroupProperties(d);e.groupObject&&(a[c]=e.groupObject,b[c]=e.contentMap)}else{var f=this.getBaseProperties(d);com.adtech.Utils_2_67_0.mergeObjects(a,f.baseProperties),com.adtech.Utils_2_67_0.mergeObjects(b,f.contentMap)}}var g={};return g[com.adtech.DCODataLoader_2_67_0.CONTENT_PROPERTIES]=a,g[com.adtech.DCODataLoader_2_67_0.CONTENT_MAP]=b,g},com.adtech.DCODataLoader_2_67_0.prototype.getThirdPartyTrackingData=function(){var a={};if(a[com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW]=[],a[com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL]=[],"object"==typeof this.data.trackers){if(this.data.trackers.adview)for(var b=0;b<this.data.trackers.adview.length;b++)a[com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW].push(this.data.trackers.adview[b]);if(this.data.trackers.click)for(var b=0;b<this.data.trackers.click.length;b++)a[com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL].push(this.data.trackers.click[b])}return a},com.adtech.DCODataLoader_2_67_0.prototype.getPackageItems=function(a,b){for(var c=[],d=0;d<a.length;d++){var e={};for(var f in b)b.hasOwnProperty(f)&&(e[f]=a[d][b[f]]);this.addDynamicItemProperties(e,d),c.push(e)}return c},com.adtech.DCODataLoader_2_67_0.prototype.getPromotionItem=function(a,b){var c={};if(null!==a)for(var d in b)b.hasOwnProperty(d)&&(c[d]=a[b[d]]);return c},com.adtech.DCODataLoader_2_67_0.prototype.getProductFeedItems=function(a,b){for(var c=a,d=c.length,e=0;e<d;e++)for(var f in b)if(b.hasOwnProperty(f)){var g=b[f];c[e].hasOwnProperty(g)&&(c[e][f]=c[e][g],this.addDynamicItemProperties(c[e],e))}return c},com.adtech.DCODataLoader_2_67_0.prototype.addDynamicItemProperties=function(a,b){a[com.adtech.DCODataLoader_2_67_0.CONTENT_INDEX_KEY]=b;var c=this.config.iqCollectionIdPrefix?this.config.iqCollectionIdPrefix:com.adtech.DCODataLoader_2_67_0.DEFAULT_TRACKING_ID_PREFIX,d=b<5?b+1:"6+";a[com.adtech.Advert_2_67_0.CONTENT_PROPERTY_TRACKING_KEY]=c+" "+d},com.adtech.DCODataLoader_2_67_0.prototype.extractContentMeta=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];"object"==typeof d&&d.hasOwnProperty(com.adtech.DCODataLoader_2_67_0.CONTENT_META_KEY)&&b.push(d[com.adtech.DCODataLoader_2_67_0.CONTENT_META_KEY])}return b},com.adtech.DCODataLoader_2_67_0.prototype.dataLoadFailHandler=function(){com.adtech.Utils_2_67_0.displayError("DCO response maximum timeout exceeded."),this.timeoutErrorState=!0,this.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.ERROR)},com.adtech.DCODataLoader_2_67_0.prototype.dataLoadedHandler=function(a){if(!this.timeoutErrorState){clearTimeout(this.dataLoadTimeout),this.data=a;try{if("object"!=typeof a||a.errors)throw com.adtech.Utils_2_67_0.displayError(a.errors),new Error}catch(d){return void this.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.ERROR)}var b=this.getContentPropertyValues(),c=new com.adtech.RichMediaEvent_2_67_0(com.adtech.RichMediaEvent_2_67_0.LOADED).property("contentProperties",b[com.adtech.DCODataLoader_2_67_0.CONTENT_PROPERTIES]).property("contentMap",b[com.adtech.DCODataLoader_2_67_0.CONTENT_MAP]).property("dcoData",a.dcoData||{}).property("reqClickUrl",a.reqClickUrl||null).property("thirdPartyTracking",this.getThirdPartyTrackingData());this.dispatchEvent(c)}},com.adtech.DCOEventRecordGenerator_2_67_0=function(){this.utils=com.adtech.Utils_2_67_0,this.engagementSequence=0,this.eventMessage=com.adtech.dcodeIO.ProtoBuf.loadJson({"package":"com.pictela",messages:[{name:"CreativeEvent",fields:[{rule:"optional",options:{},type:"string",name:"eventType",id:1},{rule:"optional",options:{},type:"EventHeader",name:"eventHeader",id:2},{rule:"optional",options:{},type:"EngagementHeader",name:"engagementHeader",id:3},{rule:"optional",options:{},type:"ActionHeader",name:"actionHeader",id:4},{rule:"optional",options:{},type:"string",name:"width",id:5},{rule:"optional",options:{},type:"string",name:"height",id:6},{rule:"optional",options:{},type:"string",name:"name",id:7},{rule:"optional",options:{},type:"string",name:"url",id:8},{rule:"optional",options:{},type:"string",name:"percent",id:9},{rule:"optional",options:{},type:"string",name:"duration",id:10},{rule:"optional",options:{},type:"string",name:"percentage",id:11}],enums:[],messages:[{name:"EmptyObject",fields:[],enums:[],messages:[],options:{},oneofs:{}},{name:"EventHeader",fields:[{rule:"optional",options:{},type:"DcoData",name:"dcoData",id:1},{rule:"optional",options:{},type:"string",name:"APID",id:2},{rule:"optional",options:{},type:"string",name:"UTID",id:3},{rule:"optional",options:{},type:"string",name:"device",id:4},{rule:"optional",options:{},type:"string",name:"browser",id:5},{rule:"optional",options:{},type:"string",name:"os",id:6},{rule:"optional",options:{},type:"string",name:"pageUrl",id:7},{rule:"optional",options:{},type:"string",name:"mobileAppName",id:66},{rule:"optional",options:{},type:"string",name:"mobileDeviceId",id:8},{rule:"optional",options:{},type:"string",name:"iframeDomain",id:9},{rule:"optional",options:{},type:"string",name:"deliveryFramework",id:10},{rule:"optional",options:{},type:"string",name:"language",id:11},{rule:"optional",options:{},type:"string",name:"screenResolution",id:12},{rule:"optional",options:{},type:"string",name:"viewportSize",id:13},{rule:"optional",options:{},type:"string",name:"deviceOrientation",id:14},{rule:"optional",options:{},type:"string",name:"viewable",id:15},{rule:"optional",options:{},type:"string",name:"positionOnPage",id:16},{rule:"optional",options:{},type:"string",name:"eventTimestamp",id:17},{rule:"optional",options:{},type:"string",name:"callerIP",id:18},{rule:"optional",options:{},type:"string",name:"serverIP",id:19},{rule:"optional",options:{},type:"string",name:"userAgent",id:20},{rule:"optional",options:{},type:"EmptyObject",name:"extension",id:21},{rule:"optional",options:{},type:"PictelaData",name:"pictelaData",id:22},{rule:"optional",options:{},type:"AdtechData",name:"adtechData",id:23},{rule:"optional",options:{},type:"ExternalData",name:"externalData",id:24},{rule:"optional",options:{},type:"string",name:"deliveryPlatform",id:25},{rule:"optional",options:{},type:"string",name:"IMPTID",id:26}],enums:[],messages:[{name:"DcoData",fields:[{rule:"optional",options:{},type:"string",name:"uuid",id:1},{rule:"optional",options:{},type:"string",name:"advertiserId",id:2},{rule:"optional",options:{},type:"string",name:"campaignId",id:3},{rule:"optional",options:{},type:"string",name:"placementId",id:4},{rule:"optional",options:{},type:"string",name:"creativeId",id:5},{rule:"repeated",options:{},type:"ObjectGroup",name:"objectGroups",id:6},{rule:"optional",options:{},type:"string",name:"promotionId",id:7},{rule:"optional",options:{},type:"string",name:"impressionId",id:8},{rule:"optional",options:{},type:"string",name:"impressionTs",id:9},{rule:"optional",options:{},type:"string",name:"lat",id:10},{rule:"optional",options:{},type:"string",name:"lon",id:11},{rule:"optional",options:{},type:"string",name:"ip",id:12},{rule:"optional",options:{},type:"string",name:"country",id:13},{rule:"optional",options:{},type:"string",name:"region",id:14},{rule:"optional",options:{},type:"string",name:"metro",id:15},{rule:"optional",options:{},type:"string",name:"pc",id:16},{rule:"optional",options:{},type:"string",name:"properties",id:17},{rule:"optional",options:{},type:"string",name:"advertiserCode",id:18},{rule:"repeated",options:{},type:"TargetingSet",name:"targetingSets",id:19},{rule:"optional",options:{},type:"string",name:"categoryId",id:20},{rule:"optional",options:{},type:"string",name:"productId",id:21}],enums:[],messages:[{name:"ObjectGroup",fields:[{rule:"optional",options:{},type:"string",name:"objectGroupId",id:1},{rule:"optional",options:{},type:"string",name:"objectId",id:2},{rule:"optional",options:{},type:"string",name:"algoId",id:3},{rule:"optional",options:{},type:"string",name:"targetingSetId",id:4},{rule:"optional",options:{},type:"string",name:"targetingItemId",id:5},{rule:"optional",options:{},type:"string",name:"ruleId",id:6},{rule:"repeated",options:{},type:"string",name:"includeSegmentIds",id:7},{rule:"repeated",options:{},type:"string",name:"excludeSegmentIds",id:8}],enums:[],messages:[],options:{},oneofs:{}},{name:"TargetingItemSubItem",fields:[{rule:"optional",options:{},type:"string",name:"id",id:1},{rule:"optional",options:{},type:"string",name:"type",id:2},{rule:"optional",options:{},type:"string",name:"startTs",id:3},{rule:"optional",options:{},type:"string",name:"endTs",id:4}],enums:[],messages:[],options:{},oneofs:{}},{name:"TargetingItem",fields:[{rule:"optional",options:{},type:"string",name:"targetingItemId",id:1},{rule:"optional",options:{},type:"string",name:"advertiserId",id:2},{rule:"optional",options:{},type:"string",name:"type",id:3},{rule:"repeated",options:{},type:"TargetingItemSubItem",name:"items",id:4}],enums:[],messages:[],options:{},oneofs:{}},{name:"TargetingSetRule",fields:[{
rule:"optional",options:{},type:"string",name:"op",id:1},{rule:"repeated",options:{},type:"TargetingItem",name:"targetingItems",id:2},{rule:"repeated",options:{},type:"TargetingSet",name:"targetingSets",id:3}],enums:[],messages:[],options:{},oneofs:{}},{name:"TargetingSet",fields:[{rule:"optional",options:{},type:"string",name:"targetingSetId",id:1},{rule:"optional",options:{},type:"string",name:"advertiserId",id:2},{rule:"repeated",options:{},type:"TargetingSetRule",name:"includeSets",id:3},{rule:"repeated",options:{},type:"TargetingSetRule",name:"excludeSets",id:4}],enums:[],messages:[],options:{},oneofs:{}}],options:{},oneofs:{}},{name:"PictelaData",fields:[{rule:"optional",options:{},type:"string",name:"adId",id:1},{rule:"optional",options:{},type:"string",name:"formatId",id:2},{rule:"optional",options:{},type:"string",name:"templateId",id:3},{rule:"optional",options:{},type:"string",name:"productFamilyId",id:4},{rule:"optional",options:{},type:"string",name:"customMeta",id:5},{rule:"optional",options:{},type:"string",name:"eventId",id:6}],enums:[],messages:[],options:{},oneofs:{}},{name:"AdtechData",fields:[{rule:"optional",options:{},type:"string",name:"regionId",id:1},{rule:"optional",options:{},type:"string",name:"networkId",id:2},{rule:"optional",options:{},type:"string",name:"advertiserId",id:3},{rule:"optional",options:{},type:"string",name:"campaignId",id:4},{rule:"optional",options:{},type:"string",name:"flightId",id:5},{rule:"optional",options:{},type:"string",name:"publisherId",id:6},{rule:"optional",options:{},type:"string",name:"sectionId",id:7},{rule:"optional",options:{},type:"string",name:"placementId",id:8},{rule:"optional",options:{},type:"string",name:"bannerId",id:9}],enums:[],messages:[],options:{},oneofs:{}},{name:"ExternalData",fields:[{rule:"optional",options:{},type:"string",name:"placementId",id:1},{rule:"optional",options:{},type:"string",name:"creativeId",id:2},{rule:"repeated",options:{},type:"string",name:"segments",id:3},{rule:"optional",options:{},type:"string",name:"companyId",id:4},{rule:"optional",options:{},type:"string",name:"userId",id:5},{rule:"optional",options:{},type:"string",name:"dataSourceId",id:6}],enums:[],messages:[],options:{},oneofs:{}}],options:{},oneofs:{}},{name:"EngagementHeader",fields:[{rule:"optional",options:{},type:"EventHeader",name:"eventHeader",id:1},{rule:"optional",options:{},type:"string",name:"advertiserContentId",id:2},{rule:"optional",options:{},type:"string",name:"contentName",id:3},{rule:"optional",options:{},type:"string",name:"contentTypeId",id:4},{rule:"optional",options:{},type:"string",name:"contentIndex",id:5},{rule:"optional",options:{},type:"string",name:"componentId",id:6},{rule:"optional",options:{},type:"string",name:"componentName",id:7},{rule:"optional",options:{},type:"string",name:"componentProductId",id:8},{rule:"optional",options:{},type:"string",name:"sectionName",id:9},{rule:"optional",options:{},type:"string",name:"sectionIndex",id:10},{rule:"optional",options:{},type:"string",name:"sequenceNo",id:11},{rule:"optional",options:{},type:"EmptyObject",name:"data",id:12},{rule:"optional",options:{},type:"string",name:"detail",id:13}],enums:[],messages:[],options:{},oneofs:{}},{name:"ActionHeader",fields:[{rule:"optional",options:{},type:"EngagementHeader",name:"engagementHeader",id:1},{rule:"optional",options:{},type:"string",name:"x",id:2},{rule:"optional",options:{},type:"string",name:"y",id:3},{rule:"optional",options:{},type:"string",name:"actionTypeId",id:4},{rule:"optional",options:{},type:"string",name:"actionCategoryId",id:5},{rule:"optional",options:{},type:"string",name:"actionName",id:6},{rule:"optional",options:{},type:"string",name:"actionId",id:7},{rule:"optional",options:{},type:"string",name:"detail",id:8},{rule:"optional",options:{},type:"string",name:"value",id:9}],enums:[],messages:[],options:{},oneofs:{}}],options:{},oneofs:{}}],enums:[],imports:[],options:{java_package:"com.aolplatforms.dco.dataflows.protobuf",java_outer_classname:"Events"},services:[]}).build("com.pictela.CreativeEvent")},com.adtech.DCOEventRecordGenerator_2_67_0.IMPRESSION="impression",com.adtech.DCOEventRecordGenerator_2_67_0.MOBILE_APP_IMPRESSION="mobileAppImpression",com.adtech.DCOEventRecordGenerator_2_67_0.USER_INTERACTION="userInteraction",com.adtech.DCOEventRecordGenerator_2_67_0.OTHER="other",com.adtech.DCOEventRecordGenerator_2_67_0.CLICK="click",com.adtech.DCOEventRecordGenerator_2_67_0.VIEWABLE_IMPRESSION="viewableImpression",com.adtech.DCOEventRecordGenerator_2_67_0.INTERACTIVE_IMPRESSION="interactiveImpression",com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_VIEW="backupView",com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_VIEWABLE_IMPRESSION="backupViewableImpression",com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_CLICK="backupClickthrough",com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_VIEW="contentView",com.adtech.DCOEventRecordGenerator_2_67_0.COMPONENT_VIEW="componentView",com.adtech.DCOEventRecordGenerator_2_67_0.OTHER_USER_ACTION="otherUserAction",com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION="contentDuration",com.adtech.DCOEventRecordGenerator_2_67_0.INTERACTION_DURATION="interactionDuration",com.adtech.DCOEventRecordGenerator_2_67_0.IMPRESSION_DURATION="impressionDuration",com.adtech.DCOEventRecordGenerator_2_67_0.INDETERMINABLE_VIEWABILITY="indeterminableViewability",com.adtech.DCOEventRecordGenerator_2_67_0.prototype.generateDCOData=function(a){return com.adtech.DCOUtils_2_67_0.sanitiseEventName(a),a.property(com.adtech.DCOLogger_2_67_0.DCO_DATA_FIELD,com.adtech.DCOUtils_2_67_0.processDCOValue(this.getDCOData(a))).property(com.adtech.DCOLogger_2_67_0.DCO_EVENT_MESSAGE,this.eventMessage)},com.adtech.DCOEventRecordGenerator_2_67_0.prototype.getDCOData=function(a){var b={eventType:a.dcoType,width:a.width,height:a.height};switch(a.dcoType){case com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_VIEW:b.eventType="backupImpression",b.eventHeader=this.getDCOEventHeader(a);break;case com.adtech.DCOEventRecordGenerator_2_67_0.IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.MOBILE_APP_IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.VIEWABLE_IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.INTERACTIVE_IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_VIEWABLE_IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.INDETERMINABLE_VIEWABILITY:b.eventHeader=this.getDCOEventHeader(a);break;case com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_VIEW:case com.adtech.DCOEventRecordGenerator_2_67_0.COMPONENT_VIEW:b.engagementHeader=this.getDCOEngagementHeader(a);break;case com.adtech.DCOEventRecordGenerator_2_67_0.USER_INTERACTION:case com.adtech.DCOEventRecordGenerator_2_67_0.OTHER_USER_ACTION:b.actionHeader=this.getDCOActionHeader(a);break;case com.adtech.DCOEventRecordGenerator_2_67_0.CLICK:b.actionHeader=this.getDCOActionHeader(a),b.url=a.url;break;case com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION:b.engagementHeader=this.getDCOEngagementHeader(a),b.percentage=a.percentage,b.duration=a.duration,b.name=a.sanitisedName;break;case com.adtech.DCOEventRecordGenerator_2_67_0.INTERACTION_DURATION:b.actionHeader=this.getDCOActionHeader(a),b.duration=a.duration;break;case com.adtech.DCOEventRecordGenerator_2_67_0.IMPRESSION_DURATION:b.eventHeader=this.getDCOEventHeader(a),b.name=com.adtech.DCOUtils_2_67_0.convertTimerName(a.name),b.duration=a.duration;break;case com.adtech.DCOEventRecordGenerator_2_67_0.OTHER:b.actionHeader=this.getDCOActionHeader(a)}return b},com.adtech.DCOEventRecordGenerator_2_67_0.prototype.getDCOEventHeader=function(a){var b=com.adtech.IframeUtils_2_67_0.topOrSelf()==top,c=this.utils.getViewportDims(b),d=com.adtech.DCOUtils_2_67_0.processDCOAdServerId,e={adId:a.canvasId,formatId:a.formatId,templateId:a.templateId,productFamilyId:a.productFamilyId,eventId:a.plid||null,customMeta:a.customMeta?JSON.stringify(a.customMeta):null},f={regionId:d(a.regionId),networkId:d(a.networkId),advertiserId:d(a.advertiserId),campaignId:d(a.campaignId),flightId:d(a.adId),publisherId:d(a.publisherId),sectionId:d(a.sectionId),placementId:d(a.placementId),bannerId:d(a.bannerId)},g={placementId:d(a.thirdPartyPlacementId),creativeId:d(a.thirdPartyCreativeId),segments:d(a.segmentIds),companyId:null,userId:a.userId,dataSourceId:a.externalId};return{dcoData:a.dcoEventData,APID:null,UTID:null,device:null,browser:null,os:null,pageUrl:b?top.location.href:null,mobileAppName:null,mobileDeviceId:null,iframeDomain:null,deliveryFramework:null,language:null,screenResolution:null,viewportSize:c.w+"x"+c.h,deviceOrientation:null,viewable:null,positionOnPage:null,eventTimestamp:null,callerIP:null,serverIP:null,userAgent:null,extension:{},pictelaData:e,adtechData:f,externalData:g,deliveryPlatform:null,IMPTID:a[com.adtech.DCODataLoader_2_67_0.TAGVAR_IMPRESSION_ID]}},com.adtech.DCOEventRecordGenerator_2_67_0.prototype.getDCOEngagementHeader=function(a){var b=com.adtech.DCOUtils_2_67_0.eventNameToObject(a.name);return{eventHeader:this.getDCOEventHeader(a),advertiserContentId:a.advertiserContentId,contentName:a.contentName||b.content,contentTypeId:a.contentTypeId,contentIndex:null,componentId:null,componentName:b.component,componentProductId:null,sectionName:b.section,sectionIndex:null,sequenceNo:this.engagementSequence++,data:{},detail:b.detail}},com.adtech.DCOEventRecordGenerator_2_67_0.prototype.getDCOActionHeader=function(a){var b=com.adtech.DCOUtils_2_67_0.eventNameToObject(a.name);return{engagementHeader:this.getDCOEngagementHeader(a),x:a.x,y:a.y,actionTypeId:null,actionCategoryId:null,actionName:b.action,actionId:null,detail:b.detail,value:null}},com.adtech.DynamicEventDispatcher_2_67_0=function(){com.adtech.DynamicEventDispatcher_2_67_0.supa.constructor.call(this)},com.adtech.Utils_2_67_0.extend(com.adtech.DynamicEventDispatcher_2_67_0,com.adtech.EventDispatcher_2_67_0),com.adtech.DynamicEventDispatcher_2_67_0.prototype.dispatchEvent=function(a){"string"==typeof a&&"undefined"!=typeof this.eventTypes[com.adtech.RichMediaEvent_2_67_0.DYNAMIC]&&"undefined"==typeof this.eventTypes[a]&&(a=new com.adtech.RichMediaEvent_2_67_0(com.adtech.RichMediaEvent_2_67_0.DYNAMIC).property("dynamicValue",a)),com.adtech.DynamicEventDispatcher_2_67_0.supa.dispatchEvent.call(this,a)},com.adtech.ContentRenditionProcessor_2_67_0=function(){},com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_TEXT=1,com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_IMAGE=2,com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_VIDEO=5,com.adtech.ContentRenditionProcessor_2_67_0.CONTENT_HUB_ASSET_COLLECTION_IDX="idx",com.adtech.ContentRenditionProcessor_2_67_0.CONTENT_HUB_ASSET_COLLECTION_KEY="key",com.adtech.ContentRenditionProcessor_2_67_0.CONTENT_HUB_ASSET_DEFAULT_KEY="__default",com.adtech.ContentRenditionProcessor_2_67_0.applyContentHubData=function(a,b){com.adtech.Utils_2_67_0.forEach(a.contentHubConfig.mapping,function(b,c){a.contentHubConfig.assets[b]&&com.adtech.Utils_2_67_0.forEach(c,function(a,c){if(com.adtech.Utils_2_67_0.isArray(c))for(var d=0;d<c.length;d++){var e=c[d];if(a==com.adtech.DCODataLoader_2_67_0.BASE_PROPERTIES)"undefined"!=typeof this.contentProperties[e]&&(this.contentProperties[e]=com.adtech.ContentRenditionProcessor_2_67_0.getRenditionValue(this.contentHubConfig.assets[b],this.contentProperties[e]));else if("undefined"!=typeof this.contentProperties[a])if(e&&"object"==typeof e){var f=e[com.adtech.ContentRenditionProcessor_2_67_0.CONTENT_HUB_ASSET_COLLECTION_IDX],g=e[com.adtech.ContentRenditionProcessor_2_67_0.CONTENT_HUB_ASSET_COLLECTION_KEY];f>=0&&g&&this.contentProperties[a].length>f&&(this.contentProperties[a][f][g]=com.adtech.ContentRenditionProcessor_2_67_0.getRenditionValue(this.contentHubConfig.assets[b],this.contentProperties[a][f][g]))}else"undefined"!=typeof this.contentProperties[a][e]&&(this.contentProperties[a][e]=com.adtech.ContentRenditionProcessor_2_67_0.getRenditionValue(this.contentHubConfig.assets[b],this.contentProperties[a][e]))}},a)},a)},com.adtech.ContentRenditionProcessor_2_67_0.getRenditionValue=function(a,b){switch(typeof a){case"undefined":return b;case"object":var c=com.adtech.Utils_2_67_0.clone(a);return c[com.adtech.ContentRenditionProcessor_2_67_0.CONTENT_HUB_ASSET_DEFAULT_KEY]=b,c;default:return a}},com.adtech.ContentRenditionProcessor_2_67_0.processAssets=function(a,b,c){switch(a.typeId){case com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_TEXT:case com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_IMAGE:return a.value;case com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_VIDEO:var d,e,f=com.adtech.ContentRenditionProcessor_2_67_0.determineQuality();if(com.adtech.Utils_2_67_0.isiOS())e=a.hls;else{if(b==com.adtech.ContentFactory_2_67_0.FLASH)d=a.mp4;else{d=""===com.adtech.ContentRenditionProcessor_2_67_0.getSupportedVideoTypes().mp4?a.webm:a.mp4}if(void 0===(e=d[f])||!e){var g=["mid","low"],h=0;switch(f){case"low":break;case"mid":h=1;default:for(var i=h;i<g.length;i++)if(d[g[i]]){e=d[g[i]];break}}}}if(e)return a.baseUrl.replace(/^https?/i,c)+e;var j=a[com.adtech.ContentRenditionProcessor_2_67_0.CONTENT_HUB_ASSET_DEFAULT_KEY];if(void 0!==j)return j}return a},com.adtech.ContentRenditionProcessor_2_67_0.determineQuality=function(){var a=window.devicePixelRatio,b=window.screen.availWidth*a,c=window.screen.availHeight*a,d=b*c,e=screen.width*screen.height;return com.adtech.ContentRenditionProcessor_2_67_0.deviceHasWiFiConnection()||e>786432&&d>786432?"high":e<=786432&&e>=4e5&&d<=786432&&d>=4e5?"mid":"low"},com.adtech.ContentRenditionProcessor_2_67_0.getSupportedVideoTypes=function(){var a=document.createElement("video"),b={};return a.canPlayType&&(b.mp4=""!==(a.canPlayType('video/mp4; codecs="avc1.42E01E"')||a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),b.webm=""!==a.canPlayType('video/webm; codecs="vp8, vorbis"')),b},com.adtech.ContentRenditionProcessor_2_67_0.deviceHasWiFiConnection=function(){try{if("wifi"==navigator.connection.type)return!0}catch(a){}return!1},com.adtech.AdManager_2_67_0=function(){this.adverts={},this.globalEventBus=new com.adtech.EventDispatcher_2_67_0,this.renderingInFiF=!1,this.renderingInSafeframe=!1,this.advertClass=com.adtech.Advert_2_67_0,this.createLogger(),this.init()},com.adtech.AdManager_2_67_0.PAGE_LOAD_TIMEOUT=4e3,com.adtech.AdManager_2_67_0.prototype.init=function(){var a=this,b=com.adtech.swfobject_2_67_0;b.addDomLoadEvent(function(){a.dispatchDOMLoadEvent(),a.checkPageLoadStatus()}),b.addLoadEvent(function(){a.dispatchPageLoadEvent()})},com.adtech.AdManager_2_67_0.prototype.addWindowEventListeners=function(){if(!this.windowEventListenersAdded){this.windowEventListenersAdded=!0;var a=this.renderingInFiF?com.adtech.IframeUtils_2_67_0.topOrSelf():window;com.adtech.Utils_2_67_0.registerNativeEventHandler(a,"scroll",com.adtech.Utils_2_67_0.createClosure(this,this.scrollHandler)),com.adtech.Utils_2_67_0.registerNativeEventHandler(a,"resize",com.adtech.Utils_2_67_0.createClosure(this,this.resizeHandler)),com.adtech.Utils_2_67_0.registerNativeEventHandler(a,"orientationchange",com.adtech.Utils_2_67_0.createClosure(this,this.orientationChangeHandler)),a.hasFocus&&!a.hasFocus()?this.blurHandler():this.focusHandler(),com.adtech.Utils_2_67_0.registerNativeEventHandler(a,"blur",com.adtech.Utils_2_67_0.createClosure(this,this.blurHandler)),com.adtech.Utils_2_67_0.registerNativeEventHandler(a,"focus",com.adtech.Utils_2_67_0.createClosure(this,this.focusHandler))}},com.adtech.AdManager_2_67_0.prototype.createLogger=function(){this.logger="undefined"==typeof com.adtech.debugLogger_2_67_0?new com.adtech.DCOLogger_2_67_0(this):new com.adtech.debugLogger_2_67_0},com.adtech.AdManager_2_67_0.prototype.checkPageLoadStatus=function(){if(!this.globalEventBus.pageLoaded){var a=this;this.pageLoadStatusTimeout=setTimeout(function(){a.dispatchPageLoadEvent(),clearTimeout(a.pageLoadStatusTimeout)},com.adtech.AdManager_2_67_0.PAGE_LOAD_TIMEOUT)}},com.adtech.AdManager_2_67_0.prototype.dispatchDOMLoadEvent=function(){this.globalEventBus.DOMLoaded||(this.globalEventBus.DOMLoaded=!0,this.globalEventBus.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.DOM_LOAD))},com.adtech.AdManager_2_67_0.prototype.dispatchPageLoadEvent=function(){this.globalEventBus.pageLoaded||(this.globalEventBus.pageLoaded=!0,this.dispatchViewPortEvent(com.adtech.RichMediaEvent_2_67_0.PAGE_LOAD))},com.adtech.AdManager_2_67_0.prototype.initialiseAd=function(a,b,c){this.createGlobalAdvertAccessor(),this.addWindowEventListeners(),this.adverts[a.adServerVars.uid]=new this.advertClass(b,c);var d=this.adverts[a.adServerVars.uid];d.addEventListener(com.adtech.RichMediaEvent_2_67_0.REPORT,function(a){this.logger.log(a),this.globalEventBus.dispatchEvent(a)},this);var e=a.adServerVars.uid;this.checkCustomCallbacks(e,!1),d.init(a,this.globalEventBus,this.renderingInFiF,this.renderingInSafeframe),this.globalEventBus.dispatchEvent({type:com.adtech.RichMediaEvent_2_67_0.ADVERT_ADDED,advert:d}),this.checkCustomCallbacks(e,!0),"undefined"!=typeof adtechAdCallback&&adtechAdCallback[e]&&this.invokeAdvertCallback(e,adtechAdCallback[e],!0)},com.adtech.AdManager_2_67_0.prototype.checkCustomCallbacks=function(a,b){if("undefined"!=typeof adtechAdCallbacks&&adtechAdCallbacks[a]&&com.adtech.Utils_2_67_0.isArray(adtechAdCallbacks[a]))for(var c=0;c<adtechAdCallbacks[a].length;c++)this.invokeAdvertCallback(a,adtechAdCallbacks[a][c],b)},com.adtech.AdManager_2_67_0.prototype.invokeAdvertCallback=function(a,b,c){switch(typeof b){case"function":c&&b(this.adverts[a]);break;case"object":var d=c?"init":"preInit";try{"function"==typeof b[d]&&b[d](this.adverts[a])}catch(e){console.warn(e)}}},com.adtech.AdManager_2_67_0.prototype.registerAd=function(a,b,c){"object"==typeof window.adtechDisplayWindowTarget&&(a.overrides=a.overrides||{},a.overrides.displayWindowTarget=window.adtechDisplayWindowTarget);var d=com.adtech.Utils_2_67_0.getConfigOverride(a,"displayWindowTarget");if(com.adtech.SafeframeUtils_2_67_0.isInSafeframe())return void com.adtech.SafeframeUtils_2_67_0.createSafeframeSandbox(a);if(b||c||!com.adtech.SafeframeUtils_2_67_0.isInSafeframeSandbox()&&d==window)return void this.initialiseAd(a,b,c);if(!com.adtech.SafeframeUtils_2_67_0.isInSafeframeSandbox()&&com.adtech.IframeUtils_2_67_0.isInIframe()&&com.adtech.IframeUtils_2_67_0.isBreakoutAdType(a))if(com.adtech.IframeUtils_2_67_0.isInFriendlyIframe(a))com.adtech.IframeUtils_2_67_0.registerAdOnTargetParent(com.adtech.IframeUtils_2_67_0.determineDisplayWindowTarget(a),a);else{var e=a.pubVars.iframeBusterPath?a.pubVars.iframeBusterPath:"/adtech/iframeproxy.html";com.adtech.busterCheckCbIndex=com.adtech.busterCheckCbIndex||0,com.adtech.busterCheckCbIndex++;var f="adtechBusterCheckCallback"+com.adtech.busterCheckCbIndex,g="adtech-buster-failover-"+com.adtech.busterCheckCbIndex;document.write('<div id="'+g+'"></div>');var h=this;window[f]=function(b){"object"!=typeof b||200!==parseInt(b.status,10)?(a.tagVars.forceDefault=!0,h.initialiseAd(a,document.getElementById(g))):com.adtech.IframeUtils_2_67_0.loadIframeBuster(e,a)};var i=com.adtech.IframeUtils_2_67_0.getTopHostname()+e,j=a.servicesHosts[a.adServerVars.servingProto]+"a/remotestatus/js?url="+encodeURIComponent(i)+"&callback="+f;com.adtech.Utils_2_67_0.requestJs(j)}else this.renderingInSafeframe=com.adtech.SafeframeUtils_2_67_0.isInSafeframeSandbox(),this.renderingInSafeframe||(this.renderingInFiF=com.adtech.IframeUtils_2_67_0.isInIframe()&&com.adtech.IframeUtils_2_67_0.isInFriendlyIframe(a)),this.initialiseAd(a)},com.adtech.AdManager_2_67_0.prototype.createGlobalAdvertAccessor=function(){com.adtech.getAdvertById=function(a){for(var b in window)if(window.hasOwnProperty(b)&&b.match(/^adtechAdManager/g)&&window[b].adverts){var c=window[b].adverts;for(var d in c)if(c.hasOwnProperty(d)&&c[d].canvasId==a)return c[d]}return null}},com.adtech.AdManager_2_67_0.prototype.registerAds=function(a){for(var b=a.length,c=b-1;c>-1;c--)if(-1!=a[c].rmLibUrl.indexOf("2_67_0")){var d=a.splice(c,1)[0],e=!("undefined"==typeof adtechAdTargetIframeQueue||!adtechAdTargetIframeQueue[d.adServerVars.uid])&&adtechAdTargetIframeQueue[d.adServerVars.uid],f=!("undefined"==typeof adtechAdTargetDivQueue||!adtechAdTargetDivQueue[d.adServerVars.uid])&&adtechAdTargetDivQueue[d.adServerVars.uid];this.registerAd(d,e,f)}},com.adtech.AdManager_2_67_0.prototype.getAdvert=function(a){return"undefined"!=typeof this.adverts[a]?this.adverts[a]:null},com.adtech.AdManager_2_67_0.prototype.dispatchViewPortEvent=function(a){offsets=com.adtech.Utils_2_67_0.getPageOffsets(this.renderingInFiF),dims=com.adtech.Utils_2_67_0.getViewportDims(this.renderingInFiF),this.globalEventBus.dispatchEvent(new com.adtech.RichMediaEvent_2_67_0(a).property("offsetX",offsets.x).property("offsetY",offsets.y).property("width",dims.w).property("height",dims.h))},com.adtech.AdManager_2_67_0.prototype.scrollHandler=function(){this.dispatchViewPortEvent(com.adtech.RichMediaEvent_2_67_0.PAGE_SCROLL)},com.adtech.AdManager_2_67_0.prototype.resizeHandler=function(){this.dispatchViewPortEvent(com.adtech.RichMediaEvent_2_67_0.PAGE_RESIZE)},com.adtech.AdManager_2_67_0.prototype.orientationChangeHandler=function(){this.dispatchViewPortEvent(com.adtech.RichMediaEvent_2_67_0.ORIENTATION_CHANGE)},com.adtech.AdManager_2_67_0.prototype.blurHandler=function(){com.adtech.Utils_2_67_0.dispatchElementFocusEvent(this.globalEventBus,!1)},com.adtech.AdManager_2_67_0.prototype.focusHandler=function(){com.adtech.Utils_2_67_0.dispatchElementFocusEvent(this.globalEventBus,!0)},com.adtech.Advert_2_67_0=function(a,b){com.adtech.Advert_2_67_0.supa.constructor.call(this),this.assetContainers={},this.rendered=!1,this.reportedEvents=[],this.richView=!0,this.targetIframe=a,this.targetDiv=b,this.containerMouseOverCount=0,this.timersFlushed=!1,this.macroMap={},this.windowInFocus=!0,this.viewEventsLogged=!1,this.isTouchDevice=!1,this.interactionEventBuffer=[],this.hasQualifiedRollover=!1,this.userHasInteracted=!1,this.userHasInteractedWithVideo=!1,this.interactionStartTime=null,this.playingVideos={},this.logTimers=!0,this.forceRenderBackup=!1,this.isBuySightAd=!1,this.dcoEventData=null,this.dcoContentMap={},this.isUserExpanded=!1,this.tagVarsPropertyMap={forceDefault:"forceRenderBackup",placementId:"thirdPartyPlacementId",creativeId:"thirdPartyCreativeId",segmentIds:"segmentIds"},this.eventBus=new com.adtech.DynamicEventDispatcher_2_67_0,this.rmEvent=com.adtech.RichMediaEvent_2_67_0,this.utils=com.adtech.Utils_2_67_0,this.pageVisibilityAPI=this.utils.getPageVisibilityAPI()},com.adtech.Utils_2_67_0.extend(com.adtech.Advert_2_67_0,com.adtech.EventDispatcher_2_67_0),com.adtech.Advert_2_67_0.prototype.init=function(a,b,c,d){var e=com.adtech.Utils_2_67_0;this.globalEventBus=b,this.canRenderRich=e.canRenderRich(a),this.renderingInFiF=c,this.renderingInSafeframe=d,this.id=a.adServerVars.id,e.recursiveSubtitute(a.tagVars,com.adtech.Advert_2_67_0.TAGVARS_SUBSTITUTION_MAP);for(var f=["canvasId","regs","servicesHosts","adServerVars","pubVars","clickTrackerUrl","clickthroughs","clickRedirect","contentVariables","contentProperties","geoData","tagVars","assets","thirdPartyTracking","events","timers","dataFeeds","liveStatsEnabled","polls","fallback","formatId","productFamilyId","templateId","dynamic","contentHubConfig"],g=0;g<f.length;g++){var h=f[g];a.hasOwnProperty(h)&&(this[h]=a[h])}if(this.clickRedirect&&this.regs&&this.regs.gdpr){var i={};this.regs.gdpr.applies&&(i.gdpr=this.regs.gdpr.applies),i.euconsent=this.regs.gdpr.consent,this.clickRedirect=a.clickRedirect=this.addClickRedirectKeyValues(i)}"1"===e.getQueryStringValue("adInspector")&&function(){var a,b;try{b=top.document,a=b.createElement("script")}catch(c){b=document,a=b.createElement("script")}a.src="AdInspector.js?"+new Date,b.body.appendChild(a)}(),this.debugMode=e.getQueryStringValue("canvasDebugAdId")==this.canvasId.toString(),this.processTagVars(),this.pubVars.clickPixel&&this.addToThirdPartyTracking(this.pubVars.clickPixel,com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL);var j=e.getConfigOverride(a,"engagementThreshold");this.engagementThreshold=null!==j?j:com.adtech.Advert_2_67_0.ENGAGEMENT_THRESHOLD;var k=e.getConfigOverride(a,"qualifiedRolloverThreshold");this.qualifiedRolloverThreshold=null!==k?k:com.adtech.Advert_2_67_0.QUALIFIED_ROLLOVER_THRESHOLD;var l=e.getConfigOverride(a,"mobileInteractionThreshold");this.mobileInteractionThreshold=null!==l?l:com.adtech.Advert_2_67_0.MOBILE_INTERACTION_THRESHOLD;var m=e.getConfigOverride(a,"viewableImpressionThreshold");if(this.viewableImpressionThreshold=null!==m?m:com.adtech.Advert_2_67_0.VIEWABLE_IMPRESSION_THRESHOLD,this.disableMouseOverEngagement=!0===e.getConfigOverride(a,"disableMouseOverEngagement"),this.initTimers(),this.eventActions=a.eventHandlers,this.setMacroMap(),this.setDebugOverrides(),!this.forceRenderBackup&&this.canRenderRich){var n=this;this.eventBus.addEventListener(this.rmEvent.IN_VIEWPORT,function(){n.isInView=!0}),this.eventBus.addEventListener(this.rmEvent.OUT_VIEWPORT,function(){n.isInView=!1,n.isTouchDevice&&n.checkForMobileInteractionTimerFlush()});var o=a.assetContainers;for(var p in o)if(o.hasOwnProperty(p)){this.playingVideos[p]=[];var q=com.adtech.AssetContainerFactory_2_67_0.getContainer(o[p].type,this,a,p,this.eventBus,b);q.addEventListener(this.rmEvent.RENDER,this.renderEventHandler,this),q.addEventListener(this.rmEvent.IN_VIEWPORT,this.containerViewHandler,this),q.addEventListener(this.rmEvent.OUT_VIEWPORT,this.containerViewHandler,this),q.addEventListener(this.rmEvent.CLOSE,this.containerCloseHandler,this),q.addEventListener(this.rmEvent.HIDE,this.containerHideHandler,this),q.addEventListener(this.rmEvent.MOUSE_OVER,this.mouseOverEventHandler,this),q.addEventListener(this.rmEvent.MOUSE_OUT,this.mouseOutEventHandler,this),q.addEventListener(this.rmEvent.MOUSE_OVER,this.customEventHandler,this),q.addEventListener(this.rmEvent.MOUSE_OUT,this.customEventHandler,this),q.isExpandable&&(q.addEventListener(this.rmEvent.EXPANDED,this.containerExpansionStateChangeHandler,this),q.addEventListener(this.rmEvent.CONTRACTED,this.containerExpansionStateChangeHandler,this)),this.assetContainers[p]=q}this.eventBus.addEventListener(this.rmEvent.SHOW,this.userExpansionRequestHandler,this),this.eventBus.addEventListener(this.rmEvent.EXPAND,this.userExpansionRequestHandler,this),a.dynamic&&this.eventBus.addEventListener(this.rmEvent.DYNAMIC,this.customEventHandler,this),this.addVideoEventHandlers(),e.addCustomEventHandler(this.eventBus,this,a.events)}else if(this.richView=!1,a.assetContainers.main.type==com.adtech.AssetContainerFactory_2_67_0.INLINE_DIV){a.assetContainers.main.content=this.fallback,a.assetContainers.main.contentType=com.adtech.ContentFactory_2_67_0.HTML,a.assetContainers.main.x=0,a.assetContainers.main.y=0,a.assetContainers.main.contentWidth=a.assetContainers.main.width,a.assetContainers.main.contentHeight=a.assetContainers.main.height,a.assetContainers.main.contractedX=0,a.assetContainers.main.contractedY=0,a.assetContainers.main.isExpandable=!1;var r=com.adtech.AssetContainerFactory_2_67_0.getContainer(a.assetContainers.main.type,this,a,"main",this.eventBus,b);r.addEventListener(this.rmEvent.IN_VIEWPORT,this.containerViewHandler,this),r.addEventListener(this.rmEvent.OUT_VIEWPORT,this.containerViewHandler,this),r.addEventListener(this.rmEvent.RENDER,this.backupImageRenderEventHandler,this),this.assetContainers.main=r}else this.reportEvent(this.rmEvent.UNSUPPORTED_CLIENT);if(this.canMeasureViewExposure=window==top||this.renderingInSafeframe||c&&top==parent&&com.adtech.IframeUtils_2_67_0.topOrSelf()!=window,this.pageVisibilityAPI.canMeasureVisibility?document.addEventListener(this.pageVisibilityAPI.VISIBILITY_CHANGE,com.adtech.Utils_2_67_0.createClosure(this,this.pageVisibilityChangeHandler)):this.canMeasureViewExposure&&(this.windowInFocus=b.windowInFocus,b.addEventListener(this.rmEvent.BLUR,this.windowFocusEventHandler,this),b.addEventListener(this.rmEvent.FOCUS,this.windowFocusEventHandler,this),b.addEventListener(this.rmEvent.SCROLL,this.windowScrollEventHandler,this)),this.dcoConfig=a.adrConfig||a.dcoConfig,a.contentHubConfig&&a.contentHubConfig.mapping&&a.contentHubConfig.assets&&(com.adtech.ContentRenditionProcessor_2_67_0.applyContentHubData(this,a),this.processContent(this.contentProperties)),this.dcoConfig)if(this.dcoConfig.eventEndpoint&&(this.dcoConfig.eventEndpoint=this.dcoConfig.eventEndpoint.replace(/^https?/i,this.adServerVars.servingProto)),this.dcoEventRecordGenerator=new com.adtech.DCOEventRecordGenerator_2_67_0(this),a.dynamic){var s=this.dcoEventRecordGenerator.generateDCOData(this.createDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.IMPRESSION)),t=new com.adtech.DCODataLoader_2_67_0(a,s);t.addEventListener(com.adtech.RichMediaEvent_2_67_0.LOADED,this.dcoDataLoadedHandler,this),t.addEventListener(com.adtech.RichMediaEvent_2_67_0.ERROR,this.dcoDataErrorHandler,this),t.load()}else this.eventBus.dispatchEvent(this.rmEvent.SERVE);else this.eventBus.dispatchEvent(this.rmEvent.SERVE);this.checkTrackViewEvents()},com.adtech.Advert_2_67_0.prototype.generateReportEvent=function(a){var b="",c="",d=!1,e=null;return void 0!==a&&(b=a.name,c=a.id,d=a.interaction,e=a.meta||null),new this.rmEvent(this.rmEvent.REPORT).property("canvasId",this.canvasId).property("adId",this.id).property("eventId",c).property("eventName",b).property("proto",this.adServerVars.servingProto).property("host",this.adServerVars.servingHost).property("bannerId",this.adServerVars.bannerId).property("bannerUid",this.adServerVars.bannerUid).property("networkId",this.adServerVars.networkId).property("subNetworkId",this.adServerVars.subNetworkId).property("creativeId",this.adServerVars.creativeId).property("placementId",this.adServerVars.placementId).property("size",this.adServerVars.adSize).property("pageId",this.adServerVars.pageId).property("category",d?com.adtech.DCOEventRecordGenerator_2_67_0.USER_INTERACTION:com.adtech.DCOEventRecordGenerator_2_67_0.OTHER).property("meta",e).property("timestamp",(new Date).getTime()).property("sequenceId32",this.adServerVars.sequenceId32).property("sequenceId64",this.adServerVars.sequenceId64).property("thirdPartyCreativeId",this.thirdPartyCreativeId||"0").property("thirdPartyPlacementId",this.thirdPartyPlacementId||"0").property("segmentIds",this.segmentIds||[]).property("interaction",d).property("regs",this.regs)},com.adtech.Advert_2_67_0.prototype.reportEvent=function(a){if(!a.suppressLogging){a="string"==typeof a?new this.rmEvent(a):a;for(var b=0;b<this.events.length;b++){var c=this.events[b];if(c.name==a.type&&c.isLoggable){var d=!1;if(this.isTouchDevice||a.type==this.rmEvent.ENGAGEMENT||a.type==this.rmEvent.INTERACTIVE_IMPRESSION||!c.interaction||c.forceLog||(d=!0),d&&!this.isTouchDevice&&!this.hasQualifiedRollover)return void(this.interactionEventBuffer[0]=a);if(c.video&&!c.interaction&&!a.forceLog){var e=this.utils.getVideoReportingIdFromEventName(a.type),f=e+com.adtech.Advert_2_67_0.VIDEO_EVENT_VIEW,g=!1;for(var h in this.assetContainers)if(this.assetContainers.hasOwnProperty(h)&&com.adtech.Utils_2_67_0.inArray(f,this.playingVideos[h])){g=!0;break}if(!g)return}if(c.cumulative||!c.cumulative&&!this.utils.inArray(a.type,this.reportedEvents)){this.thirdPartyEventTrackingCheck(c);var i=this.createCustomMeta(a.meta);c.meta=i;var j=this.generateReportEvent(c);if("object"==typeof a.meta&&"object"==typeof a.meta.reportingData){var k=[];for(var l in a.meta.reportingData)if(a.meta.reportingData.hasOwnProperty(l)){var m=a.meta.reportingData[l];if("number"==typeof m){k.push(parseInt(m));break}}k.length>0&&(j=j.property("eventValues",k))}switch(a.type){case com.adtech.DCOEventRecordGenerator_2_67_0.INTERACTIVE_IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.VIEWABLE_IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_VIEWABLE_IMPRESSION:case com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_VIEW:case com.adtech.DCOEventRecordGenerator_2_67_0.INDETERMINABLE_VIEWABILITY:
this.reportDCOEvent(a.type,this.addDCOEventProperties(c,{}))}if(c.custom){var n={name:a.type};i&&(n.customMeta=i),this.addDCOEventProperties(c,n),c.interaction&&(this.hasQualifiedRollover||this.isTouchDevice)?(c.video&&(j.property("category",this.rmEvent.VIDEO_INTERACTION),n.contentTypeId=com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_VIDEO),this.extractDCOMetaFromEvent(a.meta,n),this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.USER_INTERACTION,n)):c.video?j.property("category",this.rmEvent.VIDEO):this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.OTHER,n)}this.dispatchEvent(j),this.reportedEvents.push(a.type),a.type==this.rmEvent.ENGAGEMENT&&this.eventBus.dispatchEvent(this.rmEvent.ENGAGEMENT),c.interaction&&a.type!=this.rmEvent.ENGAGEMENT&&(this.utils.inArray(this.rmEvent.ENGAGEMENT,this.reportedEvents)||this.reportEvent(this.rmEvent.ENGAGEMENT),(this.isTouchDevice||this.hasQualifiedRollover)&&(this.utils.inArray(this.rmEvent.INTERACTIVE_IMPRESSION,this.reportedEvents)||(this.userHasInteracted=!0,this.reportEvent(this.rmEvent.INTERACTIVE_IMPRESSION),this.eventBus.dispatchEvent(this.rmEvent.INTERACTIVE_IMPRESSION)),this.startTimer(com.adtech.Advert_2_67_0.INTERACTION_TIMER),this.isTouchDevice&&this.delayedCheckForMobileInteractionTimerFlush()))}c.video&&c.interaction&&(this.userHasInteractedWithVideo=!0)}}}},com.adtech.Advert_2_67_0.prototype.createCustomMeta=function(a){if(a){var b=JSON.parse(JSON.stringify(a));if(delete b.__mouseX,delete b.__mouseY,!this.utils.isEmptyObj(b))return b}return null},com.adtech.Advert_2_67_0.prototype.delayedCheckForMobileInteractionTimerFlush=function(){clearTimeout(this.mobileInteractionCheckTimeout),this.mobileInteractionCheckTimeout=setTimeout(function(){this.checkForMobileInteractionTimerFlush()}.bind(this),this.mobileInteractionThreshold)},com.adtech.Advert_2_67_0.prototype.checkTrackViewEvents=function(){this.trackViewEvents()},com.adtech.Advert_2_67_0.prototype.trackViewEvents=function(){if(!this.viewEventsLogged){this.viewEventsLogged=!0;var a=com.adtech.Advert_2_67_0.OPT_TRACKING_KEYS;"undefined"!=typeof this.thirdPartyCreativeId&&(this.adServerVars.viewCounter+=a.creativeId+"="+this.thirdPartyCreativeId+";"),"undefined"!=typeof this.thirdPartyPlacementId&&(this.adServerVars.viewCounter+=a.placementId+"="+this.thirdPartyPlacementId+";"),this.thirdPartyPixelLog(this.adServerVars.viewCounter),this.dynamic||this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.IMPRESSION),this.thirdPartyEventTrackingCheck(com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW),this.thirdPartyPixelLog(this.pubVars.viewCountUrl)}},com.adtech.Advert_2_67_0.prototype.logViewabilityAvailability=function(){this.pageVisibilityAPI.canMeasureVisibility||this.canMeasureViewExposure||(this.reportEvent(this.rmEvent.INDETERMINABLE_VIEWABILITY),this.eventBus.dispatchEvent(this.rmEvent.IN_VIEWPORT))},com.adtech.Advert_2_67_0.prototype.initTimers=function(){for(var a=0;a<this.timers.length;a++)switch(this.timers[a].meta={requestNum:1,previousVal:0},this.timers[a].name){case com.adtech.Advert_2_67_0.DISPLAY_TIMER:case com.adtech.Advert_2_67_0.VIEW_TIMER:this.timers[a].timeElapsed=0}},com.adtech.Advert_2_67_0.prototype.checkDisplayTimerValue=function(){var a=this.getTimer(com.adtech.Advert_2_67_0.DISPLAY_TIMER);("number"==typeof a.timeElapsed&&a.timeElapsed?a.timeElapsed:(new Date).getTime()-a.startTime)>=com.adtech.Advert_2_67_0.TIMER_LOGGING_THRESHOLD&&(this.logTimers=!1)},com.adtech.Advert_2_67_0.prototype.flushTimers=function(){if(this.checkDisplayTimerValue(),!this.timersFlushed&&this.logTimers){this.timersFlushed=!0;for(var a=[],b=[],c=[],d=0;d<this.timers.length;d++){var e=this.timers[d];if(this.stopTimer(e.name),!this.isExcludedTimer(name)&&"number"==typeof e.timeElapsed&&e.timeElapsed>0){var f=this.getTimerLogPayloadValue(e);a.push(e.id),b.push(e.name),c.push(f),e.name!=com.adtech.Advert_2_67_0.DISPLAY_TIMER&&e.name!=com.adtech.Advert_2_67_0.VIEW_TIMER||this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.IMPRESSION_DURATION,this.addDCOEventProperties(e,{name:e.name,duration:f}))}}if(a.length>0){var g=this.generateReportEvent().property("category",this.rmEvent.DURATION_END).property("eventIds",a).property("eventNames",b).property("eventValues",c).property("timerEvent",!0);this.dispatchEvent(g)}}},com.adtech.Advert_2_67_0.prototype.isExcludedTimer=function(a){var b=[com.adtech.Advert_2_67_0.ENGAGEMENT_TIMER];return!(!this.isTouchDevice||!this.utils.inArray(a,b))},com.adtech.Advert_2_67_0.prototype.logTimerValue=function(a){if(this.checkDisplayTimerValue(),!this.isExcludedTimer(a)){var b=this.getTimer(a);if(this.logTimers&&b&&"number"==typeof b.startTime&&b.startTime>0){b.name===com.adtech.Advert_2_67_0.INTERACTION_TIMER&&null!=this.interactionStartTime&&(b.timeElapsed=b.startTime-this.interactionStartTime,this.interactionStartTime=null);var c=this.getTimerLogPayloadValue(b);if(c>0){var d=this.generateReportEvent().property("timerEvent",!0).property("eventValues",[c]).property("eventIds",[b.id]).property("category",this.rmEvent.DURATION_END).property("eventName",b.name);this.dispatchEvent(d),b.name===com.adtech.Advert_2_67_0.INTERACTION_TIMER&&this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.INTERACTION_DURATION,this.addDCOEventProperties(b,{name:com.adtech.Advert_2_67_0.INTERACTION_TIMER,duration:c})),(b.meta.percentage||b.meta.custom)&&this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION,this.addDCOEventProperties(b,{name:a,duration:c}))}}}},com.adtech.Advert_2_67_0.prototype.getTimerLogPayloadValue=function(a){this.stopTimer(a.name);var b=a.meta.requestNum*a.timeElapsed+a.meta.previousVal;return a.meta.requestNum++,a.meta.previousVal=a.timeElapsed,a.timeElapsed=0,b},com.adtech.Advert_2_67_0.prototype.startTimer=function(a){if(this.richView){var b=this.getTimer(a);if(b&&("undefined"==typeof b.isRunning||!b.isRunning)){b.startTime=(new Date).getTime(),a==com.adtech.Advert_2_67_0.ENGAGEMENT_TIMER&&(b.startTime=b.startTime-this.engagementThreshold),b.isRunning=!0,"undefined"==typeof b.timeElapsed&&(b.timeElapsed=0);var c=this.generateReportEvent().property("startTime",b.startTime).property("category",this.rmEvent.DURATION_START).property("eventName",a);this.dispatchEvent(c)}}},com.adtech.Advert_2_67_0.prototype.stopTimer=function(a){var b=this.getTimer(a);b&&b.isRunning&&(b.timeElapsed+=(new Date).getTime()-b.startTime,b.isRunning=!1)},com.adtech.Advert_2_67_0.prototype.getTimer=function(a){for(var b=0;b<this.timers.length;b++)if(this.timers[b].name==a)return this.timers[b];return null},com.adtech.Advert_2_67_0.prototype.startViewTimer=function(){var a=this;this.viewableImpressionCheckTimer=setTimeout(function(){a.reportEvent(a.rmEvent.VIEWABLE_IMPRESSION),a.richView||a.reportEvent(a.rmEvent.BACKUP_VIEWABLE_IMPRESSION)},this.viewableImpressionThreshold),this.startTimer(com.adtech.Advert_2_67_0.VIEW_TIMER)},com.adtech.Advert_2_67_0.prototype.stopViewTimer=function(){this.viewableImpressionCheckTimer&&clearTimeout(this.viewableImpressionCheckTimer),this.stopTimer(com.adtech.Advert_2_67_0.VIEW_TIMER);var a=this.getTimer(com.adtech.Advert_2_67_0.VIEW_TIMER),b=new this.rmEvent(this.rmEvent.REPORT).property("timerEvent",!0).property("eventIds",[a.id]).property("category",this.rmEvent.DURATION_END).property("eventName",a.name);this.dispatchEvent(b)},com.adtech.Advert_2_67_0.prototype.startEngagementTimer=function(){this.disableMouseOverEngagement||this.reportEvent(this.rmEvent.ENGAGEMENT),this.startTimer(com.adtech.Advert_2_67_0.ENGAGEMENT_TIMER)},com.adtech.Advert_2_67_0.prototype.addVideoEventHandlers=function(){this.videoReportingIdentifiers=[];for(var a=0;a<this.events.length;a++){var b=this.events[a];if("undefined"!=typeof b.video&&b.video){this.eventBus.addEventListener(b.name,this.videoEventHandler,this);var c=com.adtech.Utils_2_67_0.getVideoReportingIdFromEventName(b.name);com.adtech.Utils_2_67_0.inArray(c,this.videoReportingIdentifiers)||this.videoReportingIdentifiers.push(c)}}for(a=0;a<this.videoReportingIdentifiers.length;a++)this.eventBus.addEventListener(this.videoReportingIdentifiers[a]+com.adtech.Advert_2_67_0.VIDEO_BUFFERING_EVENT,this.videoEventHandler,this),this.eventBus.addEventListener(this.videoReportingIdentifiers[a]+com.adtech.Advert_2_67_0.VIDEO_BUFFERING_END_EVENT,this.videoEventHandler,this),this.eventBus.addEventListener(this.videoReportingIdentifiers[a]+com.adtech.Advert_2_67_0.VIDEO_AUTO_PAUSE_EVENT,this.videoEventHandler,this),this.eventBus.addEventListener(this.videoReportingIdentifiers[a]+com.adtech.Advert_2_67_0.VIDEO_AUTO_RESUME_EVENT,this.videoEventHandler,this)},com.adtech.Advert_2_67_0.prototype.getBackupImageHTML=function(a){var b="adtclk"+this.adServerVars.uid;this.createFallbackClickHandler(b);var c=this.getAssetContainer("main"),d=this.getContentVariable(com.adtech.Advert_2_67_0.ALT_TEXT_VARIABLE_KEY);return'<a href="javascript:'+b+'();void(0);" target="_self"><img src="'+this.getFileUrl(a)+'" alt="'+d.replace(/"/g,"&quot;")+'" style="border:0px;width:'+c.width+"px;height:"+c.height+'px;"/></a>'},com.adtech.Advert_2_67_0.prototype.createFallbackClickHandler=function(a){var b=this,c=this.clickthroughs[com.adtech.Advert_2_67_0.BACKUP_CLICK]?com.adtech.Advert_2_67_0.BACKUP_CLICK:com.adtech.Advert_2_67_0.DEFAULT_CLICK;window[a]=function(){b.click(c)}},com.adtech.Advert_2_67_0.prototype.getServicesHosts=function(){return{GET:this.servicesHosts[this.adServerVars.servingProto],POST:this.servicesHosts.post}},com.adtech.Advert_2_67_0.prototype.getAssetContainers=function(){return this.assetContainers},com.adtech.Advert_2_67_0.prototype.getAssetContainer=function(a){return"undefined"!=typeof this.assetContainers[a]?this.assetContainers[a]:null},com.adtech.Advert_2_67_0.prototype.getContentVariable=function(a){return this.contentVariables[a]!==undefined?this.contentVariables[a]:null},com.adtech.Advert_2_67_0.prototype.getContent=function(a){return this.contentProperties==undefined||this.contentProperties[a]==undefined?null:this.replaceContentPropertyFileValue(this.contentProperties[a])},com.adtech.Advert_2_67_0.prototype.replaceContentPropertyFileValue=function(a){switch(typeof a){case"string":return this.getFileUrl(a);case"object":return this.replaceContentPropertyFileValues(a);default:return a}},com.adtech.Advert_2_67_0.prototype.replaceContentPropertyFileValues=function(a){if(com.adtech.Utils_2_67_0.isArray(a)){for(var b=[],c=0;c<a.length;c++)b.push(this.replaceContentPropertyFileValue(a[c]));return b}var d={},e=[com.adtech.Advert_2_67_0.CONTENT_PROPERTY_TRACKING_KEY,com.adtech.Advert_2_67_0.CONTENT_PROPERTY_PARENT_TRACKING_KEY];for(var f in a)if(a.hasOwnProperty(f)){if(com.adtech.Utils_2_67_0.inArray(f,e)){d[f]=a[f];continue}d[f]=this.replaceContentPropertyFileValue(a[f])}return d},com.adtech.Advert_2_67_0.prototype.contentView=function(a,b){if("object"==typeof b){var c=this.getContent(a),d=this.dcoContentMap[a];c&&d&&(com.adtech.Utils_2_67_0.isArray(d)&&b.hasOwnProperty(com.adtech.DCODataLoader_2_67_0.CONTENT_INDEX_KEY)&&(d=d[b[com.adtech.DCODataLoader_2_67_0.CONTENT_INDEX_KEY]]),"object"==typeof d&&this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_VIEW,{advertiserContentId:d.cid,contentTypeId:d.tid,contentName:d.name,name:a}));var e=b[com.adtech.DCODataLoader_2_67_0.PRODUCT_ITEM_IMP_URLS_KEY];if(com.adtech.Utils_2_67_0.isArray(e))for(var f=0;f<e.length;f++)this.thirdPartyPixelLog(e[f])}},com.adtech.Advert_2_67_0.prototype.contentClick=function(a,b){if(com.adtech.Utils_2_67_0.isArray(this.getContent(a))&&"object"==typeof b){var c=b[com.adtech.DCODataLoader_2_67_0.PRODUCT_ITEM_CLICK_URLS_KEY];if(com.adtech.Utils_2_67_0.isArray(c))for(var d=0;d<c.length;d++)this.thirdPartyPixelLog(c[d])}},com.adtech.Advert_2_67_0.prototype.contentIsDynamic=function(a,b,c){if(this.dcoDataLoader){var d=this.dcoDataLoader.getConfig().map,e=com.adtech.DCOUtils_2_67_0.getDCOMapContent(d,a,b);if(e)return!c||c==(e.dcoType||e.adrType)}return!1},com.adtech.Advert_2_67_0.prototype.getGeoVariable=function(a){return this.geoData[a]!==undefined?this.geoData[a]:null},com.adtech.Advert_2_67_0.prototype.getDataFeedUrl=function(a){return this.dataFeeds!==undefined&&this.dataFeeds[a]!==undefined?this.dataFeeds[a]:null},com.adtech.Advert_2_67_0.prototype.getScreenGrabUrl=function(a){return this.screenGrabs&&this.screenGrabs[a]?this.screenGrabs[a]:null},com.adtech.Advert_2_67_0.prototype.getPollResultUrl=function(a){return this.polls&&this.polls[a]?this.polls[a]:null},com.adtech.Advert_2_67_0.prototype.close=function(){for(var a in this.assetContainers)this.assetContainers.hasOwnProperty(a)&&this.assetContainers[a].close()},com.adtech.Advert_2_67_0.prototype.click=function(a,b){this.executeClick(a)},com.adtech.Advert_2_67_0.prototype.dynamicClick=function(a,b){this.executeClick(a,b)},com.adtech.Advert_2_67_0.prototype.getFileUrl=function(a){if(a)for(var b=0;b<this.assets.length;b++){var c=this.assets[b];if(c.name==a)return this.adServerVars.assetBaseURL+c.url}return a},com.adtech.Advert_2_67_0.prototype.getFileUrlById=function(a,b){for(var c=0;c<this.assets.length;c++){var d=this.assets[c];if(d.id===a)return this.adServerVars.assetBaseURL+d.url}return b},com.adtech.Advert_2_67_0.prototype.executeClick=function(a,b){if(a=this.verifyClickIdentifier(a),"undefined"!=typeof this.clickthroughs[a]){var c=this.clickthroughs[a],d=this.generateClickUrl(a,b);switch(this.logClick(a,b),c.target){case"_self":top.location.href=d;break;default:window.open(d,this.adServerVars.uid+ +new Date,c.features)}}},com.adtech.Advert_2_67_0.prototype.generateClickUrl=function(a,b){var c="undefined"!=typeof adtechDisableClickTracking;if(a=this.verifyClickIdentifier(a),"undefined"!=typeof this.clickthroughs[a]){var d=this.clickthroughs[a],e=d.id;a==com.adtech.Advert_2_67_0.BACKUP_CLICK&&(d=this.clickthroughs[com.adtech.Advert_2_67_0.DEFAULT_CLICK],e=this.clickthroughs[com.adtech.Advert_2_67_0.BACKUP_CLICK].id);var f=void 0!==b&&b?b:d.dest;if(!c){f=this.addThirdPartyRedirectsToClickUrl(a,f);var g=this.generateClickRedirectUrl({id:e});g&&(f=g+escape(f));var h=this.pubVars.clickRedirect;void 0!==h&&h&&(f=this.replaceServerMacros(h)+f)}return f}return""},com.adtech.Advert_2_67_0.prototype.generateClickRedirectUrl=function(a){var b="";if("undefined"!=typeof this.clickRedirect&&this.clickRedirect){var c={},d=com.adtech.Advert_2_67_0.OPT_TRACKING_KEYS;"undefined"!=typeof this.thirdPartyCreativeId&&(c[d.creativeId]=this.thirdPartyCreativeId),"undefined"!=typeof this.thirdPartyPlacementId&&(c[d.placementId]=this.thirdPartyPlacementId),b=this.addClickRedirectKeyValues(c).replace(/_CLK_ID_/g,a.id)}return b},com.adtech.Advert_2_67_0.prototype.addClickRedirectKeyValues=function(a){var b=new RegExp(";link=","g"),c=this.clickRedirect.replace(b,""),d="";for(var e in a)a.hasOwnProperty(e)&&(d+=";"+e+"="+a[e]);return c+d+";link="},com.adtech.Advert_2_67_0.prototype.verifyClickIdentifier=function(a){return void 0!==a&&null!==a&&a?a:"default"},com.adtech.Advert_2_67_0.prototype.logClick=function(a,b,c){var d=!1,e=this.createCustomMeta(c),f=this.generateClickUrl(a,b);a==com.adtech.Advert_2_67_0.BACKUP_CLICK&&(d=!0,a=com.adtech.Advert_2_67_0.DEFAULT_CLICK);var g=this.clickthroughs[a];this.thirdPartyClickTrackingCheck(a),this.reportEvent(this.rmEvent.INTERACTIVE_IMPRESSION),this.reportEvent(this.rmEvent.ENGAGEMENT);var h=d?com.adtech.DCOEventRecordGenerator_2_67_0.BACKUP_CLICK:a,i={url:void 0!==b&&b?b:g.dest,name:h,x:null,y:null};e&&(i.customMeta=e),this.addDCOEventProperties(g,i),this.extractDCOMetaFromEvent(c,i),this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CLICK,i),this.userHasInteracted=!0,this.hasQualifiedRollover=!0;var j=this.generateReportEvent().property("clickName",a).property("clickUrl",f).property("eventId",g.id).property("category",this.rmEvent.CLICK).property("meta",e);this.dispatchEvent(j);var k={type:this.rmEvent.CLICK,data:{identifier:a,destinationUrl:f,meta:c||null}};this.dispatchEvent(k),this.isBuySightAd&&this.canRenderRich&&this.requestBuySightThirdPartyClickPixels(a)},com.adtech.Advert_2_67_0.prototype.thirdPartyEventTrackingCheck=function(a){for(var b="string"==typeof a?a:a.name,c=0;c<this.thirdPartyTracking.length;c++){var d=this.thirdPartyTracking[c];(d.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_ALL||d.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW&&b==com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW||d.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_INTERACTION&&b==this.rmEvent.ENGAGEMENT||d.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_SPECIFIC_EVENT&&d.eventName==b||d.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_INTERACTIONS_ALL&&b!=this.rmEvent.INTERACTIVE_IMPRESSION&&b!=this.rmEvent.ENGAGEMENT&&"object"==typeof a&&a.interaction)&&this.makeThirdPartyRequest(d)}},com.adtech.Advert_2_67_0.prototype.thirdPartyClickTrackingCheck=function(a){for(var b=0;b<this.thirdPartyTracking.length;b++){var c=this.thirdPartyTracking[b];!this.clickMustMakeThirdPartyRequest(c,a)||c.type!=com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL&&c.type!=com.adtech.Advert_2_67_0.TRACK_TYPE_JS||this.makeThirdPartyRequest(c)}},com.adtech.Advert_2_67_0.prototype.addThirdPartyRedirectsToClickUrl=function(a,b){for(var c=0;c<this.thirdPartyTracking.length;c++){var d=this.thirdPartyTracking[c];this.clickMustMakeThirdPartyRequest(d,a)&&d.type==com.adtech.Advert_2_67_0.TRACK_TYPE_REDIRECT&&d.url&&(b=this.replaceServerMacros(d.url)+escape(b))}return b},com.adtech.Advert_2_67_0.prototype.clickMustMakeThirdPartyRequest=function(a,b){return a.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL||a.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_ALL||a.onEvent==com.adtech.Advert_2_67_0.TRACK_EVENT_SPECIFIC_CLICK&&a.eventName==b},com.adtech.Advert_2_67_0.prototype.makeThirdPartyRequest=function(a){var b="";if(b="https"==this.adServerVars.servingProto&&a.secureUrl?a.secureUrl:a.url?a.url:a.secureUrl)switch(b=this.replaceServerMacros(b),a.type){case com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL:this.thirdPartyPixelLog(b);break;case com.adtech.Advert_2_67_0.TRACK_TYPE_JS:com.adtech.Utils_2_67_0.requestJs(b)}},com.adtech.Advert_2_67_0.prototype.processTagVars=function(){for(var a in this.tagVars)if(this.tagVars.hasOwnProperty(a))switch(a){case com.adtech.Advert_2_67_0.BUYSIGHT_KEY:this.applyTrackingIdsToTagData(a),this.processBuysightData(this.tagVars[a]);break;default:this.tagVarsPropertyMap.hasOwnProperty(a)&&(this[this.tagVarsPropertyMap[a]]=this.tagVars[a])}"string"==typeof this.segmentIds&&(this.segmentIds=this.segmentIds.split(","))},com.adtech.Advert_2_67_0.prototype.processContent=function(a){com.adtech.Utils_2_67_0.forEach(a,function(b,c){if(com.adtech.Utils_2_67_0.isArray(c))for(var d=0;d<c.length;d++)this.processContent(c[d]);else"object"==typeof c?c.typeId?(a[b]=com.adtech.ContentRenditionProcessor_2_67_0.processAssets(c,this.assetContainers.main.contentType,this.adServerVars.servingProto),"string"==typeof a[b]&&(a[b]=com.adtech.Utils_2_67_0.replaceTokens(a[b],this.macroMap))):this.processContent(c):"string"==typeof c&&(a[b]=com.adtech.Utils_2_67_0.replaceTokens(c,this.macroMap))},this)},com.adtech.Advert_2_67_0.prototype.applyDynamicContent=function(a){for(var b in this.contentProperties)if(this.contentProperties.hasOwnProperty(b)&&a.hasOwnProperty(b)){var c=typeof this.contentProperties[b];switch(c){case"string":case"number":case"boolean":this.contentProperties[b]=com.adtech.ContentRenditionProcessor_2_67_0.getRenditionValue(a[b],this.contentProperties[b]);break;case"object":if(com.adtech.Utils_2_67_0.isArray(this.contentProperties[b]))for(var d=0;d<a[b].length;d++)"undefined"==typeof this.contentProperties[b][d]&&(this.contentProperties[b][d]={}),com.adtech.Utils_2_67_0.forEach(a[b][d],function(c){this.contentProperties[b][d][c]=com.adtech.ContentRenditionProcessor_2_67_0.getRenditionValue(a[b][d][c],this.contentProperties[b][d][c])},this);else com.adtech.Utils_2_67_0.forEach(a[b][0],function(c){this.contentProperties[b][c]=com.adtech.ContentRenditionProcessor_2_67_0.getRenditionValue(a[b][0][c],this.contentProperties[b][c])},this)}}},com.adtech.Advert_2_67_0.prototype.applyTrackingIdsToTagData=function(a){var b=this.tagVars[a];try{for(var c in this.contentProperties)if(com.adtech.Utils_2_67_0.isArray(this.contentProperties[c])&&b.hasOwnProperty(c)&&com.adtech.Utils_2_67_0.isArray(b[c]))for(var d=0;d<this.contentProperties[c].length;d++)b[c][d][com.adtech.Advert_2_67_0.CONTENT_PROPERTY_TRACKING_KEY]=this.contentProperties[c][d][com.adtech.Advert_2_67_0.CONTENT_PROPERTY_TRACKING_KEY],this.contentProperties[c][d][com.adtech.Advert_2_67_0.CONTENT_PROPERTY_PARENT_TRACKING_KEY]&&(b[c][d][com.adtech.Advert_2_67_0.CONTENT_PROPERTY_PARENT_TRACKING_KEY]=this.contentProperties[c][d][com.adtech.Advert_2_67_0.CONTENT_PROPERTY_PARENT_TRACKING_KEY]);for(var c in b)b.hasOwnProperty(c)&&(this.contentProperties[c]=b[c])}catch(e){this.contentProperties[a]=b}},com.adtech.Advert_2_67_0.prototype.processBuysightData=function(a){this.isBuySightAd=!0;var b=a.items[0];if("1"!==a.status&&this.canRenderRich)try{for(var c=0;c<a.items.length;c++){var d="items"+com.adtech.Advert_2_67_0.CONTENT_SEPARATOR+a.items[c][com.adtech.Advert_2_67_0.CONTENT_PROPERTY_TRACKING_KEY]+com.adtech.Advert_2_67_0.CONTENT_SEPARATOR+"landingUrl";this.clickthroughs[d]&&(this.clickthroughs[d].dest=a.items[c].landingUrl)}this.clickthroughs[com.adtech.Advert_2_67_0.DEFAULT_CLICK].dest=a.fallbackClickUrl?a.fallbackClickUrl:b.landingUrl,this.addToThirdPartyTracking(b.impressionUrl,com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW);for(var e in a.customEvents){if(a.customEvents.hasOwnProperty(e))var f=com.adtech.Utils_2_67_0.isArray(a.customEvents[e])?a.customEvents[e]:[a.customEvents[e]];for(var c=0;c<f.length;c++)this.addToThirdPartyTracking(f[c],com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_SPECIFIC_EVENT,e)}}catch(g){return this.renderBuysightFallback(a),void(window.console&&console.error("buysightDataKey could not be processed! Fallback rendered."))}else this.renderBuysightFallback(a);for(var c=0;c<b.itUrls.length;c++)this.addToThirdPartyTracking(b.itUrls[c],com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW)},com.adtech.Advert_2_67_0.prototype.processDCOKvsTagVar=function(a,b){if(a&&a[com.adtech.DCODataLoader_2_67_0.TAGVAR_PRODUCT_ID_LIST]&&a[com.adtech.DCODataLoader_2_67_0.TAGVAR_PRODUCT_CATEGORY]){var c={};switch(c[com.adtech.DCODataLoader_2_67_0.TAGVAR_MACRO_PRODUCT_ID]=a[com.adtech.DCODataLoader_2_67_0.TAGVAR_PRODUCT_ID_LIST].split("/")[0],c[com.adtech.DCODataLoader_2_67_0.TAGVAR_MACRO_PRODUCT_CATEGORY]=a[com.adtech.DCODataLoader_2_67_0.TAGVAR_PRODUCT_CATEGORY],b){case com.adtech.DCODataLoader_2_67_0.TAGVAR_REDIRECT:this.addToThirdPartyTracking(com.adtech.Utils_2_67_0.replaceTokens(a[b],c),com.adtech.Advert_2_67_0.TRACK_TYPE_REDIRECT,com.adtech.Advert_2_67_0.TRACK_EVENT_SPECIFIC_CLICK,com.adtech.Advert_2_67_0.BACKUP_CLICK);break;case com.adtech.DCODataLoader_2_67_0.TAGVAR_CLICK_TRACKER:this.addToThirdPartyTracking(com.adtech.Utils_2_67_0.replaceTokens(a[b],c),com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_SPECIFIC_CLICK,com.adtech.Advert_2_67_0.DEFAULT_CLICK)}}},com.adtech.Advert_2_67_0.prototype.renderBuysightFallback=function(a){for(var b=a.items[0].ctUrls,c=0;c<b.length;c++)this.addToThirdPartyTracking(b[c],com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL);this.fallback=a.fallbackImageUrl,this.clickthroughs[com.adtech.Advert_2_67_0.DEFAULT_CLICK].dest=a.fallbackClickUrl?a.fallbackClickUrl:a.items[0].landingUrl;var d=a.fallbackImpressionUrl?a.fallbackImpressionUrl:a.items[0].impressionUrl;this.addToThirdPartyTracking(d,com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW),this.forceRenderBackup=!0},com.adtech.Advert_2_67_0.prototype.requestBuySightThirdPartyClickPixels=function(a){if(a.indexOf(com.adtech.Advert_2_67_0.CONTENT_SEPARATOR)>0){var b=a.split(com.adtech.Advert_2_67_0.CONTENT_SEPARATOR);if(b.length>=3)for(var c=b[b.length-2],d=this.getContent("items"),e=0;e<d.length;e++){var f=d[e];if(f[com.adtech.Advert_2_67_0.CONTENT_PROPERTY_TRACKING_KEY]==c){for(var g=0;g<f.ctUrls.length;g++)this.thirdPartyPixelLog(f.ctUrls[g]);break}}}},com.adtech.Advert_2_67_0.prototype.addToThirdPartyTracking=function(a,b,c,d){var e={url:a,type:b,onEvent:c,eventName:d};this.thirdPartyTracking.push(e)},com.adtech.Advert_2_67_0.prototype.setMacroMap=function(){this.macroMap[com.adtech.Advert_2_67_0.MACRO_AD_TIME]=this.adServerVars.uid,this.macroMap[com.adtech.Advert_2_67_0.MACRO_ASSET]=this.servicesHosts?this.servicesHosts[this.adServerVars.servingProto]:"";var a=this.tagVars[com.adtech.Advert_2_67_0.CONFIG_TRACKING_MACROS_KEY];if("object"==typeof a)for(var b in a)a.hasOwnProperty(b)&&(this.macroMap["##"+b+"##"]=a[b])},com.adtech.Advert_2_67_0.prototype.replaceServerMacros=function(a){for(var b in this.macroMap)if(this.macroMap.hasOwnProperty(b)){var c=new RegExp(b,"g");a=a.replace(c,this.macroMap[b])}var d=new RegExp(com.adtech.Advert_2_67_0.MACRO_TIMESTAMP,"g");return a.replace(d,+new Date)},com.adtech.Advert_2_67_0.prototype.thirdPartyPixelLog=function(a){if(/^http(s)?:\/\//i.test(a)){var b=this.generateReportEvent().property("thirdPartyUrl",a).property("category",this.rmEvent.THIRD_PARTY);this.dispatchEvent(b)}},com.adtech.Advert_2_67_0.prototype.checkInPageUnit=function(){this.getAssetContainer("main").anchorDiv.parentNode||(clearInterval(this.inpageUnitCheckInterval),this.close())},com.adtech.Advert_2_67_0.prototype.checkVisibleContainerCount=function(){var a=0,b=this.pageVisibilityAPI.canMeasureVisibility?!document[this.pageVisibilityAPI.HIDDEN]:this.windowInFocus;for(var c in this.assetContainers)if(this.assetContainers.hasOwnProperty(c)){var d=new this.rmEvent(this.rmEvent.VIEWABLE_CHANGE);this.assetContainers[c].visibleinViewport&&!this.assetContainers[c].closed?(a++,d.property("viewable",b)):d.property("viewable",!1),d.property("containerId",c).property("availableHeight",this.assetContainers[c].contentHeight).property("availableWidth",this.assetContainers[c].contentWidth),this.assetContainers[c].dispatchEvent(d)}a&&b?(this.eventBus.dispatchEvent(this.rmEvent.IN_VIEWPORT),this.startViewTimer()):(this.eventBus.dispatchEvent(this.rmEvent.OUT_VIEWPORT),this.stopViewTimer())},com.adtech.Advert_2_67_0.prototype.setTouchDeviceProperties=function(){this.isTouchDevice=!0,clearTimeout(this.engagementCheckTimer),clearTimeout(this.qualifiedRolloverEventTimer);var a=this.assetContainers;for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];c.removeEventListener(this.rmEvent.MOUSE_OVER,this.mouseOverEventHandler,this),c.removeEventListener(this.rmEvent.MOUSE_OUT,this.mouseOutEventHandler,this)}},com.adtech.Advert_2_67_0.prototype.setDebugOverrides=function(){if(this.debugMode){var a=com.adtech.Utils_2_67_0.getQueryStringValue("canvasAssetBasePath");a&&(this.adServerVars.assetBaseURL="http://localhost/"+a+"/")}},com.adtech.Advert_2_67_0.prototype.flushInteractionEventBuffer=function(){this.interactionEventBuffer=[]},com.adtech.Advert_2_67_0.prototype.flushMouseOverEventTimers=function(){this.logTimerValue(com.adtech.Advert_2_67_0.ENGAGEMENT_TIMER),this.userHasInteracted&&0===this.getPlayingVideosCount()&&this.logTimerValue(com.adtech.Advert_2_67_0.INTERACTION_TIMER)},com.adtech.Advert_2_67_0.prototype.addToPlayingVideos=function(a,b){com.adtech.Utils_2_67_0.inArray(a,this.playingVideos[b])||(this.playingVideos[b].push(a),this.startTimer(a))},com.adtech.Advert_2_67_0.prototype.removeFromPlayingVideos=function(a,b){for(var c=0;c<this.playingVideos[b].length;c++)if(this.playingVideos[b][c]===a){this.playingVideos[b].splice(c,1),this.logTimerValue(a);break}0===this.getPlayingVideosCount()&&(this.isTouchDevice?this.checkForMobileInteractionTimerFlush():0===this.containerMouseOverCount&&this.logTimerValue(com.adtech.Advert_2_67_0.INTERACTION_TIMER))},com.adtech.Advert_2_67_0.prototype.removeAllPlayingVideosFromContainer=function(a){var b=[],c=[];for(var d in this.playingVideos)if(this.playingVideos.hasOwnProperty(d))for(var e=0;e<this.playingVideos[d];e++)com.adtech.Utils_2_67_0.inArray(this.playingVideos[d][e],allRunningVideosIds)&&c.push(this.playingVideos[d][e]),b.push(this.playingVideos[d][e]);for(var f=0;f<this.playingVideos[a].length;f++){var g=this.playingVideos[a][f];com.adtech.Utils_2_67_0.inArray(g,c)||this.removeFromPlayingVideos(g,a)}this.playingVideos[a]=[]},com.adtech.Advert_2_67_0.prototype.getPlayingVideosCount=function(){var a=0;for(var b in this.playingVideos)this.playingVideos.hasOwnProperty(b)&&(a+=this.playingVideos[b].length);return a},com.adtech.Advert_2_67_0.prototype.checkContainersExpansionState=function(){for(var a in this.assetContainers)if(this.assetContainers.hasOwnProperty(a)&&!this.assetContainers[a].closed&&this.assetContainers[a].isExpanded)return void this.startTimer(com.adtech.Advert_2_67_0.EXPANSION_TIMER);this.isUserExpanded=!1,this.logTimerValue(com.adtech.Advert_2_67_0.EXPANSION_TIMER),this.checkForMobileInteractionTimerFlush()},com.adtech.Advert_2_67_0.prototype.extractDCOMetaFromEvent=function(a,b){a&&"number"==typeof a.__mouseX&&"number"==typeof a.__mouseY&&(b.x=a.__mouseX,b.y=a.__mouseY)},com.adtech.Advert_2_67_0.prototype.createDCOEvent=function(a,b){var c=com.adtech.DCODataLoader_2_67_0.TAGVAR_IMPRESSION_ID,d=this.generateReportEvent().property("dcoType",a).property("dcoEventData",this.dcoEventData||{}).property("formatId",this.formatId).property("productFamilyId",this.productFamilyId).property("templateId",this.templateId).property("regionId",this.adServerVars.regionId).property("advertiserId",this.adServerVars.advertiserId).property("campaignId",this.adServerVars.campaignId).property("publisherId",this.adServerVars.publisherId).property("regionId",this.adServerVars.regionId).property("sectionId",this.adServerVars.pageId).property("bannerId",this.adServerVars.bannerId).property("externalId",this.adServerVars.externalId).property("width",this.getAssetContainer("main").width).property("height",this.getAssetContainer("main").height).property(c,this.tagVars[c]).property("userId",this.tagVars.userId).property("eventEndpoint",this.dcoConfig.eventEndpoint);for(var e in b)b.hasOwnProperty(e)&&d.property(e,b[e]);return d},com.adtech.Advert_2_67_0.prototype.reportDCOEvent=function(a,b){if("undefined"!=typeof this.dcoEventRecordGenerator){var c=this.createDCOEvent(a,b);this.dispatchEvent(this.dcoEventRecordGenerator.generateDCOData(c))}},com.adtech.Advert_2_67_0.prototype.addDCOEventProperties=function(a,b){return b=b||{},a.hasOwnProperty("plid")&&(b.plid=a.plid),b},com.adtech.Advert_2_67_0.prototype.containerViewHandler=function(a){(this.pageVisibilityAPI.canMeasureVisibility||this.canMeasureViewExposure)&&this.checkVisibleContainerCount()},com.adtech.Advert_2_67_0.prototype.pageVisibilityChangeHandler=function(){this.checkVisibleContainerCount()},com.adtech.Advert_2_67_0.prototype.windowFocusEventHandler=function(a){this.windowInFocus=a.target.windowInFocus,this.checkVisibleContainerCount()},com.adtech.Advert_2_67_0.prototype.windowScrollEventHandler=function(a){this.windowInFocus=a.target.windowInFocus=!0},com.adtech.Advert_2_67_0.prototype.containerCloseHandler=function(a){this.removeAllPlayingVideosFromContainer(a.target.id),this.checkContainersExpansionState();for(var b in this.assetContainers)if(this.assetContainers.hasOwnProperty(b)&&!this.assetContainers[b].closed)return;this.flushTimers()},com.adtech.Advert_2_67_0.prototype.containerHideHandler=function(a){this.removeAllPlayingVideosFromContainer(a.target.id)},com.adtech.Advert_2_67_0.prototype.mouseOverEventHandler=function(a){if(0===this.containerMouseOverCount){var b=this;this.interactionEventBufferFlushTimer&&clearTimeout(this.interactionEventBufferFlushTimer),this.flushMouseOverEventsTimeout&&clearTimeout(this.flushMouseOverEventsTimeout),this.engagementCheckTimer=setTimeout(function(){b.startEngagementTimer()
},this.engagementThreshold),this.qualifiedRolloverEventTimer=setTimeout(function(){b.qualifiedRolloverHandler()},this.qualifiedRolloverThreshold)}this.containerMouseOverCount++},com.adtech.Advert_2_67_0.prototype.mouseOutEventHandler=function(a){if(1===this.containerMouseOverCount){var b=this;this.engagementCheckTimer&&(this.stopTimer(com.adtech.Advert_2_67_0.ENGAGEMENT_TIMER),clearTimeout(this.engagementCheckTimer)),this.qualifiedRolloverEventTimer&&clearTimeout(this.qualifiedRolloverEventTimer),this.flushMouseOverEventsTimeout=setTimeout(function(){b.flushMouseOverEventTimers()},com.adtech.Advert_2_67_0.MOUSE_OVER_TIMERS_FLUSH_TIMEOUT),this.hasQualifiedRollover||(this.interactionEventBufferFlushTimer=setTimeout(function(){b.flushInteractionEventBuffer()},500))}this.containerMouseOverCount--},com.adtech.Advert_2_67_0.prototype.qualifiedRolloverHandler=function(){for(this.hasQualifiedRollover=!0;this.interactionEventBuffer.length>0;)this.reportEvent(this.interactionEventBuffer.shift());this.userHasInteracted?this.startTimer(com.adtech.Advert_2_67_0.INTERACTION_TIMER):this.interactionStartTime=(new Date).getTime()-this.qualifiedRolloverThreshold},com.adtech.Advert_2_67_0.prototype.checkForMobileInteractionTimerFlush=function(){if(this.isTouchDevice){var a=this.getTimer(com.adtech.Advert_2_67_0.INTERACTION_TIMER);if(!a||a.isRunning){var b=(new Date).getTime()-a.startTime,c=b>=this.mobileInteractionThreshold;if(this.isInView){if(this.isUserExpanded)return;if(this.userHasInteractedWithVideo&&this.getPlayingVideosCount()>0)return;if(!c)return}else;this.stopTimer(com.adtech.Advert_2_67_0.INTERACTION_TIMER),this.logTimerValue(com.adtech.Advert_2_67_0.INTERACTION_TIMER)}}},com.adtech.Advert_2_67_0.prototype.backupImageRenderEventHandler=function(a){this.rendered||(this.rendered=!0,this.reportEvent(this.rmEvent.BACKUP_VIEW),this.logViewabilityAvailability())},com.adtech.Advert_2_67_0.prototype.containerExpansionStateChangeHandler=function(a){this.checkContainersExpansionState()},com.adtech.Advert_2_67_0.prototype.userExpansionRequestHandler=function(a){a.type!==this.rmEvent.EXPAND&&a.type!==this.rmEvent.SHOW||(this.isUserExpanded=!0)},com.adtech.Advert_2_67_0.prototype.renderEventHandler=function(a){if(!this.rendered){this.rendered=!0;var b=this;for(var c in this.assetContainers)this.assetContainers.hasOwnProperty(c)&&this.assetContainers[c].removeEventListener(this.rmEvent.RENDER,this.renderEventHandler,this);this.dispatchEvent(this.rmEvent.RENDER),this.logViewabilityAvailability(),this.startTimer(com.adtech.Advert_2_67_0.DISPLAY_TIMER),this.checkContainersExpansionState(),com.adtech.Utils_2_67_0.registerNativeEventHandler(window,"beforeunload",com.adtech.Utils_2_67_0.createClosure(this,this.flushTimers));var d=this.getAssetContainer("main");if(d&&d instanceof com.adtech.DivContainer_2_67_0&&!("undefined"!=typeof com.adtech.FloatingDivContainer_2_67_0&&d instanceof com.adtech.FloatingDivContainer_2_67_0)){var e=0;for(var c in this.assetContainers)this.assetContainers.hasOwnProperty(c)&&e++;e>1&&(this.inpageUnitCheckInterval=setInterval(function(){b.checkInPageUnit()},com.adtech.Advert_2_67_0.INPAGE_UNIT_CHECK_INTERVAL))}}},com.adtech.Advert_2_67_0.prototype.videoEventHandler=function(a){for(var b=0;b<this.videoReportingIdentifiers.length;b++){for(var c=this.videoReportingIdentifiers[b],d=c+com.adtech.Advert_2_67_0.VIDEO_EVENT_VIEW,e=a.target instanceof com.adtech.HtmlContent_2_67_0?a.target.parent.id:a.target.id,f=this.getTimer(d),g={name:a.type,duration:"",percentage:f?f.meta.percentage||"0":"0",contentTypeId:com.adtech.ContentRenditionProcessor_2_67_0.TYPE_ID_VIDEO},h={},i=0;i<this.events.length;i++)this.events[i].name==a.type&&(h=this.events[i]);switch(this.addDCOEventProperties(h,g),a.type){case c+com.adtech.Advert_2_67_0.VIDEO_BUFFERING_EVENT:this.stopTimer(d);break;case c+com.adtech.Advert_2_67_0.VIDEO_BUFFERING_END_EVENT:this.startTimer(d);break;case c+com.adtech.Advert_2_67_0.VIDEO_FIRST_QUARTILE:g.percentage="25",this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION,g);break;case c+com.adtech.Advert_2_67_0.VIDEO_MIDPOINT:g.percentage="50",this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION,g);break;case c+com.adtech.Advert_2_67_0.VIDEO_THIRD_QUARTILE:g.percentage="75",this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION,g);break;case c+com.adtech.Advert_2_67_0.VIDEO_EVENT_START:this.reportEvent(new this.rmEvent(this.rmEvent.VIDEO_IMPRESSION).property("forceLog",!0)),this.addToPlayingVideos(d,e),g.percentage="0",this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION,g);break;case c+com.adtech.Advert_2_67_0.VIDEO_EVENT_RESUME:case c+com.adtech.Advert_2_67_0.VIDEO_AUTO_RESUME_EVENT:this.addToPlayingVideos(d,e);break;case c+com.adtech.Advert_2_67_0.VIDEO_EVENT_PAUSE:com.adtech.Utils_2_67_0.inArray(d,this.playingVideos[e])&&(a.forceLog=!0),this.removeFromPlayingVideos(d,e),this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.OTHER_USER_ACTION,g);break;case c+com.adtech.Advert_2_67_0.VIDEO_AUTO_PAUSE_EVENT:this.removeFromPlayingVideos(d,e);break;case c+com.adtech.Advert_2_67_0.VIDEO_EVENT_MUTE:this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.OTHER_USER_ACTION,g);break;case c+com.adtech.Advert_2_67_0.VIDEO_EVENT_COMPLETE:com.adtech.Utils_2_67_0.inArray(d,this.playingVideos[e])&&(a.forceLog=!0),this.removeFromPlayingVideos(d,e),g.percentage="100",this.reportDCOEvent(com.adtech.DCOEventRecordGenerator_2_67_0.CONTENT_DURATION,g)}f&&(f.meta.percentage=g.percentage)}},com.adtech.Advert_2_67_0.prototype.dcoDataLoadedHandler=function(a){this.dcoDataLoader=a.target,this.dcoEventData=a.dcoData;for(var b=a.thirdPartyTracking[com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW],c=a.thirdPartyTracking[com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL],d=0;d<b.length;d++)this.thirdPartyPixelLog(b[d]);for(var d=0;d<c.length;d++)this.addToThirdPartyTracking(c[d],com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL,com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL);this.applyDynamicContent(a.contentProperties),this.processContent(this.contentProperties),this.dcoContentMap=a.contentMap,a.reqClickUrl&&(this.pubVars.clickRedirect=a.reqClickUrl),this.richView||(a.reqClickUrl||this.processDCOKvsTagVar(this.tagVars[com.adtech.DCODataLoader_2_67_0.ARBITRARY_PAIRS_KEY],com.adtech.DCODataLoader_2_67_0.TAGVAR_REDIRECT),0==c.length&&this.processDCOKvsTagVar(this.tagVars[com.adtech.DCODataLoader_2_67_0.ARBITRARY_PAIRS_KEY],com.adtech.DCODataLoader_2_67_0.TAGVAR_CLICK_TRACKER)),this.eventBus.dispatchEvent(this.rmEvent.SERVE)},com.adtech.Advert_2_67_0.prototype.dcoDataErrorHandler=function(a){this.richView=!1,this.processDCOKvsTagVar(this.tagVars[com.adtech.DCODataLoader_2_67_0.ARBITRARY_PAIRS_KEY],com.adtech.DCODataLoader_2_67_0.TAGVAR_REDIRECT),this.processDCOKvsTagVar(this.tagVars[com.adtech.DCODataLoader_2_67_0.ARBITRARY_PAIRS_KEY],com.adtech.DCODataLoader_2_67_0.TAGVAR_CLICK_TRACKER),this.dcoEventRecordGenerator=undefined;var b=this.getAssetContainer("main");b instanceof com.adtech.DivContainer_2_67_0&&!(b instanceof com.adtech.FloatingDivContainer_2_67_0)&&(b.anchorDiv.innerHTML=this.getBackupImageHTML(this.fallback),this.reportEvent(this.rmEvent.DCO_DATA_ERROR),this.reportEvent(this.rmEvent.BACKUP_VIEW),this.rendered=!0,this.dispatchEvent(this.rmEvent.RENDER))},com.adtech.Advert_2_67_0.prototype.customEventHandler=function(a){this.reportEvent(a);for(var b=0;b<this.eventActions.length;b++){var c=this.eventActions[b];if(c.name==a.type){var d,e=a.target instanceof com.adtech.HtmlContent_2_67_0?a.target.parent.id:a.target.id;switch(c.target){case com.adtech.Advert_2_67_0.ACTION_TARGET_SELF:d=e;break;default:d=c.target}if(c.source==com.adtech.Advert_2_67_0.ACTION_TARGET_WILDCARD||c.source==e||c.source==com.adtech.Advert_2_67_0.ACTION_TARGET_SELF&&e==d){var f="object"==typeof a.meta?[a.meta]:[],g=this.getAssetContainer(d);g[c.action].apply(g,f)}}}},com.adtech.Advert_2_67_0.prototype.cleanup=function(){clearTimeout(this.mobileInteractionCheckTimeout)},com.adtech.Advert_2_67_0=com.adtech.Advert_2_67_0||function(){},com.adtech.Advert_2_67_0.ENGAGEMENT_THRESHOLD=2e3,com.adtech.Advert_2_67_0.QUALIFIED_ROLLOVER_THRESHOLD=500,com.adtech.Advert_2_67_0.MOBILE_INTERACTION_THRESHOLD=1e4,com.adtech.Advert_2_67_0.VIEWABLE_IMPRESSION_THRESHOLD=1e3,com.adtech.Advert_2_67_0.MOUSE_OVER_TIMERS_FLUSH_TIMEOUT=1e3,com.adtech.Advert_2_67_0.TIMER_LOGGING_THRESHOLD=9e5,com.adtech.Advert_2_67_0.INPAGE_UNIT_CHECK_INTERVAL=1e3,com.adtech.Advert_2_67_0.TRACK_TYPE_PIXEL="1_PIXEL",com.adtech.Advert_2_67_0.TRACK_TYPE_JS="JS_URL",com.adtech.Advert_2_67_0.TRACK_TYPE_REDIRECT="REDIRECT_URL",com.adtech.Advert_2_67_0.TRACK_EVENT_VIEW="VIEW",com.adtech.Advert_2_67_0.TRACK_EVENT_INTERACTION="INTERACTION",com.adtech.Advert_2_67_0.TRACK_EVENT_SPECIFIC_EVENT="SPECIFIC_EVENT",com.adtech.Advert_2_67_0.TRACK_EVENT_SPECIFIC_CLICK="SPECIFIC_CLICK",com.adtech.Advert_2_67_0.TRACK_EVENT_CLICKS_ALL="CLICKS_ALL",com.adtech.Advert_2_67_0.TRACK_EVENT_ALL="EVENTS_ALL",com.adtech.Advert_2_67_0.TRACK_EVENT_INTERACTIONS_ALL="INTERACTIONS_ALL",com.adtech.Advert_2_67_0.DISPLAY_TIMER="displayTimer",com.adtech.Advert_2_67_0.VIEW_TIMER="viewTimer",com.adtech.Advert_2_67_0.ENGAGEMENT_TIMER="engagementTimer",com.adtech.Advert_2_67_0.INTERACTION_TIMER="interactionTimer",com.adtech.Advert_2_67_0.EXPANSION_TIMER="expansionTimer",com.adtech.Advert_2_67_0.DEFAULT_CLICK="default",com.adtech.Advert_2_67_0.BACKUP_CLICK="backupImageClickthrough",com.adtech.Advert_2_67_0.ALT_TEXT_VARIABLE_KEY="Backup Alt Text",com.adtech.Advert_2_67_0.ACTION_TARGET_SELF="self",com.adtech.Advert_2_67_0.ACTION_TARGET_WILDCARD="*",com.adtech.Advert_2_67_0.MACRO_AD_TIME="_ADTIME_",com.adtech.Advert_2_67_0.MACRO_TIMESTAMP="_TIMESTAMP_",com.adtech.Advert_2_67_0.MACRO_ASSET="_ASSETSHOST_",com.adtech.Advert_2_67_0.CONFIG_TRACKING_MACROS_KEY="trackingMacros",com.adtech.Advert_2_67_0.BUYSIGHT_KEY="buysightDataKey",com.adtech.Advert_2_67_0.CONTENT_SEPARATOR=": ",com.adtech.Advert_2_67_0.CONTENT_PROPERTY_TRACKING_KEY="Tracking Id",com.adtech.Advert_2_67_0.CONTENT_PROPERTY_PARENT_TRACKING_KEY="Parent Tracking Id",com.adtech.Advert_2_67_0.VIDEO_EVENT_VIEW="Video View",com.adtech.Advert_2_67_0.VIDEO_EVENT_START="Video Start",com.adtech.Advert_2_67_0.VIDEO_EVENT_RESUME="Video Resume",com.adtech.Advert_2_67_0.VIDEO_EVENT_REPLAY="Video Replay",com.adtech.Advert_2_67_0.VIDEO_EVENT_PAUSE="Video Pause",com.adtech.Advert_2_67_0.VIDEO_EVENT_PLAY="Video Play",com.adtech.Advert_2_67_0.VIDEO_FIRST_QUARTILE="Video First Quartile",com.adtech.Advert_2_67_0.VIDEO_MIDPOINT="Video Midpoint",com.adtech.Advert_2_67_0.VIDEO_THIRD_QUARTILE="Video Third Quartile",com.adtech.Advert_2_67_0.VIDEO_EVENT_COMPLETE="Video Complete",com.adtech.Advert_2_67_0.VIDEO_EVENT_MUTE="Video Mute",com.adtech.Advert_2_67_0.OPT_TRACKING_KEYS={creativeId:"kvu.3rd-creative",placementId:"kvu.3rd-plc"},com.adtech.Advert_2_67_0.VIDEO_BUFFERING_EVENT="Video Buffering",com.adtech.Advert_2_67_0.VIDEO_BUFFERING_END_EVENT="Video Buffering End",com.adtech.Advert_2_67_0.VIDEO_AUTO_PAUSE_EVENT="Video Auto-Pause",com.adtech.Advert_2_67_0.VIDEO_AUTO_RESUME_EVENT="Video Auto-Resume",com.adtech.Advert_2_67_0.TAGVARS_SUBSTITUTION_MAP={__SC__:";"},com.adtech.AssetContainerAlignmentOption_2_67_0=function(){},com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_LEFT="pageLeft",com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_TOP="pageTop",com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_RIGHT="pageRight",com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_BOTTOM="pageBottom",com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_CENTER="pageCenter",com.adtech.AssetContainerAlignmentOption_2_67_0.AD_SLOT_LEFT="adSlotLeft",com.adtech.AssetContainerAlignmentOption_2_67_0.AD_SLOT_TOP="adSlotTop",com.adtech.AssetContainer_2_67_0=function(a,b,c,d,e){com.adtech.AssetContainer_2_67_0.supa.constructor.call(this),this.parent=a,this.windowContext=window,this.id=c,this.visibleinViewport=!1,this.visible=!1,this.rendered=!1,this.floatOffsetLeft=0,this.floatOffsetTop=0,this.closed=!1,this.globalEventBus=e,this.autoCloseTimeout=null,this.adEventBus=d,this.advertAnchorId=com.adtech.AssetContainer_2_67_0.ANCHOR_ID_PREFIX+b.adServerVars.id+"_"+b.adServerVars.uid,this.mouseIsOver=!1,this.content=null,this.rmEvent=com.adtech.RichMediaEvent_2_67_0,this.init(b,d)},com.adtech.AssetContainer_2_67_0.ANCHOR_ID_PREFIX="adtechAdContainer_",com.adtech.AssetContainer_2_67_0.CONTENT_ID_PREFIX="adtechAdContent_",com.adtech.AssetContainer_2_67_0.DWELL_MIN_VIEWABLE_PERCENTAGE=50,com.adtech.AssetContainer_2_67_0.ACCEPTABLE_VIEW_AREA=37500,com.adtech.Utils_2_67_0.extend(com.adtech.AssetContainer_2_67_0,com.adtech.EventDispatcher_2_67_0),com.adtech.AssetContainer_2_67_0.prototype.init=function(a){var b=a.assetContainers[this.id];for(var c in b)if(b.hasOwnProperty(c))switch(c){case"isExpandable":b.type==com.adtech.AssetContainerFactory_2_67_0.INLINE_DIV?this[c]=!(b.contentWidth===b.contractedWidth&&b.contentHeight===b.contractedHeight):this[c]=b[c];break;case"isResponsive":this[c]=!0===b[c]&&b.contentType==com.adtech.ContentFactory_2_67_0.HTML&&b.type==com.adtech.AssetContainerFactory_2_67_0.INLINE_DIV;break;default:this[c]=b[c]}this.uid=this.id.replace(/[ \/\.-]/g,"_")+"_"+a.adServerVars.uid,this.contentId=com.adtech.AssetContainer_2_67_0.CONTENT_ID_PREFIX+this.uid,this.addRenderEventListeners(),this.content=com.adtech.ContentFactory_2_67_0.getContent(this.contentType,this,a,this.id,this.adEventBus,this.globalEventBus,this.contentId),com.adtech.Utils_2_67_0.getConfigOverride(a,"forcePageLoad")&&this.content.forcePageLoad(),com.adtech.Utils_2_67_0.addCustomEventHandler(this.adEventBus,this,a.events)},com.adtech.AssetContainer_2_67_0.prototype.addRenderEventListeners=function(){this.globalEventBus.addEventListener(this.rmEvent.DOM_LOAD,this.coreLibEventHandler,this),this.globalEventBus.addEventListener(this.rmEvent.PAGE_LOAD,this.coreLibEventHandler,this),this.adEventBus.addEventListener(this.rmEvent.SERVE,this.coreLibEventHandler,this),this.adEventBus.addEventListener(this.rmEvent.ENGAGEMENT,this.coreLibEventHandler,this)},com.adtech.AssetContainer_2_67_0.prototype.checkRenderEvent=function(a){this.rendered||a!=this.renderEvent||this.render()},com.adtech.AssetContainer_2_67_0.prototype.render=function(){this.rendered||this.closed||(this.rendered=!0,this.visible=!0,this.dispatchEvent(this.rmEvent.RENDER))},com.adtech.AssetContainer_2_67_0.prototype.getContent=function(){return this.content},com.adtech.AssetContainer_2_67_0.prototype.dispatchMouseOverEvent=function(){this.mouseIsOver||(this.dispatchEvent(this.rmEvent.MOUSE_OVER),this.mouseIsOver=!0)},com.adtech.AssetContainer_2_67_0.prototype.dispatchMouseOutEvent=function(){this.mouseIsOver&&(this.dispatchEvent(this.rmEvent.MOUSE_OUT),this.mouseIsOver=!1)},com.adtech.AssetContainer_2_67_0.prototype.dispatchInViewportEvent=function(){this.visibleinViewport||(this.visibleinViewport=!0,this.dispatchEvent(this.rmEvent.IN_VIEWPORT))},com.adtech.AssetContainer_2_67_0.prototype.dispatchOutViewportEvent=function(){this.visibleinViewport&&(this.visibleinViewport=!1,this.dispatchEvent(this.rmEvent.OUT_VIEWPORT))},com.adtech.AssetContainer_2_67_0.prototype.setFloatingOffsets=function(){var a=com.adtech.Utils_2_67_0.getViewportDims(),b=com.adtech.Utils_2_67_0.calculateAbsolutePosition(document.getElementById(this.advertAnchorId));switch(this.xRel){case com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_RIGHT:this.floatOffsetLeft=a.w;break;case com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_CENTER:var c=a.w/2;this.floatOffsetLeft=this.x<0&&c+this.x<0?-this.x:c;break;case com.adtech.AssetContainerAlignmentOption_2_67_0.AD_SLOT_LEFT:this.floatOffsetLeft=b.x;break;default:this.floatOffsetLeft=0}switch(this.yRel){case com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_BOTTOM:this.floatOffsetTop=a.h;break;case com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_CENTER:var d=a.h/2;this.floatOffsetTop=this.y<0&&d+this.y<0?-this.y:d;break;case com.adtech.AssetContainerAlignmentOption_2_67_0.AD_SLOT_TOP:this.floatOffsetTop=b.y;break;default:this.floatOffsetTop=0}},com.adtech.AssetContainer_2_67_0.prototype.show=function(){this.visible=!0},com.adtech.AssetContainer_2_67_0.prototype.hide=function(){this.dispatchMouseOutEvent(),this.visible=!1,this.dispatchEvent(this.rmEvent.HIDE)},com.adtech.AssetContainer_2_67_0.prototype.expand=function(){this.isExpandable&&(this.isExpanded=!0,this.dispatchEvent(this.rmEvent.EXPANDED))},com.adtech.AssetContainer_2_67_0.prototype.contract=function(){this.isExpandable&&(this.isExpanded=!1,this.dispatchEvent(this.rmEvent.CONTRACTED))},com.adtech.AssetContainer_2_67_0.prototype.reload=function(){},com.adtech.AssetContainer_2_67_0.prototype.close=function(){this.dispatchMouseOutEvent(),this.content.remove(),this.content=null,this.rendered=!1,this.closed=!0,this.dispatchEvent(this.rmEvent.CLOSE)},com.adtech.AssetContainer_2_67_0.prototype.coreLibEventHandler=function(a){this.checkRenderEvent(a.type),a.type==this.rmEvent.ENGAGEMENT&&this.autoCloseTimeout&&clearTimeout(this.autoCloseTimeout)},com.adtech.AssetContainer_2_67_0.prototype.customEventHandler=function(a){a.target!=this.content&&this.checkRenderEvent(a.type)},com.adtech.DivContainer_2_67_0=function(a,b,c,d,e){this.isExpanded=!1,this.visible=!1,this.anchorDiv=null,this.div=null,this.anchorDivAttemptIntervals=[10,20,50,100,200,500],this.anchorStartWidth=1,this.anchorStartHeight=0,this.dimensionUnits="px",this.preventRender=!1,this.forceRender=!1,com.adtech.DivContainer_2_67_0.supa.constructor.call(this,a,b,c,d,e),this.setAnchorDivStyle(),this.createAnchorDiv()},com.adtech.Utils_2_67_0.extend(com.adtech.DivContainer_2_67_0,com.adtech.AssetContainer_2_67_0),com.adtech.DivContainer_2_67_0.SCALE_UP="u",com.adtech.DivContainer_2_67_0.SCALE_DOWN="d",com.adtech.DivContainer_2_67_0.ANIMATION_PERIOD=40,com.adtech.DivContainer_2_67_0.ZINDEX_BUMP=10,com.adtech.DivContainer_2_67_0.DOM_LOAD_TIMEOUT=2e3,com.adtech.DivContainer_2_67_0.prototype.init=function(a){com.adtech.DivContainer_2_67_0.supa.init.call(this,a),this.parent.renderingInFiF&&com.adtech.IframeUtils_2_67_0.topOrSelf()!=self&&(this.containingIframe=com.adtech.IframeUtils_2_67_0.getTargetParentIframeEle(top)),this.setCoreLibPageEventListeners(!0),this.isExpandable&&(this.isExpanded=!this.startContracted),this.setClipStyle();var b=com.adtech.Utils_2_67_0.getConfigOverride(a,"domLoadTimeout");this.DOMLoadTimeout=null!=b?b:com.adtech.DivContainer_2_67_0.DOM_LOAD_TIMEOUT,this.parent.renderingInSafeframe&&com.adtech.SafeframeUtils_2_67_0.register(this.width,this.height,com.adtech.Utils_2_67_0.createClosure(this,this.statusEventHandler))},com.adtech.DivContainer_2_67_0.prototype.getAnchorDivDisplayStyle=function(){return com.adtech.Utils_2_67_0.isIEQuirksMode()?"inline":"inline-block"},com.adtech.DivContainer_2_67_0.prototype.setClipStyle=function(){this.initialClipStyle=this.isExpandable&&this.startContracted?this.getClippedStyle():this.getUnclippedStyle()},com.adtech.DivContainer_2_67_0.prototype.setCoreLibPageEventListeners=function(a){for(var b=[this.rmEvent.PAGE_RESIZE,this.rmEvent.PAGE_SCROLL,this.rmEvent.ORIENTATION_CHANGE],c=0;c<b.length;c++)a?this.globalEventBus.addEventListener(b[c],this.coreLibEventHandler,this):this.globalEventBus.removeEventListener(b[c],this.coreLibEventHandler,this)},com.adtech.DivContainer_2_67_0.prototype.calculateAbsolutePosition=function(){var a=com.adtech.Utils_2_67_0.calculateAbsolutePosition(this.containingIframe?this.containingIframe:this.div);this.absTop=a.y,this.absLeft=a.x},com.adtech.DivContainer_2_67_0.prototype.getVisibleDims=function(){return this.containingIframe?{w:parseInt(com.adtech.Utils_2_67_0.getComputedStyle(this.containingIframe,"width")),h:parseInt(com.adtech.Utils_2_67_0.getComputedStyle(this.containingIframe,"height"))}:(this.isResponsive&&(this.width=parseInt(com.adtech.Utils_2_67_0.getComputedStyle(this.div,"width")),this.height=parseInt(com.adtech.Utils_2_67_0.getComputedStyle(this.div,"height"))),this.isExpanded?{w:this.contentWidth,h:this.contentHeight}:{w:this.width,h:this.height})},com.adtech.DivContainer_2_67_0.prototype.getVisiblePos=function(){return this.isExpanded?{l:this.absLeft,t:this.absTop}:{l:this.absLeft+this.contractedX,t:this.absTop+this.contractedY}},com.adtech.DivContainer_2_67_0.prototype.setInitialVisibilityState=function(){if(this.parent.renderingInSafeframe)this.checkAssetVisibility();else{var a=com.adtech.Utils_2_67_0.getViewportDims(this.parent.renderingInFiF),b=com.adtech.Utils_2_67_0.getPageOffsets(this.parent.renderingInFiF);this.calculateAbsolutePosition(),this.checkAssetVisibility(b.x,b.y,a.w,a.h)}},com.adtech.DivContainer_2_67_0.prototype.checkRenderEvent=function(a){this.rendered||a!=this.renderEvent||this.globalEventBus.DOMLoaded||this.addDOMLoadRenderTimeout(),com.adtech.DivContainer_2_67_0.supa.checkRenderEvent.call(this,a)},com.adtech.DivContainer_2_67_0.prototype.addDOMLoadRenderTimeout=function(){if(!this.globalEventBus.DOMLoaded&&!this.DOMLoadRenderTimeout){var a=this;this.DOMLoadRenderTimeout=setTimeout(function(){a.forceRendering()},this.DOMLoadTimeout)}},com.adtech.DivContainer_2_67_0.prototype.forceRendering=function(){this.forceRender=!0,"undefined"!=typeof com.adtech.swfobject_2_67_0&&com.adtech.swfobject_2_67_0.forceSWFRender()},com.adtech.DivContainer_2_67_0.prototype.checkAssetVisibility=function(a,b,c,d){if(this.rendered&&!this.blockGeometricVisibilityCheck){var e,f;if(this.parent.renderingInSafeframe){var g=com.adtech.SafeframeUtils_2_67_0.getInViewPercentage();e=com.adtech.SafeframeUtils_2_67_0.getMaximumAdArea(),f=g/100*e}else{var h=this.getVisibleDims();if(a>=this.absLeft+h.w||this.absLeft-a>c)var i=0;else var j=a<this.absLeft?0:Math.abs(this.absLeft-a),k=Math.max(this.absLeft+h.w-c-a,0),i=h.w-j-k;if(b>=this.absTop+h.h||this.absTop-b>d)var l=0;else var m=b<this.absTop?0:Math.abs(this.absTop-b),n=Math.max(this.absTop+h.h-d-b,0),l=h.h-m-n;e=h.w*h.h,f=i*l}this.dispatchViewportEvents(f,e)}},com.adtech.DivContainer_2_67_0.prototype.dispatchViewportEvents=function(a,b){a>=b*(com.adtech.AssetContainer_2_67_0.DWELL_MIN_VIEWABLE_PERCENTAGE/100)||a>=com.adtech.AssetContainer_2_67_0.ACCEPTABLE_VIEW_AREA||this.stickyY?this.dispatchInViewportEvent():this.dispatchOutViewportEvent()},com.adtech.DivContainer_2_67_0.prototype.setAnchorDivStyle=function(){var a=this.width,b=this.height;this.pushesContent&&!this.startContracted&&(a=this.contentWidth,b=this.contentHeight),this.isResponsive&&(this.dimensionUnits="%",a=b=this.contentWidth=this.contentHeight=100),this.anchorDivStyle="position:relative;width:"+a+this.dimensionUnits+";height:"+b+this.dimensionUnits+";display:"+this.getAnchorDivDisplayStyle()+";z-index:"+this.zIndex+";",this.anchorStartWidth=a,this.anchorStartHeight=b},com.adtech.DivContainer_2_67_0.prototype.createAnchorDiv=function(){var a='<div id="'+this.advertAnchorId+'" style="'+this.anchorDivStyle+'"></div>',b=document.getElementById(this.advertAnchorId);if(b)this.anchorDiv=b;else{var c=this.getTargetIframeReference();if(c){if(this.anchorDiv=document.createElement("div"),this.anchorDiv.id=this.advertAnchorId,this.anchorDiv.style.position="relative",this.anchorDiv.style.width=this.anchorStartWidth+this.dimensionUnits,this.anchorDiv.style.height=this.anchorStartHeight+this.dimensionUnits,this.anchorDiv.style.zIndex=this.zIndex,this.type==com.adtech.AssetContainerFactory_2_67_0.INLINE_DIV){this.anchorDiv.style.margin="0";var d={marginTop:"marginTop",marginRight:"marginRight",marginBottom:"marginBottom",marginLeft:"marginLeft",paddingTop:"marginTop",paddingRight:"marginRight",paddingBottom:"marginBottom",paddingLeft:"marginLeft"};for(var e in d)if(d.hasOwnProperty(e)){var f=parseInt(com.adtech.Utils_2_67_0.getComputedStyle(c,e));if(!isNaN(f)){var g=parseInt(this.anchorDiv.style[d[e]]);this.anchorDiv.style[d[e]]=g+parseInt(f)+"px"}}this.anchorDiv.style.display=this.getAnchorDivDisplayStyle(),com.adtech.Utils_2_67_0.isIE()&&!com.adtech.Utils_2_67_0.isIEQuirksMode()&&(this.anchorDiv.style.clear="none"),c.style.width=c.style.height="0px",c.style.display="none"}else this.anchorDiv.style.display="block";c.parentNode.insertBefore(this.anchorDiv,c)}else this.writeAnchorDivHtml(a)}},com.adtech.DivContainer_2_67_0.prototype.writeAnchorDivHtml=function(a){document.write(a),this.anchorDiv=document.getElementById(this.advertAnchorId)},com.adtech.DivContainer_2_67_0.prototype.getTargetIframeReference=function(){var a=this.parent.targetIframe;return a="string"==typeof a?document.getElementById(a):a},com.adtech.DivContainer_2_67_0.prototype.createContentDiv=function(){this.isExpandable&&this.isMultiDirectionalExpand&&this.setMDEOverrides();var a="position:absolute;width:"+this.contentWidth+this.dimensionUnits+";height:"+this.contentHeight+this.dimensionUnits+";left:"+this.x+"px;top:"+this.y+"px;";this.isExpandable&&(a+="clip:"+this.initialClipStyle+";z-index:"+(this.zIndex+1)+";");var b='<div id="'+this.contentId+'" style="'+a+'"></div>',c=parseInt(this.parent.pubVars.overflowFixLevel);(isNaN(c)||0==c)&&(c=1),this.fixParentOverflow(c),this.anchorDiv.innerHTML=b},com.adtech.DivContainer_2_67_0.prototype.getClippedStyle=function(){return"rect("+this.contractedY+"px, "+(this.contractedX+this.contractedWidth)+"px, "+(this.contractedY+this.contractedHeight)+"px, "+this.contractedX+"px)"},com.adtech.DivContainer_2_67_0.prototype.getUnclippedStyle=function(a){var b=this.contentWidth,c=this.contentHeight;return"object"==typeof a&&("number"==typeof a.width&&(b=a.width),"number"==typeof a.height&&(c=a.height)),"rect(0px, "+b+"px, "+c+"px, 0px)"},com.adtech.DivContainer_2_67_0.prototype.setMDEOverrides=function(){var a=com.adtech.Utils_2_67_0.calculateAbsolutePosition(this.anchorDiv),b=(com.adtech.Utils_2_67_0.getDocumentWidth(),com.adtech.Utils_2_67_0.getDocumentHeight()),c=this.content.adConfig.assetContainers.main;this.expandsInPlaneY()&&(a.y+this.contentHeight<b||a.y<this.contentHeight-this.height?this.y=this.contractedY=c.y=c.contractedY=0:(this.y=c.y=this.height-this.contentHeight,this.contractedY=c.contractedY=Math.abs(this.y),this.pushesContent=!1)),this.expandsInPlaneX()&&(a.x>this.contentWidth-this.width?(this.x=c.x=this.width-this.contentWidth,this.contractedX=c.contractedX=Math.abs(this.x)):this.x=this.contractedX=c.x=c.contractedX=0),this.setClipStyle()},com.adtech.DivContainer_2_67_0.prototype.expandsInPlaneY=function(){return this.isExpandable&&this.contentHeight>this.height},com.adtech.DivContainer_2_67_0.prototype.expandsInPlaneX=function(){return this.isExpandable&&this.contentWidth>this.width},com.adtech.DivContainer_2_67_0.prototype.fixParentOverflow=function(a){if(!isNaN(a)&&0!=a)for(var b=this.anchorDiv.parentNode;b&&0!=a;)this.pushesContent?b.style.height="auto":b.style.overflow="visible",b=b.parentNode,a--},com.adtech.DivContainer_2_67_0.prototype.render=function(){if(!this.rendered&&!this.closed){if(!this.anchorDiv&&(this.anchorDiv=document.getElementById(this.advertAnchorId),!this.anchorDiv)){var a=this;return this.anchorDivAttemptIntervals.length>0?void setTimeout(com.adtech.Utils_2_67_0.createClosure(a,a.render),this.anchorDivAttemptIntervals.shift()):void 0}this.createContentDiv(),this.div=this.anchorDiv.ownerDocument.getElementById(this.contentId),this.addMouseListeners(),this.isExpandable&&this.isMultiDirectionalExpand&&!this.globalEventBus.DOMLoaded?this.globalEventBus.addEventListener(this.rmEvent.DOM_LOAD,this.content.render,this.content):this.content.render(),this.content.addEventListener(com.adtech.RichMediaEvent_2_67_0.READY,com.adtech.Utils_2_67_0.createClosure(this,this.contentReadyHandler)),com.adtech.DivContainer_2_67_0.supa.render.call(this),this.setInitialVisibilityState(),this.isExpandable&&this.isExpanded&&this.parent.renderingInSafeframe&&com.adtech.SafeframeUtils_2_67_0.expand(this,com.adtech.SafeframeUtils_2_67_0.prototype.safeframeObjFromClips(this.getClippedStyle(),this.getUnclippedStyle(),this.pushesContent));var a=this;setTimeout(com.adtech.Utils_2_67_0.createClosure(a,a.setInitialVisibilityState),com.adtech.Advert_2_67_0.VIEWABLE_IMPRESSION_THRESHOLD-300)}},com.adtech.DivContainer_2_67_0.prototype.addMouseListeners=function(){this.contentType==com.adtech.ContentFactory_2_67_0.FLASH&&"window"==this.wmode?(this.content.handleMouseEvents(),this.content.addEventListener(this.rmEvent.MOUSE_OVER,this.dispatchMouseOverEvent,this),this.content.addEventListener(this.rmEvent.MOUSE_OUT,this.dispatchMouseOutEvent,this)):(com.adtech.Utils_2_67_0.registerNativeEventHandler(this.div,"mouseover",com.adtech.Utils_2_67_0.createClosure(this,this.dispatchMouseOverEvent)),com.adtech.Utils_2_67_0.registerNativeEventHandler(this.div,"mouseout",com.adtech.Utils_2_67_0.createClosure(this,this.dispatchMouseOutEvent)))},com.adtech.DivContainer_2_67_0.prototype.anchorDivScaleStep=function(){var a=this.anchorDivScaleMode==com.adtech.DivContainer_2_67_0.SCALE_UP,b=parseInt(this.anchorDiv.style.height),c=a?b+this.animationStepDelta:b-this.animationStepDelta;if(this.currentAnimationStep<this.totalAnimationSteps)this.resizeContainer(c),this.anchorDiv.style.height=c+"px",this.currentAnimationStep++;else{var d=a?this.contentHeight:this.height;this.resizeContainer(d),this.anchorDiv.style.height=d+"px",this.resetAnimationInterval(),a||this.finaliseContract()}},com.adtech.DivContainer_2_67_0.prototype.resetAnimationInterval=function(){this.animationIntervalTimer&&(clearInterval(this.animationIntervalTimer),this.animationIntervalTimer=null)},com.adtech.DivContainer_2_67_0.prototype.animateAnchorDivScaling=function(){this.heightDelta=this.contentHeight-this.height,this.animationStepDelta=Math.floor(this.heightDelta*com.adtech.DivContainer_2_67_0.ANIMATION_PERIOD/(1e3*this.animationDuration)),this.totalAnimationSteps=Math.floor(this.heightDelta/this.animationStepDelta),this.currentAnimationStep=0,this.animationIntervalTimer=setInterval(com.adtech.Utils_2_67_0.createClosure(this,this.anchorDivScaleStep),com.adtech.DivContainer_2_67_0.ANIMATION_PERIOD)},com.adtech.DivContainer_2_67_0.prototype.expandAnchorDiv=function(){this.expandAnimationDuration?(this.resetAnimationInterval(),this.anchorDivScaleMode=com.adtech.DivContainer_2_67_0.SCALE_UP,this.animationDuration=this.expandAnimationDuration,this.animateAnchorDivScaling()):this.anchorDiv.style.height=this.contentHeight+"px"},com.adtech.DivContainer_2_67_0.prototype.contractAnchorDiv=function(){this.contractAnimationDuration?(this.resetAnimationInterval(),this.anchorDivScaleMode=com.adtech.DivContainer_2_67_0.SCALE_DOWN,this.animationDuration=this.contractAnimationDuration,this.animateAnchorDivScaling()):(this.anchorDiv.style.height=this.height+"px",this.finaliseContract())},com.adtech.DivContainer_2_67_0.prototype.resizeContainer=function(a){},com.adtech.DivContainer_2_67_0.prototype.show=function(){com.adtech.DivContainer_2_67_0.supa.show.call(this)},com.adtech.DivContainer_2_67_0.prototype.hide=function(){com.adtech.DivContainer_2_67_0.supa.hide.call(this)},com.adtech.DivContainer_2_67_0.prototype.expand=function(a){if(this.rendered&&this.isExpandable&&!this.isExpanded){this.pushesContent&&!this.parent.renderingInSafeframe&&this.expandAnchorDiv(),com.adtech.DivContainer_2_67_0.supa.expand.call(this);var b=this.getUnclippedStyle(a);this.div.style.clip=b,"undefined"!=typeof com.adtech.FlashContent_2_67_0&&this.content instanceof com.adtech.FlashContent_2_67_0&&this.content.resizeObject(this.rectObjFromClip(b)),this.anchorDiv.style.zIndex=this.zIndex+com.adtech.DivContainer_2_67_0.ZINDEX_BUMP,this.div.style.zIndex=this.zIndex+1+com.adtech.DivContainer_2_67_0.ZINDEX_BUMP,this.calculateAbsolutePosition(),this.parent.renderingInSafeframe&&com.adtech.SafeframeUtils_2_67_0.expand(this,com.adtech.SafeframeUtils_2_67_0.prototype.safeframeObjFromClips(this.getClippedStyle(),this.getUnclippedStyle(a),this.pushesContent))}},com.adtech.DivContainer_2_67_0.prototype.rectObjFromClip=function(a){
var b=/rect\s*\(\s*(\w+)\s*,\s*(\w+)\s*,\s*(\w+)\s*,\s*(\w+)\s*\)/i,c=b.exec(a);return{top:c[1],right:c[2],bottom:c[3],left:c[4]}},com.adtech.DivContainer_2_67_0.prototype.contract=function(){if(this.rendered&&this.isExpandable&&this.isExpanded){if(this.pushesContent&&!this.parent.renderingInSafeframe)return void this.contractAnchorDiv();this.finaliseContract()}},com.adtech.DivContainer_2_67_0.prototype.reload=function(){this.rendered?(this.content.remove(),this.content.forcePageLoad(),this.content.render(),this.show()):this.render()},com.adtech.DivContainer_2_67_0.prototype.finaliseContract=function(){com.adtech.DivContainer_2_67_0.supa.contract.call(this);var a=this.getClippedStyle();this.div.style.clip=a,"undefined"!=typeof com.adtech.FlashContent_2_67_0&&this.content instanceof com.adtech.FlashContent_2_67_0&&this.content.resizeObject(this.rectObjFromClip(a)),this.anchorDiv.style.zIndex=this.zIndex,this.div.style.zIndex=this.zIndex+1,this.calculateAbsolutePosition(),this.parent.renderingInSafeframe&&com.adtech.SafeframeUtils_2_67_0.collapse(this)},com.adtech.DivContainer_2_67_0.prototype.close=function(){if(this.rendered&&!this.closed){this.setCoreLibPageEventListeners(!1),com.adtech.DivContainer_2_67_0.supa.close.call(this);try{this.div.parentNode==this.anchorDiv?this.anchorDiv.parentNode.removeChild(this.anchorDiv):(this.div.parentNode.removeChild(this.div),this.anchorDiv.parentNode.removeChild(this.anchorDiv))}catch(a){}}},com.adtech.DivContainer_2_67_0.prototype.statusEventHandler=function(a,b){"geom-update"==a&&this.checkAssetVisibility()},com.adtech.DivContainer_2_67_0.prototype.coreLibEventHandler=function(a){if(com.adtech.DivContainer_2_67_0.supa.coreLibEventHandler.call(this,a),this.rendered)switch(a.type){case this.rmEvent.PAGE_SCROLL:case this.rmEvent.PAGE_RESIZE:this.calculateAbsolutePosition(),this.checkAssetVisibility(a.offsetX,a.offsetY,a.width,a.height);case this.rmEvent.DOM_LOAD:case this.rmEvent.PAGE_LOAD:this.setInitialVisibilityState()}},com.adtech.DivContainer_2_67_0.prototype.contentReadyHandler=function(a){if("undefined"!=typeof com.adtech.FlashContent_2_67_0&&this.content instanceof com.adtech.FlashContent_2_67_0&&this.isExpandable&&this.startContracted&&this.content.resizeObject(this.rectObjFromClip(this.getClippedStyle())),com.adtech.Utils_2_67_0.isChrome()){var b=this.div.style.left,c=this.div.style.top;this.div.style.left="",this.div.style.top="";var d=this;setTimeout(function(){d.div.style.left=b,d.div.style.top=c},10)}},com.adtech.FloatingDivContainer_2_67_0=function(a,b,c,d,e){this.isPercentageRendered=!1,com.adtech.FloatingDivContainer_2_67_0.supa.constructor.call(this,a,b,c,d,e)},com.adtech.Utils_2_67_0.extend(com.adtech.FloatingDivContainer_2_67_0,com.adtech.DivContainer_2_67_0),com.adtech.FloatingDivContainer_2_67_0.MODAL_COLOUR_CONTENT_VARIABLE="Overlay background colour",com.adtech.FloatingDivContainer_2_67_0.MODAL_OPACITY_CONTENT_VARIABLE="Overlay opacity",com.adtech.FloatingDivContainer_2_67_0.DEFAULT_MODAL_COLOUR="#000000",com.adtech.FloatingDivContainer_2_67_0.DEFAULT_MODAL_OPACITY="0.4",com.adtech.FloatingDivContainer_2_67_0.prototype.init=function(a){var b=a.assetContainers[this.id];"%"!=b.contentWidthUnit&&"%"!=b.contentHeightUnit||(a.assetContainers[this.id].isExpandable=!1),com.adtech.FloatingDivContainer_2_67_0.supa.init.call(this,a)},com.adtech.FloatingDivContainer_2_67_0.prototype.setInitialDimensions=function(){var a=com.adtech.Utils_2_67_0.getViewportDims();this.originalContentWidth=this.contentWidth,this.originalContentHeight=this.contentHeight,this.contentWidth="%"!=this.contentWidthUnit||this.isExpandable?this.contentWidth:com.adtech.Utils_2_67_0.calculatePercentValue(a.w,this.contentWidth),this.contentHeight="%"!=this.contentHeightUnit||this.isExpandable?this.contentHeight:com.adtech.Utils_2_67_0.calculatePercentValue(a.h,this.contentHeight),"%"!=this.contentHeightUnit&&"%"!=this.contentWidthUnit||this.isExpandable||(this.isPercentageRendered=!0,this.initialClipStyle=this.getUnclippedStyle())},com.adtech.FloatingDivContainer_2_67_0.prototype.checkRenderEvent=function(a){if(!this.preventRender&&!this.rendered&&a==this.renderEvent){if(!this.globalEventBus.DOMLoaded)return this.renderEvent=this.rmEvent.DOM_LOAD,void this.addDOMLoadRenderTimeout();com.adtech.FloatingDivContainer_2_67_0.supa.checkRenderEvent.call(this,a)}},com.adtech.FloatingDivContainer_2_67_0.prototype.forceRendering=function(){com.adtech.FloatingDivContainer_2_67_0.supa.forceRendering.call(this),this.render()},com.adtech.FloatingDivContainer_2_67_0.prototype.setAnchorDivStyle=function(){var a=targetHeight=1;this.anchorDivStyle="width:"+a+"px;height:"+targetHeight+"px;position:relative;"},com.adtech.FloatingDivContainer_2_67_0.prototype.createContentDiv=function(){if(this.modal&&this.createModalLayer(),this.setFloatingOffsets(),this.setInitialDimensions(),this.checkPublisherPositionalOverrides(),this.fixedPosition=!!(com.adtech.Utils_2_67_0.canUseFixedPositioning()&&this.stickyX&&this.stickyY),this.fixedPosition&&this.xRel==com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_RIGHT)var a=null,b=-this.x-this.contentWidth+"px";else var a=this.floatOffsetLeft+this.x+"px",b=null;if(this.fixedPosition&&this.yRel==com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_BOTTOM)var c=null,d=-this.y-this.contentHeight+"px";else var c=this.floatOffsetTop+this.y+"px",d=null;this.createDiv(this.contentId,this.fixedPosition?"fixed":"absolute",this.contentWidth+"px",this.contentHeight+"px",a,c,this.zIndex,this.initialClipStyle,b,d),this.checkCloseTimeout()},com.adtech.FloatingDivContainer_2_67_0.prototype.createDiv=function(a,b,c,d,e,f,g,h,i,j){var k=document.createElement("div");return k.setAttribute("id",a),k.style.position=b,k.style.width=c,k.style.height=d,e&&(k.style.left=e),i&&(k.style.right=i),f&&(k.style.top=f),j&&(k.style.bottom=j),k.style.zIndex=g,k.style.padding="0px",k.style.margin="0px",h&&(k.style.clip=h),this.forceRender?document.body.insertBefore(k,document.body.firstChild):document.body.appendChild(k),k},com.adtech.FloatingDivContainer_2_67_0.prototype.createModalLayer=function(){var a=com.adtech.Utils_2_67_0.getViewportDims();this.modalDiv=this.createDiv(this.contentId+"_modal","fixed",a.w+"px",a.h+"px","0px","0px",this.zIndex-1);var b=this.parent.getContentVariable(com.adtech.FloatingDivContainer_2_67_0.MODAL_OPACITY_CONTENT_VARIABLE),c=this.parent.getContentVariable(com.adtech.FloatingDivContainer_2_67_0.MODAL_COLOUR_CONTENT_VARIABLE),d=b||com.adtech.FloatingDivContainer_2_67_0.DEFAULT_MODAL_OPACITY,e=c||com.adtech.FloatingDivContainer_2_67_0.DEFAULT_MODAL_COLOUR;this.modalDiv.style.opacity=d,this.modalDiv.style.filter="alpha(opacity:"+100*parseFloat(d)+")",this.modalDiv.style.backgroundColor=0!=e.indexOf("#")?"#"+e:e,com.adtech.Utils_2_67_0.registerNativeEventHandler(this.modalDiv,"click",com.adtech.Utils_2_67_0.createClosure(this,this.modalClickHandler))},com.adtech.FloatingDivContainer_2_67_0.prototype.adjustModalDiv=function(a){this.modalDiv.style.width=a.width+"px",this.modalDiv.style.height=a.height+"px"},com.adtech.FloatingDivContainer_2_67_0.prototype.checkPublisherPositionalOverrides=function(){if(this.xRel==com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_LEFT){var a=parseInt(this.parent.pubVars.overrideX);this.x=isNaN(a)?this.x:a}if(this.yRel==com.adtech.AssetContainerAlignmentOption_2_67_0.PAGE_TOP){var b=parseInt(this.parent.pubVars.overrideY);this.y=isNaN(b)?this.y:b}},com.adtech.FloatingDivContainer_2_67_0.prototype.addStickyOffsets=function(a){this.stickyY&&(this.floatOffsetTop+=a.offsetY),this.stickyX&&(this.floatOffsetLeft+=a.offsetX)},com.adtech.FloatingDivContainer_2_67_0.prototype.resize=function(){var a=com.adtech.Utils_2_67_0.getViewportDims();"%"==this.contentWidthUnit&&(this.contentWidth=com.adtech.Utils_2_67_0.calculatePercentValue(a.w,this.originalContentWidth),this.div.style.width=this.contentWidth+"px"),"%"==this.contentHeightUnit&&(this.contentHeight=com.adtech.Utils_2_67_0.calculatePercentValue(a.h,this.originalContentHeight),this.div.style.height=this.contentHeight+"px"),this.visible&&(this.div.style.clip=this.getUnclippedStyle())},com.adtech.FloatingDivContainer_2_67_0.prototype.reposition=function(){if(this.rendered&&!this.closed){var a=com.adtech.AssetContainerAlignmentOption_2_67_0;(this.stickyX||this.xRel==a.AD_SLOT_LEFT)&&(this.div.style.left=this.floatOffsetLeft+this.x+"px"),(this.stickyY||this.yRel==a.AD_SLOT_TOP)&&(this.div.style.top=this.floatOffsetTop+this.y+"px")}},com.adtech.FloatingDivContainer_2_67_0.prototype.expandAnchorDiv=function(){},com.adtech.FloatingDivContainer_2_67_0.prototype.contractAnchorDiv=function(){},com.adtech.FloatingDivContainer_2_67_0.prototype.render=function(){if(!this.forceRender&&!this.globalEventBus.DOMLoaded)return void this.globalEventBus.addEventListener(this.rmEvent.DOM_LOAD,com.adtech.Utils_2_67_0.createClosure(this,this.render));com.adtech.FloatingDivContainer_2_67_0.supa.render.call(this)},com.adtech.FloatingDivContainer_2_67_0.prototype.checkCloseTimeout=function(){var a="0"==this.parent.pubVars.closeTimeout?0:this.parent.pubVars.closeTimeout,b=a||this.closeTimeout,c=parseInt(b);if(!isNaN(c)&&c){var d=this,e=this.isTiedToAnInPageUnit()?this.rmEvent.HIDE:this.rmEvent.CLOSE;this.autoCloseTimeout=setTimeout(com.adtech.Utils_2_67_0.createClosure(d.content,d.content.dispatchAdvertLevelEvent,new d.rmEvent(e)),1e3*c)}},com.adtech.FloatingDivContainer_2_67_0.prototype.isTiedToAnInPageUnit=function(){for(var a in this.parent.assetContainers)if(this.parent.assetContainers.hasOwnProperty(a)){var b=this.parent.assetContainers[a];if(this.id!=b.id&&!(b instanceof com.adtech.FloatingDivContainer_2_67_0))return!0}return!1},com.adtech.FloatingDivContainer_2_67_0.prototype.show=function(){if(!this.rendered)return void this.render();!this.visible&&this.rendered&&(this.div.style.clip=this.preHiddenClipStyle,this.div.style.zIndex++,this.modalDiv&&(this.modalDiv.style.visibility="visible"),this.content.contentObject.style.display="block",com.adtech.FloatingDivContainer_2_67_0.supa.show.call(this))},com.adtech.FloatingDivContainer_2_67_0.prototype.hide=function(){this.rendered&&this.visible&&(this.preHiddenClipStyle=this.div.style.clip,this.div.style.clip="rect(0px, 0px, 0px, 0px)",this.div.style.zIndex--,this.modalDiv&&(this.modalDiv.style.visibility="hidden"),com.adtech.FloatingDivContainer_2_67_0.supa.hide.call(this))},com.adtech.FloatingDivContainer_2_67_0.prototype.close=function(){if(this.rendered&&!this.closed){if(this.setCoreLibPageEventListeners(!1),this.closeDelayTimeout)return;this.div.style.visibility="hidden";var a=this;this.closeDelayTimeout=setTimeout(function(){com.adtech.DivContainer_2_67_0.supa.close.call(a),a.div.parentNode.removeChild(a.div),a.modalDiv&&a.modalDiv.parentNode.removeChild(a.modalDiv)},100)}},com.adtech.FloatingDivContainer_2_67_0.prototype.modalClickHandler=function(){this.content.dispatchAdvertLevelEvent(new this.rmEvent(this.rmEvent.CLOSE))},com.adtech.FloatingDivContainer_2_67_0.prototype.coreLibEventHandler=function(a){if(this.xRel==com.adtech.AssetContainerAlignmentOption_2_67_0.AD_SLOT_LEFT||this.yRel==com.adtech.AssetContainerAlignmentOption_2_67_0.AD_SLOT_TOP||this.stickyX||this.stickyY)switch(a.type){case this.rmEvent.PAGE_SCROLL:case this.rmEvent.PAGE_RESIZE:case this.rmEvent.ORIENTATION_CHANGE:if(this.setFloatingOffsets(),!this.fixedPosition){this.addStickyOffsets(a);try{this.reposition()}catch(c){}}}if(this.isPercentageRendered&&this.rendered&&(a.type==this.rmEvent.PAGE_RESIZE||a.type==this.rmEvent.PAGE_SCROLL)){this.resize();var b=new this.rmEvent(this.rmEvent.RESIZE).property("containerId",this.id).property("availableHeight",this.contentHeight).property("availableWidth",this.contentWidth).property("viewable",this.visibleinViewport);this.dispatchEvent(b)}a.type==this.rmEvent.ENGAGEMENT&&null!=this.autoCloseTimeout&&clearTimeout(this.autoCloseTimeout),this.modalDiv&&a.type==this.rmEvent.PAGE_RESIZE&&this.adjustModalDiv(a),com.adtech.FloatingDivContainer_2_67_0.supa.coreLibEventHandler.call(this,a)},com.adtech.NoContentContainer_2_67_0=function(a,b,c,d,e){com.adtech.NoContentContainer_2_67_0.supa.constructor.call(this,a,b,c,d,e)},com.adtech.Utils_2_67_0.extend(com.adtech.NoContentContainer_2_67_0,com.adtech.AssetContainer_2_67_0),com.adtech.NoContentContainer_2_67_0.prototype.init=function(a){var b=a.assetContainers[this.id];for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.visibleinViewport=!0,this.addRenderEventListeners()},com.adtech.AssetContainerFactory_2_67_0=function(){},com.adtech.AssetContainerFactory_2_67_0.CHROMELESS_POPUP="chromelessPopup",com.adtech.AssetContainerFactory_2_67_0.POPUP="popup",com.adtech.AssetContainerFactory_2_67_0.INLINE_DIV="inlineDiv",com.adtech.AssetContainerFactory_2_67_0.FLOATING_DIV="floatingDiv",com.adtech.AssetContainerFactory_2_67_0.NO_CONTENT="noContent",com.adtech.AssetContainerFactory_2_67_0.getContainer=function(a,b,c,d,e,f){switch(a){case this.CHROMELESS_POPUP:return new("undefined"==typeof com.adtech.debugLogger_2_67_0?com.adtech.ChromelessWindowContainer_2_67_0:com.adtech.PreviewChromelessWindowContainer_2_67_0)(b,c,d,e,f);case this.POPUP:return new com.adtech.WindowContainer_2_67_0(b,c,d,e,f);case this.INLINE_DIV:return new com.adtech.DivContainer_2_67_0(b,c,d,e,f);case this.FLOATING_DIV:return new com.adtech.FloatingDivContainer_2_67_0(b,c,d,e,f);case this.NO_CONTENT:return new com.adtech.NoContentContainer_2_67_0(b,c,d,e,f);default:return null}},com.adtech.HtmlContent_2_67_0=function(a,b,c,d,e,f){com.adtech.HtmlContent_2_67_0.supa.constructor.call(this),this.parent=a,this.eventBus=d,this.containerObject=null,this.shouldHandleMouseEvents=!1,this.mouseIsOver=null,this.contentReady=!1,this.outgoingMessageQueue=[],this.contentObject=null,this.globalEventBus=e,this.rendered=!1,this.DOMContext=document,this.windowContext=window,this.advertRef=this.parent.parent,this.targetId=f,this.pageLoadForced=!1,this.isStaticContent=!1,this.contentIsOne=!1,this.init(b,c)},com.adtech.Utils_2_67_0.extend(com.adtech.HtmlContent_2_67_0,com.adtech.EventDispatcher_2_67_0),com.adtech.HtmlContent_2_67_0.QUEUED_MESSAGE_PUSH_DELAY=50,com.adtech.HtmlContent_2_67_0.prototype.init=function(a,b){var c=a.assetContainers[b];this.content=c.content,this.langVersion=c.langVersion?c.langVersion:0,this.width=this.renderWidthAsPercentage(c)?"100%":c.contentWidth,this.height=this.renderHeightAsPercentage(c)?"100%":c.contentHeight;var d=com.adtech.RichMediaEvent_2_67_0;this.globalEventBus.addEventListener(d.PAGE_LOAD,this.customEventHandler,this),this.globalEventBus.addEventListener(d.PAGE_RESIZE,this.customEventHandler,this),this.globalEventBus.addEventListener(d.PAGE_SCROLL,this.customEventHandler,this),com.adtech.Utils_2_67_0.addCustomEventHandler(this.eventBus,this,a.events);for(var e=[d.ENGAGEMENT,d.IN_VIEWPORT,d.OUT_VIEWPORT,d.INTERACTIVE_IMPRESSION],f=0;f<e.length;f++)this.eventBus.addEventListener(e[f],this.customEventHandler,this);this.setAdConfig(a),this.parent.addEventListener(d.MOUSE_OVER,this.customEventHandler,this),this.parent.addEventListener(d.MOUSE_OUT,this.customEventHandler,this),this.parent.addEventListener(d.VIEWABLE_CHANGE,this.customEventHandler,this),this.parent.addEventListener(d.CONTAINER_RESIZE,this.customEventHandler,this)},com.adtech.HtmlContent_2_67_0.prototype.setAdConfig=function(a){this.adConfig=a,"undefined"!=typeof com.adtech.debugLogger_2_67_0&&(this.adConfig.adtechDisableClickTracking=!0)},com.adtech.HtmlContent_2_67_0.prototype.renderWidthAsPercentage=function(a){return a.isResponsive||this.containerIsFloatingDiv(a)&&!a.isExpandable&&"%"==a.contentWidthUnit},com.adtech.HtmlContent_2_67_0.prototype.renderHeightAsPercentage=function(a){return a.isResponsive||this.containerIsFloatingDiv(a)&&!a.isExpandable&&"%"==a.contentHeightUnit},com.adtech.HtmlContent_2_67_0.prototype.containerIsFloatingDiv=function(a){return a.type==com.adtech.AssetContainerFactory_2_67_0.FLOATING_DIV},com.adtech.HtmlContent_2_67_0.prototype.setDOMContext=function(a){this.DOMContext=a},com.adtech.HtmlContent_2_67_0.prototype.setWindowContext=function(a){this.windowContext=a},com.adtech.HtmlContent_2_67_0.prototype.render=function(){this.containerObject=this.DOMContext.getElementById(this.targetId),this.renderContent(),this.rendered=!0,this.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.RENDER)},com.adtech.HtmlContent_2_67_0.prototype.forcePageLoad=function(){this.dispatchToContent(this.createContentEvent(new com.adtech.RichMediaEvent_2_67_0(com.adtech.RichMediaEvent_2_67_0.PAGE_LOAD))),this.pageLoadForced=!0},com.adtech.HtmlContent_2_67_0.prototype.getWindowScript=function(){return""},com.adtech.HtmlContent_2_67_0.prototype.renderContent=function(){if(com.adtech.Utils_2_67_0.fileIsImage(this.content))this.isStaticContent=!0,this.containerObject.innerHTML=this.advertRef.getBackupImageHTML(this.content),this.contentInitialised();else{var a=this.targetId+"_iframe";this.addPostMessageListener();var b=this.advertRef.getFileUrl(this.content);this.globalEventBus.pageLoaded&&this.forcePageLoad(),this.contentOrigin=b.split("/").splice(0,3).join("/");var c=document.createElement("iframe");c.src=b,c.seamless="seamless",c.width=this.width,c.height=this.height,c.id=a,c.name=a,c.style.padding="0px",c.style.border="0px none transparent",c.style.width=this.width.toString().match("%")?this.width:this.width+"px",c.style.height=this.height.toString().match("%")?this.height:this.height+"px",c.scrolling="no",c.frameBorder="no",c.allowtransparency=!0,com.adtech.IframeUtils_2_67_0.applyAllowFullScreenAttribute(c),com.adtech.Utils_2_67_0.isWebkit()&&(c.style.visibility="hidden",setTimeout(function(){c.style.visibility="visible"},200)),com.adtech.IframeUtils_2_67_0.isInFriendlyIframe()&&this.addAllowFullscreenAttribute(),this.containerObject.appendChild(c),this.contentObject=this.DOMContext.getElementById(a)}},com.adtech.HtmlContent_2_67_0.prototype.addAllowFullscreenAttribute=function(){for(var a=window.parent.document.getElementsByTagName("iframe"),b=0;b<a.length;b++)a[b].contentWindow==window&&com.adtech.IframeUtils_2_67_0.applyAllowFullScreenAttribute(a[b])},com.adtech.HtmlContent_2_67_0.prototype.getContentEnvironment=function(){return com.adtech.HtmlContent_2_67_0.ENVIRONMENT_WEB},com.adtech.HtmlContent_2_67_0.prototype.remove=function(){"undefined"!=typeof this.containerObject&&this.rendered&&(this.containerObject.innerHTML="",this.rendered=!1,this.contentReady=!1,this.adContentWindow&&(this.adContentWindow=null))},com.adtech.HtmlContent_2_67_0.prototype.handleMouseEvents=function(){this.shouldHandleMouseEvents=!0},com.adtech.HtmlContent_2_67_0.prototype.contentInitialised=function(){this.contentReady=!0,this.outgoingMessageQueue.length>0&&this.sendQueuedMessagesToContent(),this.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.READY)},com.adtech.HtmlContent_2_67_0.prototype.addToOutgoingQueue=function(a){this.outgoingMessageQueue[this.outgoingMessageQueue.length]=a},com.adtech.HtmlContent_2_67_0.prototype.sendQueuedMessagesToContent=function(){this.dispatchToContent(this.outgoingMessageQueue.shift()),this.outgoingMessageQueue.length>0&&setTimeout(com.adtech.Utils_2_67_0.createClosure(this,this.sendQueuedMessagesToContent),com.adtech.HtmlContent_2_67_0.QUEUED_MESSAGE_PUSH_DELAY)},com.adtech.HtmlContent_2_67_0.prototype.createContentEventProperties=function(a){var b={},c=["type","target","currentTarget"];for(var d in a)if(a.hasOwnProperty(d)){if(com.adtech.Utils_2_67_0.inArray(d,c)||"function"==typeof a[d])continue;b[d]=a[d]}return b},com.adtech.HtmlContent_2_67_0.prototype.dispatchToContent=function(a){!this.isStaticContent&&this.contentReady?this.sendMessage(this.constructMessage(com.adtech.HtmlContent_2_67_0.CMD_TYPE_DISPATCH,a)):this.addToOutgoingQueue(a)},com.adtech.HtmlContent_2_67_0.prototype.dispatchAdvertLevelEvent=function(a){a.target=this,this.eventBus.dispatchEvent(a)},com.adtech.HtmlContent_2_67_0.prototype.createContentEvent=function(a){if(this.isStaticContent)return null;var b={type:a.type},c=this.createContentEventProperties(a);for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);return b},com.adtech.HtmlContent_2_67_0.prototype.addPostMessageListener=function(){this.contentOrigin||com.adtech.Utils_2_67_0.registerNativeEventHandler(this.windowContext,"message",com.adtech.Utils_2_67_0.createClosure(this,this.postMessageHandler))},com.adtech.HtmlContent_2_67_0.prototype.constructMessage=function(a,b){var c="";return this.contentIsOne?c=JSON.stringify({cmd:a,msg:b}):(c=a,b.adConfig&&(b.adConfig=JSON.stringify(b.adConfig)),c+=b!=undefined?com.adtech.HtmlContent_2_67_0.OBJECT_DELIM+JSON.stringify(b):""),c},com.adtech.HtmlContent_2_67_0.prototype.sendMessage=function(a){"undefined"!=typeof this.adContentWindow&&this.adContentWindow.postMessage(a,this.contentOrigin)},com.adtech.HtmlContent_2_67_0.prototype.sendEnvironmentInfo=function(){var a={env:this.getContentEnvironment()};this.sendMessage(this.constructMessage(com.adtech.HtmlContent_2_67_0.CMD_TYPE_INIT,a))},com.adtech.HtmlContent_2_67_0.prototype.sendConfig=function(){this.adConfig.clickDestinations={},this.adConfig.overrides&&delete this.adConfig.overrides,this.adConfig.rmLibVersion="2_67_0";var a={adConfig:this.adConfig,id:this.parent.id};this.sendMessage(this.constructMessage(com.adtech.HtmlContent_2_67_0.CMD_TYPE_INIT,a)),this.contentInitialised()},com.adtech.HtmlContent_2_67_0.prototype.constructMessageObject=function(a){var b={};try{b=JSON.parse(a),b.payload=b.msg}catch(d){var c=a.split(com.adtech.HtmlContent_2_67_0.OBJECT_DELIM);b.cmd=c[0],c.length>1&&(b.payload=JSON.parse(c[1]))}return b},com.adtech.HtmlContent_2_67_0.prototype.setMessageFormat=function(a){this.contentIsOne="one"==a},com.adtech.HtmlContent_2_67_0.prototype.getTypeEventFromMessage=function(a){var b="",c=com.adtech.Advert_2_67_0;return a.content&&(b+=a.content+c.CONTENT_SEPARATOR,a.contentItem&&a.contentItem[c.CONTENT_PROPERTY_TRACKING_KEY]&&(a.childContent&&a.contentItem[c.CONTENT_PROPERTY_PARENT_TRACKING_KEY]&&(b+=a.contentItem[c.CONTENT_PROPERTY_PARENT_TRACKING_KEY]),b+=a.contentItem[c.CONTENT_PROPERTY_TRACKING_KEY]+c.CONTENT_SEPARATOR)),b+=a.name},com.adtech.HtmlContent_2_67_0.prototype.getParamsFromMessage=function(a){var b=a.params||{};switch(a.method){case"logClick":return[b.identifier,b.overrideUrl,b.meta];case"contentClick":case"contentView":return[b.content,b.contentItem];default:return[b]}},com.adtech.HtmlContent_2_67_0.prototype.logClick=function(a,b,c){this.advertRef.logClick(a,b,c)},com.adtech.HtmlContent_2_67_0.prototype.touchStart=function(){this.advertRef.setTouchDeviceProperties()},com.adtech.HtmlContent_2_67_0.prototype.contentView=function(a,b){this.advertRef.contentView(a,b)},com.adtech.HtmlContent_2_67_0.prototype.contentClick=function(a,b){this.advertRef.contentClick(a,b)},com.adtech.HtmlContent_2_67_0.prototype.timerAction=function(a){var b=a.action,c=a.name,d=a.meta||{};switch(b){case"start":var e=this.advertRef.getTimer(c);return com.adtech.Utils_2_67_0.mergeObjects(e.meta,d),void this.advertRef.startTimer(c);case"stop":var e=this.advertRef.getTimer(c);return e.meta.percentage=null,com.adtech.Utils_2_67_0.mergeObjects(e.meta,d),e.meta.custom=!0,void this.advertRef.logTimerValue(c)}},com.adtech.HtmlContent_2_67_0.prototype.shouldAcceptMessage=function(a){return!(a.origin!=this.contentOrigin||!this.contentObject||!this.contentObject.contentWindow||this.contentObject.contentWindow!=a.source)},com.adtech.HtmlContent_2_67_0.prototype.mouseOverHandler=function(){this.mouseIsOver||(this.mouseIsOver=!0,this.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.MOUSE_OVER))},com.adtech.HtmlContent_2_67_0.prototype.mouseOutHandler=function(){this.mouseIsOver&&(this.mouseIsOver=!1,this.dispatchEvent(com.adtech.RichMediaEvent_2_67_0.MOUSE_OUT))},com.adtech.HtmlContent_2_67_0.prototype.postMessageHandler=function(a){if(!this.shouldAcceptMessage(a))return!1;this.adContentWindow=this.adContentWindow||a.source;var b=this.constructMessageObject(a.data);switch(b.cmd){case com.adtech.HtmlContent_2_67_0.CMD_TYPE_INIT:b.payload&&this.setMessageFormat(b.payload.format),this.sendEnvironmentInfo(),this.sendConfig();break;case com.adtech.HtmlContent_2_67_0.CMD_TYPE_DISPATCH:this.contentIsOne&&(b.payload.type=this.getTypeEventFromMessage(b.payload));var a=new com.adtech.RichMediaEvent_2_67_0(b.payload.type);"object"==typeof b.payload.meta&&(a.meta=b.payload.meta,a.suppressLogging=b.payload.suppressLogging),this.dispatchAdvertLevelEvent(a);break;case com.adtech.HtmlContent_2_67_0.CMD_TYPE_EXEC:(this.contentIsOne||"timerAction"===b.payload.method)&&(b.payload.params=this.getParamsFromMessage(b.payload)),this[b.payload.method].apply(this,b.payload.params)}return!0},com.adtech.HtmlContent_2_67_0.prototype.customEventHandler=function(a){var b=com.adtech.RichMediaEvent_2_67_0;if(!(a.target==this||this.pageLoadForced&&a.type==b.PAGE_LOAD)){switch(a.type){case b.PAGE_LOAD:case b.PAGE_RESIZE:case b.PAGE_SCROLL:a.availableWidth=a.width,a.availableHeight=a.height,a.scrollOffsetTop=a.offsetY,a.scrollOffsetLeft=a.offsetX}this.dispatchToContent(this.createContentEvent(a))}},com.adtech.HtmlContent_2_67_0=com.adtech.HtmlContent_2_67_0||function(){},com.adtech.HtmlContent_2_67_0.CMD_TYPE_DISPATCH="dispatch",com.adtech.HtmlContent_2_67_0.CMD_TYPE_EXEC="exec",com.adtech.HtmlContent_2_67_0.CMD_TYPE_INIT="init",com.adtech.HtmlContent_2_67_0.CMD_TYPE_MRAID="CMD_MRAID",com.adtech.HtmlContent_2_67_0.CMD_TYPE_VPAID="CMD_VPAID",com.adtech.HtmlContent_2_67_0.PROPERTY_DELIM="A$T$P",com.adtech.HtmlContent_2_67_0.OBJECT_DELIM="A#T#O",com.adtech.HtmlContent_2_67_0.KEY_VALUE_DELIM="#:#",com.adtech.HtmlContent_2_67_0.ENVIRONMENT_WEB="WEB",com.adtech.HtmlContent_2_67_0.ENVIRONMENT_MRAID="MRAID",com.adtech.HtmlContent_2_67_0.ENVIRONMENT_ORMMA="ORMMA",com.adtech.HtmlContent_2_67_0.ENVIRONMENT_VPAID="VPAID",com.adtech.NoContent_2_67_0=function(a,b,c,d,e,f){com.adtech.NoContent_2_67_0.supa.constructor.call(this,a,b,c,d,e,f)},com.adtech.Utils_2_67_0.extend(com.adtech.NoContent_2_67_0,com.adtech.HtmlContent_2_67_0),com.adtech.NoContent_2_67_0.prototype.renderContent=function(){},com.adtech.FlashContent_2_67_0=function(a,b,c,d,e,f){this.params={},this.objectResizingEnabled=!1,com.adtech.FlashContent_2_67_0.supa.constructor.call(this,a,b,c,d,e,f)},com.adtech.Utils_2_67_0.extend(com.adtech.FlashContent_2_67_0,com.adtech.HtmlContent_2_67_0),com.adtech.FlashContent_2_67_0.prototype.init=function(a,b){com.adtech.FlashContent_2_67_0.supa.init.call(this,a,b);var c=a.assetContainers[b];this.externalInterfaceHandler=this.targetId+"_handler",this.params.menu="false",this.params.allowscriptaccess="always",this.params.allowFullScreen="true",this.params.wmode=c.wmode,this.flashVersion=c.pluginVersion,this.createFlashVars(a);var d=com.adtech.Utils_2_67_0;if(d.isMac()&&(d.isSafari()||d.isFirefox())){var e=this.generateAlignmentValue(c);e&&(this.objectResizingEnabled=!0,this.flashVars.salign=e,this.flashVars.scaleMode="noScale",this.startContracted=c.startContracted)}},com.adtech.FlashContent_2_67_0.prototype.generateAlignmentValue=function(a){var b="";return 0==a.contractedY?b="T":a.contractedY==a.contentHeight-a.contractedHeight&&(b="B"),0==a.contractedX?b+="L":a.contractedX==a.contentWidth-a.contractedWidth&&(b+="R"),2==b.length?b:""},com.adtech.FlashContent_2_67_0.prototype.createFlashVars=function(a){var b=com.adtech.HtmlContent_2_67_0;this.flashVars={renderingDomain:window.location.hostname,keyValueDelim:b.KEY_VALUE_DELIM,propDelim:b.PROPERTY_DELIM,objDelim:b.OBJECT_DELIM,clickTargets:this.serializeClickTargets(a.clickthroughs),preview:a.preview,canvas_id:a.canvasId,flight_id:a.adServerVars.id,banner_id:a.adServerVars.bannerId}},com.adtech.FlashContent_2_67_0.prototype.forcePageLoad=function(){this.flashVars.pageLoaded="true",this.pageLoadForced=!0},com.adtech.FlashContent_2_67_0.prototype.serializeClickTargets=function(a){var b=com.adtech.HtmlContent_2_67_0,c="";for(var d in a)if(a.hasOwnProperty(d)){""!=c&&(c+=b.OBJECT_DELIM);var e=a[d];c+="id"+b.KEY_VALUE_DELIM+escape(d)+b.PROPERTY_DELIM+"target"+b.KEY_VALUE_DELIM+escape(e.target)+b.PROPERTY_DELIM+"features"+b.KEY_VALUE_DELIM+escape(e.features)}return escape(c)},com.adtech.FlashContent_2_67_0.prototype.setDOMContext=function(a){com.adtech.FlashContent_2_67_0.supa.setDOMContext.call(this,a),com.adtech.swfobject_2_67_0.setDOMContext(a)},com.adtech.FlashContent_2_67_0.prototype.renderContent=function(){var a=this.targetId+"_swf";this.containerObject.innerHTML='<div id="'+a+'"></div>',this.attributes={id:a,name:a,style:"display:block;padding:0px;"},this.flashVars.uid=this.targetId,this.globalEventBus.pageLoaded&&this.forcePageLoad(),this.addExternalInterfaceHandler();var b=com.adtech.swfobject_2_67_0,c=this.advertRef.getFileUrl(this.content);-1!=b.ua.string.toUpperCase().indexOf("AOL")&&(c+="?"+Math.random()),b.embedSWF(c,a,this.width,this.height,this.flashVersion,this.flashVars,this.params,this.attributes,com.adtech.Utils_2_67_0.createClosure(this,this.embedHandler))},com.adtech.FlashContent_2_67_0.prototype.addExternalInterfaceHandler=function(){var a=this;try{this.parent.windowContext[this.targetId+"_handler"]=function(b){return a.flashEventHandler(b)}}catch(b){}},com.adtech.FlashContent_2_67_0.prototype.getWindowScript=function(){if("function"!=typeof window[this.externalInterfaceHandler]){var a=this;window[this.externalInterfaceHandler]=function(b){return a.flashEventHandler(b)}}return'<script type="text/javascript">function '+this.externalInterfaceHandler+"(data) {return parent."+this.externalInterfaceHandler+"(data);}<\/script>"},com.adtech.FlashContent_2_67_0.prototype.dispatchToContent=function(a){if(this.contentReady)try{this.contentObject.jsEventHandler(a)}catch(b){this.addToOutgoingQueue(a)}else this.addToOutgoingQueue(a)},com.adtech.FlashContent_2_67_0.prototype.createContentEvent=function(a){var b=this.createContentEventProperties(a);return{command:com.adtech.HtmlContent_2_67_0.CMD_TYPE_DISPATCH,type:a.type,args:b}},com.adtech.FlashContent_2_67_0.prototype.flashInitialised=function(a){this.componentCapabilities=a||null,this.contentInitialised()},com.adtech.FlashContent_2_67_0.prototype.getConfigValue=function(a){var b=a.split("."),c=b.length;if(c>0){for(var d=this.advertRef,e=0;e<c;e++)try{d=d[b[e]]}catch(f){}try{return d.toString()}catch(f){}}return""},com.adtech.FlashContent_2_67_0.prototype.getOffsetX=function(){return this.adConfig.assetContainers.main.contractedX},com.adtech.FlashContent_2_67_0.prototype.getOffsetY=function(){return this.adConfig.assetContainers.main.contractedY},com.adtech.FlashContent_2_67_0.prototype.contentIsDynamic=function(a,b){return this.advertRef.contentIsDynamic(a,b)},com.adtech.FlashContent_2_67_0.prototype.contentClick=function(a,b){var c={};if("object"==typeof b)for(var d in b){var e=d.split(com.adtech.HtmlContent_2_67_0.PROPERTY_DELIM).join(" ");c[e]=b[d],delete b[d]}com.adtech.FlashContent_2_67_0.supa.contentClick.call(this,a,c)},com.adtech.FlashContent_2_67_0.prototype.resizeObject=function(a){if(this.objectResizingEnabled&&null!=this.componentCapabilities)if(this.contentReady)this.contentObject.style.marginTop=a.top,this.contentObject.style.marginLeft=a.left,this.contentObject.width=this.contentObject.style.width=parseInt(a.right,10)-parseInt(a.left,10)+"px",this.contentObject.height=this.contentObject.style.height=parseInt(a.bottom,10)-parseInt(a.top,10)+"px";else{var b=com.adtech.Utils_2_67_0.createClosure(this,this.resizeObject);this.addEventListener(com.adtech.RichMediaEvent_2_67_0.READY,b,a)}},com.adtech.FlashContent_2_67_0.prototype.shouldLaunchWinViaExtInterface=function(){return parseInt(this.langVersion)>=3&&parseInt(com.adtech.Utils_2_67_0.getIEVersion().major)>=7?"true":"false"},com.adtech.FlashContent_2_67_0.prototype.embedHandler=function(a){this.contentObject=a.ref,this.shouldHandleMouseEvents&&(com.adtech.Utils_2_67_0.registerNativeEventHandler(this.contentObject,"mouseover",com.adtech.Utils_2_67_0.createClosure(this,this.mouseOverHandler)),
com.adtech.Utils_2_67_0.registerNativeEventHandler(this.contentObject,"mouseout",com.adtech.Utils_2_67_0.createClosure(this,this.mouseOutHandler)))},com.adtech.FlashContent_2_67_0.prototype.flashEventHandler=function(a){switch(a.command){case com.adtech.HtmlContent_2_67_0.CMD_TYPE_DISPATCH:var b=new com.adtech.RichMediaEvent_2_67_0(a.type);"object"==typeof a.meta&&(b.meta=a.meta),this.dispatchAdvertLevelEvent(b);break;case com.adtech.HtmlContent_2_67_0.CMD_TYPE_EXEC:var c=a.args?a.args:[];if("function"==typeof this[a.type])return this[a.type].apply(this,c);var d=this.advertRef[a.type].apply(this.advertRef,c);return com.adtech.Utils_2_67_0.isArray(d)?[].slice.call(d):d}},com.adtech.ScriptContent_2_67_0=function(a,b,c,d,e,f){com.adtech.ScriptContent_2_67_0.supa.constructor.call(this,a,b,c,d,e,f)},com.adtech.Utils_2_67_0.extend(com.adtech.ScriptContent_2_67_0,com.adtech.HtmlContent_2_67_0),com.adtech.ScriptContent_2_67_0.prototype.renderContent=function(){if(this.replaceKeyValues(),/^\s*<\s*iframe/i.test(this.content))return void(this.containerObject.innerHTML=this.content);this.tmpContainerObjId=this.targetId+"_tmpContainer",document.write('<div id="'+this.tmpContainerObjId+'" style="position:absolute;clip:rect(0px, 1px, 1px, 0px)">'),document.write(this.content),document.write("</div>"),this.globalEventBus.DOMLoaded?this.moveThirdPartyContent():this.globalEventBus.addEventListener(com.adtech.RichMediaEvent_2_67_0.PAGE_LOAD,this.moveThirdPartyContent,this)},com.adtech.ScriptContent_2_67_0.prototype.moveThirdPartyContent=function(){for(var a=document.getElementById(this.tmpContainerObjId),b=a.childNodes.length,c=[],d=0;d<b;d++){var e=a.childNodes[d];if("SCRIPT"!=e.nodeName&&"NOSCRIPT"!=e.nodeName){if("IMG"==e.nodeName){var f=parseInt(e.getAttribute("width")),g=parseInt(e.style.width);if(!isNaN(g)&&g<=1||!isNaN(f)&&f<=1)continue}c.push(e)}}for(var h=c.length,i=0;i<h;i++){var e=c[i];e.parentNode.removeChild(e),this.containerObject.appendChild(e)}a.style.display="none"},com.adtech.ScriptContent_2_67_0.prototype.replaceKeyValues=function(){if(this.adConfig.pubVars.kvs)for(var a=this.adConfig.pubVars.kvs.split("#~~#"),b=0;b<a.length;b++){var c=a[b].split("#=#");if(2==c.length){var d=new RegExp("_"+c[0]+"_","g");this.content=this.content.replace(d,c[1])}}},com.adtech.ContentFactory_2_67_0=function(){},com.adtech.ContentFactory_2_67_0.HTML="html",com.adtech.ContentFactory_2_67_0.FLASH="flash",com.adtech.ContentFactory_2_67_0.SCRIPT="script",com.adtech.ContentFactory_2_67_0.NO_CONTENT="noContent",com.adtech.ContentFactory_2_67_0.getContent=function(a,b,c,d,e,f,g){switch(a){case this.HTML:return new com.adtech.HtmlContent_2_67_0(b,c,d,e,f,g);case this.FLASH:return new com.adtech.FlashContent_2_67_0(b,c,d,e,f,g);case this.SCRIPT:return new com.adtech.ScriptContent_2_67_0(b,c,d,e,f,g);case this.NO_CONTENT:return new com.adtech.NoContent_2_67_0(b,c,d,e,f,g)}},"undefined"!=typeof adtechIframeHashArray&&self!=top)com.adtech.IframeUtils_2_67_0.setIframeObjectsFromHashArray(),com.adtech.IframeUtils_2_67_0.loadAdJsFile();else if(void 0===adtechAdManager_2_67_0){var adtechAdManager_2_67_0=new com.adtech.AdManager_2_67_0;"undefined"!=typeof adtechAdQueue&&adtechAdManager_2_67_0.registerAds(adtechAdQueue)}
//# sourceMappingURL=adtechRichMediaLib_2_67_0.js.map